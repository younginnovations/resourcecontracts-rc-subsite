!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(window.jQuery)}(function(t){Array.prototype.reduce||(Array.prototype.reduce=function(t){var e,i=Object(this),n=i.length>>>0,o=0;if(2===arguments.length)e=arguments[1];else{for(;o<n&&!(o in i);)o++;if(o>=n)throw new TypeError("Reduce of empty array with no initial value");e=i[o++]}for(;o<n;o++)o in i&&(e=t(e,i[o],o,i));return e}),"function"!=typeof Array.prototype.filter&&(Array.prototype.filter=function(t){for(var e=Object(this),i=e.length>>>0,n=[],o=arguments.length>=2?arguments[1]:void 0,a=0;a<i;a++)if(a in e){var s=e[a];t.call(o,s,a,e)&&n.push(s)}return n}),Array.prototype.map||(Array.prototype.map=function(t,e){var i,n,o;if(null===this)throw new TypeError(" this is null or not defined");var a=Object(this),s=a.length>>>0;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(arguments.length>1&&(i=e),n=new Array(s),o=0;o<s;){var r,l;o in a&&(r=a[o],l=t.call(i,r,o,a),n[o]=l),o++}return n});var e,i="function"==typeof define&&define.amd,n=function(e){var i="Comic Sans MS"===e?"Courier New":"Comic Sans MS",n=t("<div>").css({position:"absolute",left:"-9999px",top:"-9999px",fontSize:"200px"}).text("mmmmmmmmmwwwwwww").appendTo(document.body),o=n.css("fontFamily",i).width(),a=n.css("fontFamily",e+","+i).width();return n.remove(),o!==a},o=navigator.userAgent,a=/MSIE|Trident/i.test(o);if(a){var s=/MSIE (\d+[.]\d+)/.exec(o);s&&(e=parseFloat(s[1])),s=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(o),s&&(e=parseFloat(s[1]))}var r,l={isMac:navigator.appVersion.indexOf("Mac")>-1,isMSIE:a,isFF:/firefox/i.test(o),isWebkit:/webkit/i.test(o),isSafari:/safari/i.test(o),browserVersion:e,jqueryVersion:parseFloat(t.fn.jquery),isSupportAmd:i,hasCodeMirror:i?require.specified("CodeMirror"):!!window.CodeMirror,isFontInstalled:n,isW3CRangeSupport:!!document.createRange},u=function(){var e=function(t){return function(e){return t===e}},i=function(t,e){return t===e},n=function(t){return function(e,i){return e[t]===i[t]}},o=function(){return!0},a=function(){return!1},s=function(t){return function(){return!t.apply(t,arguments)}},r=function(t,e){return function(i){return t(i)&&e(i)}},l=function(t){return t},u=0,d=function(t){var e=++u+"";return t?t+e:e},c=function(e){var i=t(document);return{top:e.top+i.scrollTop(),left:e.left+i.scrollLeft(),width:e.right-e.left,height:e.bottom-e.top}},h=function(t){var e={};for(var i in t)t.hasOwnProperty(i)&&(e[t[i]]=i);return e},p=function(t,e){return e=e||"",e+t.split(".").map(function(t){return t.substring(0,1).toUpperCase()+t.substring(1)}).join("")};return{eq:e,eq2:i,peq2:n,ok:o,fail:a,self:l,not:s,and:r,uniqueId:d,rect2bnd:c,invertObject:h,namespaceToCamel:p}}(),d=function(){var e=function(t){return t[0]},i=function(t){return t[t.length-1]},n=function(t){return t.slice(0,t.length-1)},o=function(t){return t.slice(1)},a=function(t,e){for(var i=0,n=t.length;i<n;i++){var o=t[i];if(e(o))return o}},s=function(t,e){for(var i=0,n=t.length;i<n;i++)if(!e(t[i]))return!1;return!0},r=function(e,i){return t.inArray(i,e)},l=function(t,e){return r(t,e)!==-1},d=function(t,e){return e=e||u.self,t.reduce(function(t,i){return t+e(i)},0)},c=function(t){for(var e=[],i=-1,n=t.length;++i<n;)e[i]=t[i];return e},h=function(t,n){if(!t.length)return[];var a=o(t);return a.reduce(function(t,e){var o=i(t);return n(i(o),e)?o[o.length]=e:t[t.length]=[e],t},[[e(t)]])},p=function(t){for(var e=[],i=0,n=t.length;i<n;i++)t[i]&&e.push(t[i]);return e},f=function(t){for(var e=[],i=0,n=t.length;i<n;i++)l(e,t[i])||e.push(t[i]);return e},m=function(t,e){var i=r(t,e);return i===-1?null:t[i+1]},v=function(t,e){var i=r(t,e);return i===-1?null:t[i-1]};return{head:e,last:i,initial:n,tail:o,prev:v,next:m,find:a,contains:l,all:s,sum:d,from:c,clusterBy:h,compact:p,unique:f}}(),c=String.fromCharCode(160),h="\ufeff",p=function(){var e=function(e){return e&&t(e).hasClass("note-editable")},i=function(e){return e&&t(e).hasClass("note-control-sizing")},n=function(e){var i;if(e.hasClass("note-air-editor")){var n=d.last(e.attr("id").split("-"));return i=function(e){return function(){return t(e+n)}},{editor:function(){return e},holder:function(){return e.data("holder")},editable:function(){return e},popover:i("#note-popover-"),handle:i("#note-handle-"),dialog:i("#note-dialog-")}}i=function(t,i){return i=i||e,function(){return i.find(t)}};var o=e.data("options"),a=o&&o.dialogsInBody?t(document.body):null;return{editor:function(){return e},holder:function(){return e.data("holder")},dropzone:i(".note-dropzone"),toolbar:i(".note-toolbar"),editable:i(".note-editable"),codable:i(".note-codable"),statusbar:i(".note-statusbar"),popover:i(".note-popover"),handle:i(".note-handle"),dialog:i(".note-dialog",a)}},o=function(e){var i=t(e).closest(".note-editor, .note-air-editor, .note-air-layout");if(!i.length)return null;var o;return o=i.is(".note-editor, .note-air-editor")?i:t("#note-editor-"+d.last(i.attr("id").split("-"))),n(o)},a=function(t){return t=t.toUpperCase(),function(e){return e&&e.nodeName.toUpperCase()===t}},s=function(t){return t&&3===t.nodeType},r=function(t){return t&&/^BR|^IMG|^HR|^IFRAME|^BUTTON/.test(t.nodeName.toUpperCase())},f=function(t){return!e(t)&&(t&&/^DIV|^P|^LI|^H[1-7]/.test(t.nodeName.toUpperCase()))},m=a("LI"),v=function(t){return f(t)&&!m(t)},g=a("TABLE"),b=function(t){return!(x(t)||y(t)||w(t)||f(t)||g(t)||C(t))},y=function(t){return t&&/^UL|^OL/.test(t.nodeName.toUpperCase())},w=a("HR"),k=function(t){return t&&/^TD|^TH/.test(t.nodeName.toUpperCase())},C=a("BLOCKQUOTE"),x=function(t){return k(t)||C(t)||e(t)},D=a("A"),T=function(t){return b(t)&&!!A(t,f)},M=function(t){return b(t)&&!A(t,f)},S=a("BODY"),N=function(t,e){return t.nextSibling===e||t.previousSibling===e},F=function(t,e){e=e||u.ok;var i=[];return t.previousSibling&&e(t.previousSibling)&&i.push(t.previousSibling),i.push(t),t.nextSibling&&e(t.nextSibling)&&i.push(t.nextSibling),i},$=l.isMSIE&&l.browserVersion<11?"&nbsp;":"<br>",P=function(t){return s(t)?t.nodeValue.length:t.childNodes.length},E=function(t){var e=P(t);return 0===e||(!s(t)&&1===e&&t.innerHTML===$||!(!d.all(t.childNodes,s)||""!==t.innerHTML))},I=function(t){r(t)||P(t)||(t.innerHTML=$)},A=function(t,i){for(;t;){if(i(t))return t;if(e(t))break;t=t.parentNode}return null},L=function(t,i){for(t=t.parentNode;t&&1===P(t);){if(i(t))return t;if(e(t))break;t=t.parentNode}return null},U=function(t,i){i=i||u.fail;var n=[];return A(t,function(t){return e(t)||n.push(t),i(t)}),n},R=function(t,e){var i=U(t);return d.last(i.filter(e))},H=function(e,i){for(var n=U(e),o=i;o;o=o.parentNode)if(t.inArray(o,n)>-1)return o;return null},O=function(t,e){e=e||u.fail;for(var i=[];t&&!e(t);)i.push(t),t=t.previousSibling;return i},B=function(t,e){e=e||u.fail;for(var i=[];t&&!e(t);)i.push(t),t=t.nextSibling;return i},j=function(t,e){var i=[];return e=e||u.ok,function n(o){t!==o&&e(o)&&i.push(o);for(var a=0,s=o.childNodes.length;a<s;a++)n(o.childNodes[a])}(t),i},z=function(e,i){var n=e.parentNode,o=t("<"+i+">")[0];return n.insertBefore(o,e),o.appendChild(e),o},V=function(t,e){var i=e.nextSibling,n=e.parentNode;return i?n.insertBefore(t,i):n.appendChild(t),t},_=function(e,i){return t.each(i,function(t,i){e.appendChild(i)}),e},Y=function(t){return 0===t.offset},W=function(t){return t.offset===P(t.node)},K=function(t){return Y(t)||W(t)},q=function(t,e){for(;t&&t!==e;){if(0!==G(t))return!1;t=t.parentNode}return!0},Q=function(t,e){for(;t&&t!==e;){if(G(t)!==P(t.parentNode)-1)return!1;t=t.parentNode}return!0},J=function(t,e){return Y(t)&&q(t.node,e)},Z=function(t,e){return W(t)&&Q(t.node,e)},G=function(t){for(var e=0;t=t.previousSibling;)e+=1;return e},X=function(t){return!!(t&&t.childNodes&&t.childNodes.length)},tt=function(t,i){var n,o;if(0===t.offset){if(e(t.node))return null;n=t.node.parentNode,o=G(t.node)}else X(t.node)?(n=t.node.childNodes[t.offset-1],o=P(n)):(n=t.node,o=i?0:t.offset-1);return{node:n,offset:o}},et=function(t,i){var n,o;if(P(t.node)===t.offset){if(e(t.node))return null;n=t.node.parentNode,o=G(t.node)+1}else X(t.node)?(n=t.node.childNodes[t.offset],o=0):(n=t.node,o=i?P(t.node):t.offset+1);return{node:n,offset:o}},it=function(t,e){return t.node===e.node&&t.offset===e.offset},nt=function(t){if(s(t.node)||!X(t.node)||E(t.node))return!0;var e=t.node.childNodes[t.offset-1],i=t.node.childNodes[t.offset];return!(e&&!r(e)||i&&!r(i))},ot=function(t,e){for(;t;){if(e(t))return t;t=tt(t)}return null},at=function(t,e){for(;t;){if(e(t))return t;t=et(t)}return null},st=function(t){if(!s(t.node))return!1;var e=t.node.nodeValue.charAt(t.offset-1);return e&&" "!==e&&e!==c},rt=function(t,e,i,n){for(var o=t;o&&(i(o),!it(o,e));){var a=n&&t.node!==o.node&&e.node!==o.node;o=et(o,a)}},lt=function(t,e){var i=U(e,u.eq(t));return i.map(G).reverse()},ut=function(t,e){for(var i=t,n=0,o=e.length;n<o;n++)i=i.childNodes.length<=e[n]?i.childNodes[i.childNodes.length-1]:i.childNodes[e[n]];return i},dt=function(t,e){var i=e&&e.isSkipPaddingBlankHTML,n=e&&e.isNotSplitEdgePoint;if(K(t)&&(s(t.node)||n)){if(Y(t))return t.node;if(W(t))return t.node.nextSibling}if(s(t.node))return t.node.splitText(t.offset);var o=t.node.childNodes[t.offset],a=V(t.node.cloneNode(!1),t.node);return _(a,B(o)),i||(I(t.node),I(a)),a},ct=function(t,e,i){var n=U(e.node,u.eq(t));return n.length?1===n.length?dt(e,i):n.reduce(function(t,n){return t===e.node&&(t=dt(e,i)),dt({node:n,offset:t?p.position(t):P(n)},i)}):null},ht=function(t,e){var i,n,o=e?f:x,a=U(t.node,o),s=d.last(a)||t.node;o(s)?(i=a[a.length-2],n=s):(i=s,n=i.parentNode);var r=i&&ct(i,t,{isSkipPaddingBlankHTML:e,isNotSplitEdgePoint:e});return r||n!==t.node||(r=t.node.childNodes[t.offset]),{rightNode:r,container:n}},pt=function(t){return document.createElement(t)},ft=function(t){return document.createTextNode(t)},mt=function(t,e){if(t&&t.parentNode){if(t.removeNode)return t.removeNode(e);var i=t.parentNode;if(!e){var n,o,a=[];for(n=0,o=t.childNodes.length;n<o;n++)a.push(t.childNodes[n]);for(n=0,o=a.length;n<o;n++)i.insertBefore(a[n],t)}i.removeChild(t)}},vt=function(t,i){for(;t&&!e(t)&&i(t);){var n=t.parentNode;mt(t),t=n}},gt=function(t,e){if(t.nodeName.toUpperCase()===e.toUpperCase())return t;var i=pt(e);return t.style.cssText&&(i.style.cssText=t.style.cssText),_(i,d.from(t.childNodes)),V(i,t),mt(t),i},bt=a("TEXTAREA"),yt=function(t,e){var i=bt(t[0])?t.val():t.html();return e?i.replace(/[\n\r]/g,""):i},wt=function(e,i){var n=yt(e);if(i){var o=/<(\/?)(\b(?!!)[^>\s]*)(.*?)(\s*\/?>)/g;n=n.replace(o,function(t,e,i){i=i.toUpperCase();var n=/^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(i)&&!!e,o=/^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(i);return t+(n||o?"\n":"")}),n=t.trim(n)}return n};return{NBSP_CHAR:c,ZERO_WIDTH_NBSP_CHAR:h,blank:$,emptyPara:"<p>"+$+"</p>",makePredByNodeName:a,isEditable:e,isControlSizing:i,buildLayoutInfo:n,makeLayoutInfo:o,isText:s,isVoid:r,isPara:f,isPurePara:v,isInline:b,isBlock:u.not(b),isBodyInline:M,isBody:S,isParaInline:T,isList:y,isTable:g,isCell:k,isBlockquote:C,isBodyContainer:x,isAnchor:D,isDiv:a("DIV"),isLi:m,isBR:a("BR"),isSpan:a("SPAN"),isB:a("B"),isU:a("U"),isS:a("S"),isI:a("I"),isImg:a("IMG"),isTextarea:bt,isEmpty:E,isEmptyAnchor:u.and(D,E),isClosestSibling:N,withClosestSiblings:F,nodeLength:P,isLeftEdgePoint:Y,isRightEdgePoint:W,isEdgePoint:K,isLeftEdgeOf:q,isRightEdgeOf:Q,isLeftEdgePointOf:J,isRightEdgePointOf:Z,prevPoint:tt,nextPoint:et,isSamePoint:it,isVisiblePoint:nt,prevPointUntil:ot,nextPointUntil:at,isCharPoint:st,walkPoint:rt,ancestor:A,singleChildAncestor:L,listAncestor:U,lastAncestor:R,listNext:B,listPrev:O,listDescendant:j,commonAncestor:H,wrap:z,insertAfter:V,appendChildNodes:_,position:G,hasChildren:X,makeOffsetPath:lt,fromOffsetPath:ut,splitTree:ct,splitPoint:ht,create:pt,createText:ft,remove:mt,removeWhile:vt,replace:gt,html:wt,value:yt}}(),f=function(){var e=function(t,e){var i,n,o=t.parentElement(),a=document.body.createTextRange(),s=d.from(o.childNodes);for(i=0;i<s.length;i++)if(!p.isText(s[i])){if(a.moveToElementText(s[i]),a.compareEndPoints("StartToStart",t)>=0)break;n=s[i]}if(0!==i&&p.isText(s[i-1])){var r=document.body.createTextRange(),l=null;r.moveToElementText(n||o),r.collapse(!n),l=n?n.nextSibling:o.firstChild;var u=t.duplicate();u.setEndPoint("StartToStart",r);for(var c=u.text.replace(/[\r\n]/g,"").length;c>l.nodeValue.length&&l.nextSibling;)c-=l.nodeValue.length,l=l.nextSibling;l.nodeValue;e&&l.nextSibling&&p.isText(l.nextSibling)&&c===l.nodeValue.length&&(c-=l.nodeValue.length,l=l.nextSibling),o=l,i=c}return{cont:o,offset:i}},i=function(t){var e=function(t,i){var n,o;if(p.isText(t)){var a=p.listPrev(t,u.not(p.isText)),s=d.last(a).previousSibling;n=s||t.parentNode,i+=d.sum(d.tail(a),p.nodeLength),o=!s}else{if(n=t.childNodes[i]||t,p.isText(n))return e(n,0);i=0,o=!1}return{node:n,collapseToStart:o,offset:i}},i=document.body.createTextRange(),n=e(t.node,t.offset);return i.moveToElementText(n.node),i.collapse(n.collapseToStart),i.moveStart("character",n.offset),i},n=function(e,o,a,s){this.sc=e,this.so=o,this.ec=a,this.eo=s;var r=function(){if(l.isW3CRangeSupport){var t=document.createRange();return t.setStart(e,o),t.setEnd(a,s),t}var n=i({node:e,offset:o});return n.setEndPoint("EndToEnd",i({node:a,offset:s})),n};this.getPoints=function(){return{sc:e,so:o,ec:a,eo:s}},this.getStartPoint=function(){return{node:e,offset:o}},this.getEndPoint=function(){return{node:a,offset:s}},this.select=function(){var t=r();if(l.isW3CRangeSupport){var e=document.getSelection();e.rangeCount>0&&e.removeAllRanges(),e.addRange(t)}else t.select();return this},this.normalize=function(){var t=function(t,e){if(p.isVisiblePoint(t)&&!p.isEdgePoint(t)||p.isVisiblePoint(t)&&p.isRightEdgePoint(t)&&!e||p.isVisiblePoint(t)&&p.isLeftEdgePoint(t)&&e||p.isVisiblePoint(t)&&p.isBlock(t.node)&&p.isEmpty(t.node))return t;var i=p.ancestor(t.node,p.isBlock);if((p.isLeftEdgePointOf(t,i)||p.isVoid(p.prevPoint(t).node))&&!e||(p.isRightEdgePointOf(t,i)||p.isVoid(p.nextPoint(t).node))&&e){if(p.isVisiblePoint(t))return t;e=!e}var n=e?p.nextPointUntil(p.nextPoint(t),p.isVisiblePoint):p.prevPointUntil(p.prevPoint(t),p.isVisiblePoint);return n||t},e=t(this.getEndPoint(),!1),i=this.isCollapsed()?e:t(this.getStartPoint(),!0);return new n(i.node,i.offset,e.node,e.offset)},this.nodes=function(t,e){t=t||u.ok;var i=e&&e.includeAncestor,n=e&&e.fullyContains,o=this.getStartPoint(),a=this.getEndPoint(),s=[],r=[];return p.walkPoint(o,a,function(e){if(!p.isEditable(e.node)){var o;n?(p.isLeftEdgePoint(e)&&r.push(e.node),p.isRightEdgePoint(e)&&d.contains(r,e.node)&&(o=e.node)):o=i?p.ancestor(e.node,t):e.node,o&&t(o)&&s.push(o)}},!0),d.unique(s)},this.commonAncestor=function(){return p.commonAncestor(e,a)},this.expand=function(t){var i=p.ancestor(e,t),r=p.ancestor(a,t);if(!i&&!r)return new n(e,o,a,s);var l=this.getPoints();return i&&(l.sc=i,l.so=0),r&&(l.ec=r,l.eo=p.nodeLength(r)),new n(l.sc,l.so,l.ec,l.eo)},this.collapse=function(t){return t?new n(e,o,e,o):new n(a,s,a,s)},this.splitText=function(){var t=e===a,i=this.getPoints();return p.isText(a)&&!p.isEdgePoint(this.getEndPoint())&&a.splitText(s),p.isText(e)&&!p.isEdgePoint(this.getStartPoint())&&(i.sc=e.splitText(o),i.so=0,t&&(i.ec=i.sc,i.eo=s-o)),new n(i.sc,i.so,i.ec,i.eo)},this.deleteContents=function(){if(this.isCollapsed())return this;var e=this.splitText(),i=e.nodes(null,{fullyContains:!0}),o=p.prevPointUntil(e.getStartPoint(),function(t){return!d.contains(i,t.node)}),a=[];return t.each(i,function(t,e){var i=e.parentNode;o.node!==i&&1===p.nodeLength(i)&&a.push(i),p.remove(e,!1)}),t.each(a,function(t,e){p.remove(e,!1)}),new n(o.node,o.offset,o.node,o.offset).normalize()};var c=function(t){return function(){var i=p.ancestor(e,t);return!!i&&i===p.ancestor(a,t)}};this.isOnEditable=c(p.isEditable),this.isOnList=c(p.isList),this.isOnAnchor=c(p.isAnchor),this.isOnCell=c(p.isCell),this.isLeftEdgeOf=function(t){if(!p.isLeftEdgePoint(this.getStartPoint()))return!1;var e=p.ancestor(this.sc,t);return e&&p.isLeftEdgeOf(this.sc,e)},this.isCollapsed=function(){return e===a&&o===s},this.wrapBodyInlineWithPara=function(){if(p.isBodyContainer(e)&&p.isEmpty(e))return e.innerHTML=p.emptyPara,new n(e.firstChild,0,e.firstChild,0);var t=this.normalize();if(p.isParaInline(e)||p.isPara(e))return t;var i;if(p.isInline(t.sc)){var o=p.listAncestor(t.sc,u.not(p.isInline));i=d.last(o),p.isInline(i)||(i=o[o.length-2]||t.sc.childNodes[t.so])}else i=t.sc.childNodes[t.so>0?t.so-1:0];var a=p.listPrev(i,p.isParaInline).reverse();if(a=a.concat(p.listNext(i.nextSibling,p.isParaInline)),a.length){var s=p.wrap(d.head(a),"p");p.appendChildNodes(s,d.tail(a))}return this.normalize()},this.insertNode=function(t){var e=this.wrapBodyInlineWithPara().deleteContents(),i=p.splitPoint(e.getStartPoint(),p.isInline(t));return i.rightNode?i.rightNode.parentNode.insertBefore(t,i.rightNode):i.container.appendChild(t),t},this.pasteHTML=function(e){var i=t("<div></div>").html(e)[0],n=d.from(i.childNodes),o=this.wrapBodyInlineWithPara().deleteContents();return n.reverse().map(function(t){return o.insertNode(t)}).reverse()},this.toString=function(){var t=r();return l.isW3CRangeSupport?t.toString():t.text},this.getWordRange=function(t){var e=this.getEndPoint();if(!p.isCharPoint(e))return this;var i=p.prevPointUntil(e,function(t){return!p.isCharPoint(t)});return t&&(e=p.nextPointUntil(e,function(t){return!p.isCharPoint(t)})),new n(i.node,i.offset,e.node,e.offset)},this.bookmark=function(t){return{s:{path:p.makeOffsetPath(t,e),offset:o},e:{path:p.makeOffsetPath(t,a),offset:s}}},this.paraBookmark=function(t){return{s:{path:d.tail(p.makeOffsetPath(d.head(t),e)),offset:o},e:{path:d.tail(p.makeOffsetPath(d.last(t),a)),offset:s}}},this.getClientRects=function(){var t=r();return t.getClientRects()}};return{create:function(t,i,o,a){if(arguments.length)2===arguments.length&&(o=t,a=i);else if(l.isW3CRangeSupport){var s=document.getSelection();if(!s||0===s.rangeCount)return null;if(p.isBody(s.anchorNode))return null;var r=s.getRangeAt(0);t=r.startContainer,i=r.startOffset,o=r.endContainer,a=r.endOffset}else{var u=document.selection.createRange(),d=u.duplicate();d.collapse(!1);var c=u;c.collapse(!0);var h=e(c,!0),f=e(d,!1);p.isText(h.node)&&p.isLeftEdgePoint(h)&&p.isTextNode(f.node)&&p.isRightEdgePoint(f)&&f.node.nextSibling===h.node&&(h=f),t=h.cont,i=h.offset,o=f.cont,a=f.offset}return new n(t,i,o,a)},createFromNode:function(t){var e=t,i=0,n=t,o=p.nodeLength(n);return p.isVoid(e)&&(i=p.listPrev(e).length-1,e=e.parentNode),p.isBR(n)?(o=p.listPrev(n).length-1,n=n.parentNode):p.isVoid(n)&&(o=p.listPrev(n).length,n=n.parentNode),this.create(e,i,n,o)},createFromNodeBefore:function(t){return this.createFromNode(t).collapse(!0)},createFromNodeAfter:function(t){return this.createFromNode(t).collapse()},createFromBookmark:function(t,e){var i=p.fromOffsetPath(t,e.s.path),o=e.s.offset,a=p.fromOffsetPath(t,e.e.path),s=e.e.offset;return new n(i,o,a,s)},createFromParaBookmark:function(t,e){var i=t.s.offset,o=t.e.offset,a=p.fromOffsetPath(d.head(e),t.s.path),s=p.fromOffsetPath(d.last(e),t.e.path);return new n(a,i,s,o)}}}(),m={version:"0.6.16",options:{width:null,height:null,minHeight:null,maxHeight:null,focus:!1,tabsize:4,styleWithSpan:!0,disableLinkTarget:!1,disableDragAndDrop:!1,disableResizeEditor:!1,disableResizeImage:!1,shortcuts:!0,textareaAutoSync:!0,placeholder:!1,prettifyHtml:!0,iconPrefix:"fa fa-",icons:{font:{bold:"bold",italic:"italic",underline:"underline",clear:"eraser",height:"text-height",strikethrough:"strikethrough",superscript:"superscript",subscript:"subscript"},image:{image:"picture-o",floatLeft:"align-left",floatRight:"align-right",floatNone:"align-justify",shapeRounded:"square",shapeCircle:"circle-o",shapeThumbnail:"picture-o",shapeNone:"times",remove:"trash-o"},link:{link:"link",unlink:"unlink",edit:"edit"},table:{table:"table"},hr:{insert:"minus"},style:{style:"magic"},lists:{unordered:"list-ul",ordered:"list-ol"},options:{help:"question",fullscreen:"arrows-alt",codeview:"code"},paragraph:{paragraph:"align-left",outdent:"outdent",indent:"indent",left:"align-left",center:"align-center",right:"align-right",justify:"align-justify"},color:{recent:"font"},history:{undo:"undo",redo:"repeat"},misc:{check:"check"}},dialogsInBody:!1,codemirror:{mode:"text/html",htmlMode:!0,lineNumbers:!0},lang:"en-US",direction:null,toolbar:[["style",["style"]],["font",["bold","italic","underline","clear"]],["fontname",["fontname"]],["fontsize",["fontsize"]],["color",["color"]],["para",["ul","ol","paragraph"]],["height",["height"]],["table",["table"]],["insert",["link","picture","hr"]],["view",["fullscreen","codeview"]],["help",["help"]]],plugin:{},airMode:!1,airPopover:[["color",["color"]],["font",["bold","underline","clear"]],["para",["ul","paragraph"]],["table",["table"]],["insert",["link","picture"]]],styleTags:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],defaultFontName:"Helvetica Neue",fontNames:["Arial","Arial Black","Comic Sans MS","Courier New","Helvetica Neue","Helvetica","Impact","Lucida Grande","Tahoma","Times New Roman","Verdana"],fontNamesIgnoreCheck:[],fontSizes:["8","9","10","11","12","14","18","24","36"],colors:[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#F7F7F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#F7AD6B","#FFD663","#94BD7B","#73A5AD","#6BADDE","#8C7BC6","#C67BA5"],["#CE0000","#E79439","#EFC631","#6BA54A","#4A7B8C","#3984C6","#634AA5","#A54A7B"],["#9C0000","#B56308","#BD9400","#397B21","#104A5A","#085294","#311873","#731842"],["#630000","#7B3900","#846300","#295218","#083139","#003163","#21104A","#4A1031"]],lineHeights:["1.0","1.2","1.4","1.5","1.6","1.8","2.0","3.0"],insertTableMaxSize:{col:10,row:10},maximumImageFileSize:null,oninit:null,onfocus:null,onblur:null,onenter:null,onkeyup:null,onkeydown:null,onImageUpload:null,onImageUploadError:null,onMediaDelete:null,onToolbarClick:null,onsubmit:null,onCreateLink:function(t){return t.indexOf("@")!==-1&&t.indexOf(":")===-1&&(t="mailto:"+t),t},keyMap:{pc:{ENTER:"insertParagraph","CTRL+Z":"undo","CTRL+Y":"redo",TAB:"tab","SHIFT+TAB":"untab","CTRL+B":"bold","CTRL+I":"italic","CTRL+U":"underline","CTRL+SHIFT+S":"strikethrough","CTRL+BACKSLASH":"removeFormat","CTRL+SHIFT+L":"justifyLeft","CTRL+SHIFT+E":"justifyCenter","CTRL+SHIFT+R":"justifyRight","CTRL+SHIFT+J":"justifyFull","CTRL+SHIFT+NUM7":"insertUnorderedList","CTRL+SHIFT+NUM8":"insertOrderedList","CTRL+LEFTBRACKET":"outdent","CTRL+RIGHTBRACKET":"indent","CTRL+NUM0":"formatPara","CTRL+NUM1":"formatH1","CTRL+NUM2":"formatH2","CTRL+NUM3":"formatH3","CTRL+NUM4":"formatH4","CTRL+NUM5":"formatH5","CTRL+NUM6":"formatH6","CTRL+ENTER":"insertHorizontalRule","CTRL+K":"showLinkDialog"},mac:{ENTER:"insertParagraph","CMD+Z":"undo","CMD+SHIFT+Z":"redo",TAB:"tab","SHIFT+TAB":"untab","CMD+B":"bold","CMD+I":"italic","CMD+U":"underline","CMD+SHIFT+S":"strikethrough","CMD+BACKSLASH":"removeFormat","CMD+SHIFT+L":"justifyLeft","CMD+SHIFT+E":"justifyCenter","CMD+SHIFT+R":"justifyRight","CMD+SHIFT+J":"justifyFull","CMD+SHIFT+NUM7":"insertUnorderedList","CMD+SHIFT+NUM8":"insertOrderedList","CMD+LEFTBRACKET":"outdent","CMD+RIGHTBRACKET":"indent","CMD+NUM0":"formatPara","CMD+NUM1":"formatH1","CMD+NUM2":"formatH2","CMD+NUM3":"formatH3","CMD+NUM4":"formatH4","CMD+NUM5":"formatH5","CMD+NUM6":"formatH6","CMD+ENTER":"insertHorizontalRule","CMD+K":"showLinkDialog"}}},lang:{"en-US":{font:{bold:"Bold",italic:"Italic",underline:"Underline",clear:"Remove Font Style",height:"Line Height",name:"Font Family",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript",size:"Font Size"},image:{image:"Picture",insert:"Insert Image",resizeFull:"Resize Full",resizeHalf:"Resize Half",resizeQuarter:"Resize Quarter",floatLeft:"Float Left",floatRight:"Float Right",floatNone:"Float None",shapeRounded:"Shape: Rounded",shapeCircle:"Shape: Circle",shapeThumbnail:"Shape: Thumbnail",shapeNone:"Shape: None",dragImageHere:"Drag image or text here",dropImage:"Drop image or Text",selectFromFiles:"Select from files",maximumFileSize:"Maximum file size",maximumFileSizeError:"Maximum file size exceeded.",url:"Image URL",remove:"Remove Image"},link:{link:"Link",insert:"Insert Link",unlink:"Unlink",edit:"Edit",textToDisplay:"Text to display",url:"To what URL should this link go?",openInNewWindow:"Open in new window"},table:{table:"Table"},hr:{insert:"Insert Horizontal Rule"},style:{style:"Style",normal:"Normal",blockquote:"Quote",pre:"Code",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6"},lists:{unordered:"Unordered list",ordered:"Ordered list"},options:{help:"Help",fullscreen:"Full Screen",codeview:"Code View"},paragraph:{paragraph:"Paragraph",outdent:"Outdent",indent:"Indent",left:"Align left",center:"Align center",right:"Align right",justify:"Justify full"},color:{recent:"Recent Color",more:"More Color",background:"Background Color",foreground:"Foreground Color",transparent:"Transparent",setTransparent:"Set transparent",reset:"Reset",resetToDefault:"Reset to default"},shortcut:{shortcuts:"Keyboard shortcuts",close:"Close",textFormatting:"Text formatting",action:"Action",paragraphFormatting:"Paragraph formatting",documentStyle:"Document Style",extraKeys:"Extra keys"},history:{undo:"Undo",redo:"Redo"}}}},v=function(){var e=function(e){return t.Deferred(function(i){t.extend(new FileReader,{onload:function(t){var e=t.target.result;i.resolve(e)},onerror:function(){i.reject(this)}}).readAsDataURL(e)}).promise()},i=function(e,i){return t.Deferred(function(n){var o=t("<img>");o.one("load",function(){o.off("error abort"),n.resolve(o)}).one("error abort",function(){o.off("load").detach(),n.reject(o)}).css({display:"none"}).appendTo(document.body).attr({src:e,"data-filename":i})}).promise()};return{readFileAsDataURL:e,createImage:i}}(),g=function(){var t={BACKSPACE:8,TAB:9,ENTER:13,SPACE:32,NUM0:48,NUM1:49,NUM2:50,NUM3:51,NUM4:52,NUM5:53,NUM6:54,NUM7:55,NUM8:56,B:66,E:69,I:73,J:74,K:75,L:76,R:82,S:83,U:85,V:86,Y:89,Z:90,SLASH:191,LEFTBRACKET:219,BACKSLASH:220,RIGHTBRACKET:221};return{isEdit:function(t){return d.contains([8,9,13,32],t)},isMove:function(t){return d.contains([37,38,39,40],t)},nameFromCode:u.invertObject(t),code:t}}(),b=function(t){var e=[],i=-1,n=t[0],o=function(){var e=f.create(),i={s:{path:[],offset:0},e:{path:[],offset:0}};return{contents:t.html(),bookmark:e?e.bookmark(n):i}},a=function(e){null!==e.contents&&t.html(e.contents),null!==e.bookmark&&f.createFromBookmark(n,e.bookmark).select()};this.undo=function(){t.html()!==e[i].contents&&this.recordUndo(),0<i&&(i--,a(e[i]))},this.redo=function(){e.length-1>i&&(i++,a(e[i]))},this.recordUndo=function(){i++,e.length>i&&(e=e.slice(0,i)),e.push(o())},this.recordUndo()},y=function(){var e=function(e,i){if(l.jqueryVersion<1.9){var n={};return t.each(i,function(t,i){n[i]=e.css(i)}),n}return e.css.call(e,i)};this.fromNode=function(t){var i=["font-family","font-size","text-align","list-style-type","line-height"],n=e(t,i)||{};return n["font-size"]=parseInt(n["font-size"],10),n},this.stylePara=function(e,i){t.each(e.nodes(p.isPara,{includeAncestor:!0}),function(e,n){t(n).css(i)})},this.styleNodes=function(e,i){e=e.splitText();var n=i&&i.nodeName||"SPAN",o=!(!i||!i.expandClosestSibling),a=!(!i||!i.onlyPartialContains);if(e.isCollapsed())return[e.insertNode(p.create(n))];var s=p.makePredByNodeName(n),r=e.nodes(p.isText,{fullyContains:!0}).map(function(t){return p.singleChildAncestor(t,s)||p.wrap(t,n)});if(o){if(a){var l=e.nodes();s=u.and(s,function(t){return d.contains(l,t)})}return r.map(function(e){var i=p.withClosestSiblings(e,s),n=d.head(i),o=d.tail(i);return t.each(o,function(t,e){p.appendChildNodes(n,e.childNodes),p.remove(e)}),d.head(i)})}return r},this.current=function(e){var i=t(p.isText(e.sc)?e.sc.parentNode:e.sc),n=this.fromNode(i);if(n["font-bold"]=document.queryCommandState("bold")?"bold":"normal",n["font-italic"]=document.queryCommandState("italic")?"italic":"normal",n["font-underline"]=document.queryCommandState("underline")?"underline":"normal",n["font-strikethrough"]=document.queryCommandState("strikeThrough")?"strikethrough":"normal",n["font-superscript"]=document.queryCommandState("superscript")?"superscript":"normal",n["font-subscript"]=document.queryCommandState("subscript")?"subscript":"normal",e.isOnList()){var o=["circle","disc","disc-leading-zero","square"],a=t.inArray(n["list-style-type"],o)>-1;n["list-style"]=a?"unordered":"ordered"}else n["list-style"]="none";var s=p.ancestor(e.sc,p.isPara);if(s&&s.style["line-height"])n["line-height"]=s.style.lineHeight;else{var r=parseInt(n["line-height"],10)/parseInt(n["font-size"],10);n["line-height"]=r.toFixed(1)}return n.anchor=e.isOnAnchor()&&p.ancestor(e.sc,p.isAnchor),n.ancestors=p.listAncestor(e.sc,p.isEditable),n.range=e,n}},w=function(){this.insertOrderedList=function(){this.toggleList("OL")},this.insertUnorderedList=function(){this.toggleList("UL")},this.indent=function(){var e=this,i=f.create().wrapBodyInlineWithPara(),n=i.nodes(p.isPara,{includeAncestor:!0}),o=d.clusterBy(n,u.peq2("parentNode"));t.each(o,function(i,n){var o=d.head(n);p.isLi(o)?e.wrapList(n,o.parentNode.nodeName):t.each(n,function(e,i){t(i).css("marginLeft",function(t,e){return(parseInt(e,10)||0)+25})})}),i.select()},this.outdent=function(){var e=this,i=f.create().wrapBodyInlineWithPara(),n=i.nodes(p.isPara,{includeAncestor:!0}),o=d.clusterBy(n,u.peq2("parentNode"));t.each(o,function(i,n){var o=d.head(n);p.isLi(o)?e.releaseList([n]):t.each(n,function(e,i){t(i).css("marginLeft",function(t,e){return e=parseInt(e,10)||0,e>25?e-25:""})})}),i.select()},this.toggleList=function(e){var i=this,n=f.create().wrapBodyInlineWithPara(),o=n.nodes(p.isPara,{includeAncestor:!0}),a=n.paraBookmark(o),s=d.clusterBy(o,u.peq2("parentNode"));if(d.find(o,p.isPurePara)){var r=[];t.each(s,function(t,n){r=r.concat(i.wrapList(n,e))}),o=r}else{var l=n.nodes(p.isList,{includeAncestor:!0}).filter(function(i){return!t.nodeName(i,e)});l.length?t.each(l,function(t,i){p.replace(i,e)}):o=this.releaseList(s,!0)}f.createFromParaBookmark(a,o).select()},this.wrapList=function(t,e){var i=d.head(t),n=d.last(t),o=p.isList(i.previousSibling)&&i.previousSibling,a=p.isList(n.nextSibling)&&n.nextSibling,s=o||p.insertAfter(p.create(e||"UL"),n);return t=t.map(function(t){return p.isPurePara(t)?p.replace(t,"LI"):t}),p.appendChildNodes(s,t),a&&(p.appendChildNodes(s,d.from(a.childNodes)),p.remove(a)),t},this.releaseList=function(e,i){var n=[];return t.each(e,function(e,o){var a=d.head(o),s=d.last(o),r=i?p.lastAncestor(a,p.isList):a.parentNode,l=r.childNodes.length>1?p.splitTree(r,{node:s.parentNode,offset:p.position(s)+1},{isSkipPaddingBlankHTML:!0}):null,u=p.splitTree(r,{node:a.parentNode,offset:p.position(a)},{isSkipPaddingBlankHTML:!0});o=i?p.listDescendant(u,p.isLi):d.from(u.childNodes).filter(p.isLi),!i&&p.isList(r.parentNode)||(o=o.map(function(t){return p.replace(t,"P")})),t.each(d.from(o).reverse(),function(t,e){p.insertAfter(e,r)});var c=d.compact([r,u,l]);t.each(c,function(e,i){var n=[i].concat(p.listDescendant(i,p.isList));t.each(n.reverse(),function(t,e){p.nodeLength(e)||p.remove(e,!0)})}),n=n.concat(o)}),n}},k=function(){var e=new w;this.insertTab=function(t,e,i){var n=p.createText(new Array(i+1).join(p.NBSP_CHAR));e=e.deleteContents(),e.insertNode(n,!0),e=f.create(n,i),e.select()},this.insertParagraph=function(){var i=f.create();i=i.deleteContents(),i=i.wrapBodyInlineWithPara();var n,o=p.ancestor(i.sc,p.isPara);if(o){if(p.isEmpty(o)&&p.isLi(o))return void e.toggleList(o.parentNode.nodeName);n=p.splitTree(o,i.getStartPoint());var a=p.listDescendant(o,p.isEmptyAnchor);a=a.concat(p.listDescendant(n,p.isEmptyAnchor)),t.each(a,function(t,e){p.remove(e)})}else{var s=i.sc.childNodes[i.so];n=t(p.emptyPara)[0],s?i.sc.insertBefore(n,s):i.sc.appendChild(n)}f.create(n,0).normalize().select()}},C=function(){this.tab=function(t,e){var i=p.ancestor(t.commonAncestor(),p.isCell),n=p.ancestor(i,p.isTable),o=p.listDescendant(n,p.isCell),a=d[e?"prev":"next"](o,i);
a&&f.create(a,0).select()},this.createTable=function(e,i){for(var n,o=[],a=0;a<e;a++)o.push("<td>"+p.blank+"</td>");n=o.join("");for(var s,r=[],l=0;l<i;l++)r.push("<tr>"+n+"</tr>");return s=r.join(""),t('<table class="table table-bordered">'+s+"</table>")[0]}},x="bogus",D=function(e){var i=this,n=new y,o=new C,a=new k,s=new w;this.createRange=function(t){return this.focus(t),f.create()},this.saveRange=function(t,e){this.focus(t),t.data("range",f.create()),e&&f.create().collapse().select()},this.saveNode=function(t){for(var e=[],i=0,n=t[0].childNodes.length;i<n;i++)e.push(t[0].childNodes[i]);t.data("childNodes",e)},this.restoreRange=function(t){var e=t.data("range");e&&(e.select(),this.focus(t))},this.restoreNode=function(t){t.html("");for(var e=t.data("childNodes"),i=0,n=e.length;i<n;i++)t[0].appendChild(e[i])},this.currentStyle=function(t){var e=f.create(),i=e&&e.isOnEditable()?n.current(e.normalize()):{};return p.isImg(t)&&(i.image=t),i},this.styleFromNode=function(t){return n.fromNode(t)};var r=function(t){var i=p.makeLayoutInfo(t).holder();e.bindCustomEvent(i,t.data("callbacks"),"before.command")(t.html(),t)},u=function(t){var i=p.makeLayoutInfo(t).holder();e.bindCustomEvent(i,t.data("callbacks"),"change")(t.html(),t)};this.undo=function(t){r(t),t.data("NoteHistory").undo(),u(t)},this.redo=function(t){r(t),t.data("NoteHistory").redo(),u(t)};for(var c=this.beforeCommand=function(t){r(t),i.focus(t)},h=this.afterCommand=function(t,e){t.data("NoteHistory").recordUndo(),e||u(t)},m=["bold","italic","underline","strikethrough","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","formatBlock","removeFormat","backColor","foreColor","fontName"],g=0,b=m.length;g<b;g++)this[m[g]]=function(t){return function(e,i){c(e),document.execCommand(t,!1,i),h(e,!0)}}(m[g]);this.tab=function(t,e){var i=this.createRange(t);i.isCollapsed()&&i.isOnCell()?o.tab(i):(c(t),a.insertTab(t,i,e.tabsize),h(t))},this.untab=function(t){var e=this.createRange(t);e.isCollapsed()&&e.isOnCell()&&o.tab(e,!0)},this.insertParagraph=function(t){c(t),a.insertParagraph(t),h(t)},this.insertOrderedList=function(t){c(t),s.insertOrderedList(t),h(t)},this.insertUnorderedList=function(t){c(t),s.insertUnorderedList(t),h(t)},this.indent=function(t){c(t),s.indent(t),h(t)},this.outdent=function(t){c(t),s.outdent(t),h(t)},this.insertImage=function(t,i,n){v.createImage(i,n).then(function(e){c(t),e.css({display:"",width:Math.min(t.width(),e.width())}),f.create().insertNode(e[0]),f.createFromNodeAfter(e[0]).select(),h(t)}).fail(function(){var i=p.makeLayoutInfo(t).holder();e.bindCustomEvent(i,t.data("callbacks"),"image.upload.error")()})},this.insertNode=function(t,e){c(t),f.create().insertNode(e),f.createFromNodeAfter(e).select(),h(t)},this.insertText=function(t,e){c(t);var i=f.create().insertNode(p.createText(e));f.create(i,p.nodeLength(i)).select(),h(t)},this.pasteHTML=function(t,e){c(t);var i=f.create().pasteHTML(e);f.createFromNodeAfter(d.last(i)).select(),h(t)},this.formatBlock=function(t,e){c(t),e=l.isMSIE?"<"+e+">":e,document.execCommand("FormatBlock",!1,e),h(t)},this.formatPara=function(t){c(t),this.formatBlock(t,"P"),h(t)};for(var g=1;g<=6;g++)this["formatH"+g]=function(t){return function(e){this.formatBlock(e,"H"+t)}}(g);this.fontSize=function(e,i){var o=f.create();if(o.isCollapsed()){var a=n.styleNodes(o),s=d.head(a);t(a).css({"font-size":i+"px"}),s&&!p.nodeLength(s)&&(s.innerHTML=p.ZERO_WIDTH_NBSP_CHAR,f.createFromNodeAfter(s.firstChild).select(),e.data(x,s))}else c(e),t(n.styleNodes(o)).css({"font-size":i+"px"}),h(e)},this.insertHorizontalRule=function(e){c(e);var i=f.create(),n=i.insertNode(t("<HR/>")[0]);n.nextSibling&&f.create(n.nextSibling,0).normalize().select(),h(e)},this.removeBogus=function(t){var e=t.data(x);if(e){var i=d.find(d.from(e.childNodes),p.isText),n=i.nodeValue.indexOf(p.ZERO_WIDTH_NBSP_CHAR);n!==-1&&i.deleteData(n,1),p.isEmpty(e)&&p.remove(e),t.removeData(x)}},this.lineHeight=function(t,e){c(t),n.stylePara(f.create(),{lineHeight:e}),h(t)},this.unlink=function(t){var e=this.createRange(t);if(e.isOnAnchor()){var i=p.ancestor(e.sc,p.isAnchor);e=f.createFromNode(i),e.select(),c(t),document.execCommand("unlink"),h(t)}},this.createLink=function(e,i,o){var a=i.url,s=i.text,r=i.isNewWindow,l=i.range||this.createRange(e),u=l.toString()!==s;o=o||p.makeLayoutInfo(e).editor().data("options"),c(e),o.onCreateLink&&(a=o.onCreateLink(a));var m=[];if(u){var v=l.insertNode(t("<A>"+s+"</A>")[0]);m.push(v)}else m=n.styleNodes(l,{nodeName:"A",expandClosestSibling:!0,onlyPartialContains:!0});t.each(m,function(e,i){t(i).attr("href",a),r?t(i).attr("target","_blank"):t(i).removeAttr("target")});var g=f.createFromNodeBefore(d.head(m)),b=g.getStartPoint(),y=f.createFromNodeAfter(d.last(m)),w=y.getEndPoint();f.create(b.node,b.offset,w.node,w.offset).select(),h(e)},this.getLinkInfo=function(e){this.focus(e);var i=f.create().expand(p.isAnchor),n=t(d.head(i.nodes(p.isAnchor)));return{range:i,text:i.toString(),isNewWindow:!!n.length&&"_blank"===n.attr("target"),url:n.length?n.attr("href"):""}},this.color=function(t,e){var i=JSON.parse(e),n=i.foreColor,o=i.backColor;c(t),n&&document.execCommand("foreColor",!1,n),o&&document.execCommand("backColor",!1,o),h(t)},this.insertTable=function(t,e){var i=e.split("x");c(t);var n=f.create().deleteContents();n.insertNode(o.createTable(i[0],i[1])),h(t)},this.floatMe=function(t,e,i){c(t),i.removeClass("pull-left pull-right"),e&&"none"!==e&&i.addClass("pull-"+e),i.css("float",e),h(t)},this.imageShape=function(t,e,i){c(t),i.removeClass("img-rounded img-circle img-thumbnail"),e&&i.addClass(e),h(t)},this.resize=function(t,e,i){c(t),i.css({width:100*e+"%",height:""}),h(t)},this.resizeTo=function(t,e,i){var n;if(i){var o=t.y/t.x,a=e.data("ratio");n={width:a>o?t.x:t.y/a,height:a>o?t.x*a:t.y}}else n={width:t.x,height:t.y};e.css(n)},this.removeMedia=function(i,n,o){c(i),o.detach(),e.bindCustomEvent(t(),i.data("callbacks"),"media.delete")(o,i),h(i)},this.focus=function(t){t.focus(),l.isFF&&!f.create().isOnEditable()&&f.createFromNode(t[0]).normalize().collapse().select()},this.isEmpty=function(t){return p.isEmpty(t[0])||p.emptyPara===t.html()}},T=function(){this.update=function(e,i){var n=function(e,i){e.find(".dropdown-menu li a").each(function(){var e=t(this).data("value")+""==i+"";this.className=e?"checked":""})},o=function(t,i){var n=e.find(t);n.toggleClass("active",i())};if(i.image){var a=t(i.image);o('button[data-event="imageShape"][data-value="img-rounded"]',function(){return a.hasClass("img-rounded")}),o('button[data-event="imageShape"][data-value="img-circle"]',function(){return a.hasClass("img-circle")}),o('button[data-event="imageShape"][data-value="img-thumbnail"]',function(){return a.hasClass("img-thumbnail")}),o('button[data-event="imageShape"]:not([data-value])',function(){return!a.is(".img-rounded, .img-circle, .img-thumbnail")});var s=a.css("float");o('button[data-event="floatMe"][data-value="left"]',function(){return"left"===s}),o('button[data-event="floatMe"][data-value="right"]',function(){return"right"===s}),o('button[data-event="floatMe"][data-value="none"]',function(){return"left"!==s&&"right"!==s});var r=a.attr("style");return o('button[data-event="resize"][data-value="1"]',function(){return!!/(^|\s)(max-)?width\s*:\s*100%/.test(r)}),o('button[data-event="resize"][data-value="0.5"]',function(){return!!/(^|\s)(max-)?width\s*:\s*50%/.test(r)}),void o('button[data-event="resize"][data-value="0.25"]',function(){return!!/(^|\s)(max-)?width\s*:\s*25%/.test(r)})}var u=e.find(".note-fontname");if(u.length){var d=i["font-family"];if(d){for(var c=d.split(","),h=0,p=c.length;h<p&&(d=c[h].replace(/[\'\"]/g,"").replace(/\s+$/,"").replace(/^\s+/,""),!l.isFontInstalled(d));h++);u.find(".note-current-fontname").text(d),n(u,d)}}var f=e.find(".note-fontsize");f.find(".note-current-fontsize").text(i["font-size"]),n(f,parseFloat(i["font-size"]));var m=e.find(".note-height");n(m,parseFloat(i["line-height"])),o('button[data-event="bold"]',function(){return"bold"===i["font-bold"]}),o('button[data-event="italic"]',function(){return"italic"===i["font-italic"]}),o('button[data-event="underline"]',function(){return"underline"===i["font-underline"]}),o('button[data-event="strikethrough"]',function(){return"strikethrough"===i["font-strikethrough"]}),o('button[data-event="superscript"]',function(){return"superscript"===i["font-superscript"]}),o('button[data-event="subscript"]',function(){return"subscript"===i["font-subscript"]}),o('button[data-event="justifyLeft"]',function(){return"left"===i["text-align"]||"start"===i["text-align"]}),o('button[data-event="justifyCenter"]',function(){return"center"===i["text-align"]}),o('button[data-event="justifyRight"]',function(){return"right"===i["text-align"]}),o('button[data-event="justifyFull"]',function(){return"justify"===i["text-align"]}),o('button[data-event="insertUnorderedList"]',function(){return"unordered"===i["list-style"]}),o('button[data-event="insertOrderedList"]',function(){return"ordered"===i["list-style"]})},this.updateRecentColor=function(e,i,n){var o=t(e).closest(".note-color"),a=o.find(".note-recent-color"),s=JSON.parse(a.attr("data-value"));s[i]=n,a.attr("data-value",JSON.stringify(s));var r="backColor"===i?"background-color":"color";a.find("i").css(r,n)}},M=function(){var t=new T;this.update=function(e,i){t.update(e,i)},this.updateRecentColor=function(e,i,n){t.updateRecentColor(e,i,n)},this.activate=function(t){t.find("button").not('button[data-event="codeview"]').removeClass("disabled")},this.deactivate=function(t){t.find("button").not('button[data-event="codeview"]').addClass("disabled")},this.updateFullscreen=function(t,e){var i=t.find('button[data-event="fullscreen"]');i.toggleClass("active",e)},this.updateCodeview=function(t,e){var i=t.find('button[data-event="codeview"]');i.toggleClass("active",e),e?this.deactivate(t):this.activate(t)},this.get=function(t,e){var i=p.makeLayoutInfo(t).toolbar();return i.find("[data-name="+e+"]")},this.setButtonState=function(t,e,i){i=i!==!1;var n=this.get(t,e);n.toggleClass("active",i)}},S=24,N=function(){var e=t(document);this.attach=function(t,e){e.disableResizeEditor||t.statusbar().on("mousedown",i)};var i=function(t){t.preventDefault(),t.stopPropagation();var i=p.makeLayoutInfo(t.target).editable(),n=i.offset().top-e.scrollTop(),o=p.makeLayoutInfo(t.currentTarget||t.target),a=o.editor().data("options");e.on("mousemove",function(t){var e=t.clientY-(n+S);e=a.minHeight>0?Math.max(e,a.minHeight):e,e=a.maxHeight>0?Math.min(e,a.maxHeight):e,i.height(e)}).one("mouseup",function(){e.off("mousemove")})}},F=function(){var e=new T,i=function(e,i){var n=i&&i.isAirMode,o=i&&i.isLeftTop,a=t(e),s=n?a.offset():a.position(),r=o?0:a.outerHeight(!0);return{left:s.left,top:s.top+r}},n=function(t,e){t.css({display:"block",left:e.left,top:e.top})},o=20;this.update=function(a,s,r){e.update(a,s);var l=a.find(".note-link-popover");if(s.anchor){var c=l.find("a"),h=t(s.anchor).attr("href"),p=t(s.anchor).attr("target");c.attr("href",h).html(h),p?c.attr("target","_blank"):c.removeAttr("target"),n(l,i(s.anchor,{isAirMode:r}))}else l.hide();var f=a.find(".note-image-popover");s.image?n(f,i(s.image,{isAirMode:r,isLeftTop:!0})):f.hide();var m=a.find(".note-air-popover");if(r&&s.range&&!s.range.isCollapsed()){var v=d.last(s.range.getClientRects());if(v){var g=u.rect2bnd(v);n(m,{left:Math.max(g.left+g.width/2-o,0),top:g.top+g.height})}}else m.hide()},this.updateRecentColor=function(t,e,i){t.updateRecentColor(t,e,i)},this.hide=function(t){t.children().hide()}},$=function(e){var i=t(document),n=function(n){if(p.isControlSizing(n.target)){n.preventDefault(),n.stopPropagation();var o=p.makeLayoutInfo(n.target),a=o.handle(),s=o.popover(),r=o.editable(),l=o.editor(),u=a.find(".note-control-selection").data("target"),d=t(u),c=d.offset(),h=i.scrollTop(),f=l.data("options").airMode;i.on("mousemove",function(t){e.invoke("editor.resizeTo",{x:t.clientX-c.left,y:t.clientY-(c.top-h)},d,!t.shiftKey),e.invoke("handle.update",a,{image:u},f),e.invoke("popover.update",s,{image:u},f)}).one("mouseup",function(){i.off("mousemove"),e.invoke("editor.afterCommand",r)}),d.data("ratio")||d.data("ratio",d.height()/d.width())}};this.attach=function(t){t.handle().on("mousedown",n)},this.update=function(e,i,n){var o=e.find(".note-control-selection");if(i.image){var a=t(i.image),s=n?a.offset():a.position(),r={w:a.outerWidth(!0),h:a.outerHeight(!0)};o.css({display:"block",left:s.left,top:s.top,width:r.w,height:r.h}).data("target",i.image);var l=r.w+"x"+r.h;o.find(".note-control-selection-info").text(l)}else o.hide()},this.hide=function(t){t.children().hide()}},P=function(e){var i=t(window),n=t("html, body");this.toggle=function(t){var o=t.editor(),a=t.toolbar(),s=t.editable(),r=t.codable(),l=function(t){s.css("height",t.h),r.css("height",t.h),r.data("cmeditor")&&r.data("cmeditor").setsize(null,t.h)};o.toggleClass("fullscreen");var u=o.hasClass("fullscreen");u?(s.data("orgheight",s.css("height")),i.on("resize",function(){l({h:i.height()-a.outerHeight()})}).trigger("resize"),n.css("overflow","hidden")):(i.off("resize"),l({h:s.data("orgheight")}),n.css("overflow","visible")),e.invoke("toolbar.updateFullscreen",a,u)}};l.hasCodeMirror&&(l.isSupportAmd?require(["CodeMirror"],function(t){r=t}):r=window.CodeMirror);var E=function(t){this.sync=function(e){var i=t.invoke("codeview.isActivated",e);i&&l.hasCodeMirror&&e.codable().data("cmEditor").save()},this.isActivated=function(t){var e=t.editor();return e.hasClass("codeview")},this.toggle=function(t){this.isActivated(t)?this.deactivate(t):this.activate(t)},this.activate=function(e){var i=e.editor(),n=e.toolbar(),o=e.editable(),a=e.codable(),s=e.popover(),u=e.handle(),d=i.data("options");if(a.val(p.html(o,d.prettifyHtml)),a.height(o.height()),t.invoke("toolbar.updateCodeview",n,!0),t.invoke("popover.hide",s),t.invoke("handle.hide",u),i.addClass("codeview"),a.focus(),l.hasCodeMirror){var c=r.fromTextArea(a[0],d.codemirror);if(d.codemirror.tern){var h=new r.TernServer(d.codemirror.tern);c.ternServer=h,c.on("cursorActivity",function(t){h.updateArgHints(t)})}c.setSize(null,o.outerHeight()),a.data("cmEditor",c)}},this.deactivate=function(e){var i=e.holder(),n=e.editor(),o=e.toolbar(),a=e.editable(),s=e.codable(),r=n.data("options");if(l.hasCodeMirror){var u=s.data("cmEditor");s.val(u.getValue()),u.toTextArea()}var d=p.value(s,r.prettifyHtml)||p.emptyPara,c=a.html()!==d;a.html(d),a.height(r.height?s.height():"auto"),n.removeClass("codeview"),c&&t.bindCustomEvent(i,a.data("callbacks"),"change")(a.html(),a),a.focus(),t.invoke("toolbar.updateCodeview",o,!1)}},I=function(e){var i=t(document);this.attach=function(t,e){e.airMode||e.disableDragAndDrop?i.on("drop",function(t){t.preventDefault()}):this.attachDragAndDropEvent(t,e)},this.attachDragAndDropEvent=function(n,o){var a=t(),s=n.editor(),r=n.dropzone(),l=r.find(".note-dropzone-message");i.on("dragenter",function(t){var i=e.invoke("codeview.isActivated",n),u=s.width()>0&&s.height()>0;i||a.length||!u||(s.addClass("dragover"),r.width(s.width()),r.height(s.height()),l.text(o.langInfo.image.dragImageHere)),a=a.add(t.target)}).on("dragleave",function(t){a=a.not(t.target),a.length||s.removeClass("dragover")}).on("drop",function(){a=t(),s.removeClass("dragover")}),r.on("dragenter",function(){r.addClass("hover"),l.text(o.langInfo.image.dropImage)}).on("dragleave",function(){r.removeClass("hover"),l.text(o.langInfo.image.dragImageHere)}),r.on("drop",function(i){var n=i.originalEvent.dataTransfer,o=p.makeLayoutInfo(i.currentTarget||i.target);if(n&&n.files&&n.files.length)i.preventDefault(),o.editable().focus(),e.insertImages(o,n.files);else for(var a=function(){o.holder().summernote("insertNode",this)},s=0,r=n.types.length;s<r;s++){var l=n.types[s],u=n.getData(l);l.toLowerCase().indexOf("text")>-1?o.holder().summernote("pasteHTML",u):t(u).each(a)}}).on("dragover",!1)}},A=function(e){var i;this.attach=function(a){l.isMSIE&&l.browserVersion>10||l.isFF?(i=t("<div />").attr("contenteditable",!0).css({position:"absolute",left:-1e5,opacity:0}),a.editable().on("keydown",function(t){t.ctrlKey&&t.keyCode===g.code.V&&(e.invoke("saveRange",a.editable()),i.focus(),setTimeout(function(){n(a)},0))}),a.editable().before(i)):a.editable().on("paste",o)};var n=function(n){var o=n.editable(),a=i[0].firstChild;if(p.isImg(a)){for(var s=a.src,r=atob(s.split(",")[1]),l=new Uint8Array(r.length),u=0;u<r.length;u++)l[u]=r.charCodeAt(u);var d=new Blob([l],{type:"image/png"});d.name="clipboard.png",e.invoke("restoreRange",o),e.invoke("focus",o),e.insertImages(n,[d])}else{var c=t("<div />").html(i.html()).html();e.invoke("restoreRange",o),e.invoke("focus",o),c&&e.invoke("pasteHTML",o,c)}i.empty()},o=function(t){var i=t.originalEvent.clipboardData,n=p.makeLayoutInfo(t.currentTarget||t.target),o=n.editable();if(i&&i.items&&i.items.length){var a=d.head(i.items);"file"===a.kind&&a.type.indexOf("image/")!==-1&&e.insertImages(n,[a.getAsFile()]),e.invoke("editor.afterCommand",o)}}},L=function(e){var i=function(t,e){t.toggleClass("disabled",!e),t.attr("disabled",!e)},n=function(t,e){t.on("keypress",function(t){t.keyCode===g.code.ENTER&&e.trigger("click")})};this.showLinkDialog=function(e,o,a){return t.Deferred(function(t){var e=o.find(".note-link-dialog"),s=e.find(".note-link-text"),r=e.find(".note-link-url"),l=e.find(".note-link-btn"),u=e.find("input[type=checkbox]");e.one("shown.bs.modal",function(){s.val(a.text),s.on("input",function(){i(l,s.val()&&r.val()),a.text=s.val()}),a.url||(a.url=a.text||"http://",i(l,a.text)),r.on("input",function(){i(l,s.val()&&r.val()),a.text||s.val(r.val())}).val(a.url).trigger("focus").trigger("select"),n(r,l),n(s,l),u.prop("checked",a.isNewWindow),l.one("click",function(i){i.preventDefault(),t.resolve({range:a.range,url:r.val(),text:s.val(),isNewWindow:u.is(":checked")}),e.modal("hide")})}).one("hidden.bs.modal",function(){s.off("input keypress"),r.off("input keypress"),l.off("click"),"pending"===t.state()&&t.reject()}).modal("show")}).promise()},this.show=function(t){var i=t.editor(),n=t.dialog(),o=t.editable(),a=t.popover(),s=e.invoke("editor.getLinkInfo",o),r=i.data("options");e.invoke("editor.saveRange",o),this.showLinkDialog(o,n,s).then(function(t){e.invoke("editor.restoreRange",o),e.invoke("editor.createLink",o,t,r),e.invoke("popover.hide",a)}).fail(function(){e.invoke("editor.restoreRange",o)})}},U=function(e){var i=function(t,e){t.toggleClass("disabled",!e),t.attr("disabled",!e)},n=function(t,e){t.on("keypress",function(t){t.keyCode===g.code.ENTER&&e.trigger("click")})};this.show=function(t){var i=t.dialog(),n=t.editable();e.invoke("editor.saveRange",n),this.showImageDialog(n,i).then(function(i){e.invoke("editor.restoreRange",n),"string"==typeof i?e.invoke("editor.insertImage",n,i):e.insertImages(t,i)}).fail(function(){e.invoke("editor.restoreRange",n)})},this.showImageDialog=function(e,o){return t.Deferred(function(t){var e=o.find(".note-image-dialog"),a=o.find(".note-image-input"),s=o.find(".note-image-url"),r=o.find(".note-image-btn");e.one("shown.bs.modal",function(){a.replaceWith(a.clone().on("change",function(){t.resolve(this.files||this.value),e.modal("hide")}).val("")),r.click(function(i){i.preventDefault(),t.resolve(s.val()),e.modal("hide")}),s.on("keyup paste",function(t){var e;e="paste"===t.type?t.originalEvent.clipboardData.getData("text"):s.val(),i(r,e)}).val("").trigger("focus"),n(s,r)}).one("hidden.bs.modal",function(){a.off("change"),s.off("keyup paste keypress"),r.off("click"),"pending"===t.state()&&t.reject()}).modal("show")})}},R=function(e){this.showHelpDialog=function(e,i){return t.Deferred(function(t){var e=i.find(".note-help-dialog");e.one("hidden.bs.modal",function(){t.resolve()}).modal("show")}).promise()},this.show=function(t){var i=t.dialog(),n=t.editable();e.invoke("editor.saveRange",n,!0),this.showHelpDialog(n,i).then(function(){e.invoke("editor.restoreRange",n)})}},H=function(){var e=this,i=this.modules={editor:new D(this),toolbar:new M(this),statusbar:new N(this),popover:new F(this),handle:new $(this),fullscreen:new P(this),codeview:new E(this),dragAndDrop:new I(this),clipboard:new A(this),linkDialog:new L(this),imageDialog:new U(this),helpDialog:new R(this)};this.invoke=function(){var t=d.head(d.from(arguments)),e=d.tail(d.from(arguments)),i=t.split("."),n=i.length>1,o=n&&d.head(i),a=n?d.last(i):d.head(i),s=this.getModule(o),r=s[a];return r&&r.apply(s,e)},this.getModule=function(t){return this.modules[t]||this.modules.editor};var n=this.bindCustomEvent=function(t,e,i){return function(){var n=e[u.namespaceToCamel(i,"on")];return n&&n.apply(t[0],arguments),t.trigger("summernote."+i,arguments)}};this.insertImages=function(e,o){var a=e.editor(),s=e.editable(),r=e.holder(),l=s.data("callbacks"),u=a.data("options");l.onImageUpload?n(r,l,"image.upload")(o):t.each(o,function(t,e){var o=e.name;u.maximumImageFileSize&&u.maximumImageFileSize<e.size?n(r,l,"image.upload.error")(u.langInfo.image.maximumFileSizeError):v.readFileAsDataURL(e).then(function(t){i.editor.insertImage(s,t,o)}).fail(function(){n(r,l,"image.upload.error")(u.langInfo.image.maximumFileSizeError)})})};var o={showLinkDialog:function(t){i.linkDialog.show(t)},showImageDialog:function(t){i.imageDialog.show(t)},showHelpDialog:function(t){i.helpDialog.show(t)},fullscreen:function(t){i.fullscreen.toggle(t)},codeview:function(t){i.codeview.toggle(t)}},a=function(t){p.isImg(t.target)&&t.preventDefault()},s=function(t){var e=p.makeLayoutInfo(t.currentTarget||t.target);i.editor.removeBogus(e.editable()),r(t)};this.updateStyleInfo=function(t,e){if(t){var n=e.editor().data("options").airMode;n||i.toolbar.update(e.toolbar(),t),i.popover.update(e.popover(),t,n),i.handle.update(e.handle(),t,n)}};var r=function(t){var n=t.target;setTimeout(function(){var t=p.makeLayoutInfo(n),o=i.editor.currentStyle(n);e.updateStyleInfo(o,t)},0)},c=function(t){var e=p.makeLayoutInfo(t.currentTarget||t.target);i.popover.hide(e.popover()),i.handle.hide(e.handle())},h=function(e){var i=t(e.target).closest("[data-event]");i.length&&e.preventDefault()},f=function(e){var n=t(e.target).closest("[data-event]");if(n.length){var a,s=n.attr("data-event"),l=n.attr("data-value"),u=n.attr("data-hide"),c=p.makeLayoutInfo(e.target);if(t.inArray(s,["resize","floatMe","removeMedia","imageShape"])!==-1){var h=c.handle().find(".note-control-selection");a=t(h.data("target"))}if(u&&n.parents(".popover").hide(),t.isFunction(t.summernote.pluginEvents[s]))t.summernote.pluginEvents[s](e,i.editor,c,l);else if(i.editor[s]){var f=c.editable();f.focus(),i.editor[s](f,l,a),e.preventDefault()}else o[s]&&(o[s].call(this,c),e.preventDefault());if(t.inArray(s,["backColor","foreColor"])!==-1){var m=c.editor().data("options",m),v=m.airMode?i.popover:i.toolbar;v.updateRecentColor(d.head(n),s,l)}r(e)}},m=18,y=function(e,i){var n,o=t(e.target.parentNode),a=o.next(),s=o.find(".note-dimension-picker-mousecatcher"),r=o.find(".note-dimension-picker-highlighted"),l=o.find(".note-dimension-picker-unhighlighted");if(void 0===e.offsetX){var u=t(e.target).offset();n={x:e.pageX-u.left,y:e.pageY-u.top}}else n={x:e.offsetX,y:e.offsetY};var d={c:Math.ceil(n.x/m)||1,r:Math.ceil(n.y/m)||1};r.css({width:d.c+"em",height:d.r+"em"}),s.attr("data-value",d.c+"x"+d.r),3<d.c&&d.c<i.insertTableMaxSize.col&&l.css({width:d.c+1+"em"}),3<d.r&&d.r<i.insertTableMaxSize.row&&l.css({height:d.r+1+"em"}),a.html(d.c+" x "+d.r)};this.bindKeyMap=function(e,n){var a=e.editor(),s=e.editable();s.on("keydown",function(r){var l=[];r.metaKey&&l.push("CMD"),r.ctrlKey&&!r.altKey&&l.push("CTRL"),r.shiftKey&&l.push("SHIFT");var u=g.nameFromCode[r.keyCode];u&&l.push(u);var d,c=l.join("+"),h=n[c];if(h){if(d=t.summernote.pluginEvents[c],t.isFunction(d)&&d(r,i.editor,e))return!1;d=t.summernote.pluginEvents[h],t.isFunction(d)?d(r,i.editor,e):i.editor[h]?(i.editor[h](s,a.data("options")),r.preventDefault()):o[h]&&(o[h].call(this,e),r.preventDefault())}else g.isEdit(r.keyCode)&&i.editor.afterCommand(s)})},this.attach=function(t,e){e.shortcuts&&this.bindKeyMap(t,e.keyMap[l.isMac?"mac":"pc"]),t.editable().on("mousedown",a),t.editable().on("keyup mouseup",s),t.editable().on("scroll",c),i.clipboard.attach(t,e),i.handle.attach(t,e),t.popover().on("click",f),t.popover().on("mousedown",h),i.dragAndDrop.attach(t,e),e.airMode||(t.toolbar().on("click",f),t.toolbar().on("mousedown",h),i.statusbar.attach(t,e));var n=e.airMode?t.popover():t.toolbar(),o=n.find(".note-dimension-picker-mousecatcher");o.css({width:e.insertTableMaxSize.col+"em",height:e.insertTableMaxSize.row+"em"}).on("mousemove",function(t){y(t,e)}),t.editor().data("options",e),l.isMSIE||setTimeout(function(){document.execCommand("styleWithCSS",0,e.styleWithSpan)},0);var r=new b(t.editable());t.editable().data("NoteHistory",r),t.editable().data("callbacks",{onInit:e.onInit,onFocus:e.onFocus,onBlur:e.onBlur,onKeydown:e.onKeydown,onKeyup:e.onKeyup,onMousedown:e.onMousedown,onEnter:e.onEnter,onPaste:e.onPaste,onBeforeCommand:e.onBeforeCommand,onChange:e.onChange,onImageUpload:e.onImageUpload,onImageUploadError:e.onImageUploadError,onMediaDelete:e.onMediaDelete,onToolbarClick:e.onToolbarClick});var u=i.editor.styleFromNode(t.editable());this.updateStyleInfo(u,t)},this.attachCustomEvent=function(e,i){var o=e.holder(),a=e.editable(),s=a.data("callbacks");a.focus(n(o,s,"focus")),a.blur(n(o,s,"blur")),a.keydown(function(t){t.keyCode===g.code.ENTER&&n(o,s,"enter").call(this,t),n(o,s,"keydown").call(this,t)}),a.keyup(n(o,s,"keyup")),a.on("mousedown",n(o,s,"mousedown")),a.on("mouseup",n(o,s,"mouseup")),a.on("scroll",n(o,s,"scroll")),a.on("paste",n(o,s,"paste"));var r=l.isMSIE?"DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted":"input";a.on(r,function(){n(o,s,"change")(a.html(),a)}),i.airMode||(e.toolbar().click(n(o,s,"toolbar.click")),e.popover().click(n(o,s,"popover.click"))),p.isTextarea(d.head(o))&&o.closest("form").submit(function(t){e.holder().val(e.holder().code()),n(o,s,"submit").call(this,t,o.code())}),p.isTextarea(d.head(o))&&i.textareaAutoSync&&o.on("summernote.change",function(){e.holder().val(e.holder().code())}),n(o,s,"init")(e);for(var u=0,c=t.summernote.plugins.length;u<c;u++)t.isFunction(t.summernote.plugins[u].init)&&t.summernote.plugins[u].init(e)},this.detach=function(t,e){t.holder().off(),t.editable().off(),t.popover().off(),t.handle().off(),t.dialog().off(),e.airMode||(t.dropzone().off(),t.toolbar().off(),t.statusbar().off())}},O=function(){var e=function(t,e){var i=e.event,n=e.value,o=e.title,a=e.className,s=e.dropdown,r=e.hide;return(s?'<div class="btn-group'+(a?" "+a:"")+'">':"")+'<button type="button" class="btn btn-default btn-sm'+(!s&&a?" "+a:"")+(s?" dropdown-toggle":"")+'"'+(s?' data-toggle="dropdown"':"")+(o?' title="'+o+'"':"")+(i?' data-event="'+i+'"':"")+(n?" data-value='"+n+"'":"")+(r?" data-hide='"+r+"'":"")+' tabindex="-1">'+t+(s?' <span class="caret"></span>':"")+"</button>"+(s||"")+(s?"</div>":"")},i=function(t,i){var n='<i class="'+t+'"></i>';return e(n,i)},n=function(e,i){var n=t('<div class="'+e+' popover bottom in" style="display: none;"><div class="arrow"></div><div class="popover-content"></div></div>');return n.find(".popover-content").append(i),n},o=function(t,e,i,n){return'<div class="'+t+' modal" aria-hidden="false"><div class="modal-dialog"><div class="modal-content">'+(e?'<div class="modal-header"><button type="button" class="close" aria-hidden="true" tabindex="-1">&times;</button><h4 class="modal-title">'+e+"</h4></div>":"")+'<div class="modal-body">'+i+"</div>"+(n?'<div class="modal-footer">'+n+"</div>":"")+"</div></div></div>"},a=function(t,e,i){var n="dropdown-menu"+(e?" "+e:"");return i=i||"ul",t instanceof Array&&(t=t.join("")),"<"+i+' class="'+n+'">'+t+"</"+i+">"},s={picture:function(t,e){return i(e.iconPrefix+e.icons.image.image,{event:"showImageDialog",title:t.image.image,hide:!0})},link:function(t,e){return i(e.iconPrefix+e.icons.link.link,{event:"showLinkDialog",title:t.link.link,hide:!0})},table:function(t,e){var n=['<div class="note-dimension-picker">','<div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"></div>','<div class="note-dimension-picker-highlighted"></div>','<div class="note-dimension-picker-unhighlighted"></div>',"</div>",'<div class="note-dimension-display"> 1 x 1 </div>'];return i(e.iconPrefix+e.icons.table.table,{title:t.table.table,dropdown:a(n,"note-table")})},style:function(t,e){var n=e.styleTags.reduce(function(e,i){var n=t.style["p"===i?"normal":i];return e+'<li><a data-event="formatBlock" href="#" data-value="'+i+'">'+("p"===i||"pre"===i?n:"<"+i+">"+n+"</"+i+">")+"</a></li>"},"");return i(e.iconPrefix+e.icons.style.style,{title:t.style.style,dropdown:a(n)})},fontname:function(t,i){var n=[],o=i.fontNames.reduce(function(t,e){return l.isFontInstalled(e)||d.contains(i.fontNamesIgnoreCheck,e)?(n.push(e),t+'<li><a data-event="fontName" href="#" data-value="'+e+'" style="font-family:\''+e+'\'"><i class="'+i.iconPrefix+i.icons.misc.check+'"></i> '+e+"</a></li>"):t},""),s=l.isFontInstalled(i.defaultFontName),r=s?i.defaultFontName:n[0],u='<span class="note-current-fontname">'+r+"</span>";return e(u,{title:t.font.name,className:"note-fontname",dropdown:a(o,"note-check")})},fontsize:function(t,i){var n=i.fontSizes.reduce(function(t,e){return t+'<li><a data-event="fontSize" href="#" data-value="'+e+'"><i class="'+i.iconPrefix+i.icons.misc.check+'"></i> '+e+"</a></li>"},""),o='<span class="note-current-fontsize">11</span>';return e(o,{title:t.font.size,className:"note-fontsize",dropdown:a(n,"note-check")})},color:function(t,i){var n='<i class="'+i.iconPrefix+i.icons.color.recent+'" style="color:black;background-color:yellow;"></i>',o=e(n,{className:"note-recent-color",title:t.color.recent,event:"color",value:'{"backColor":"yellow"}'}),s=['<li><div class="btn-group">','<div class="note-palette-title">'+t.color.background+"</div>",'<div class="note-color-reset" data-event="backColor"',' data-value="inherit" title="'+t.color.transparent+'">'+t.color.setTransparent+"</div>",'<div class="note-color-palette" data-target-event="backColor"></div>','</div><div class="btn-group">','<div class="note-palette-title">'+t.color.foreground+"</div>",'<div class="note-color-reset" data-event="foreColor" data-value="inherit" title="'+t.color.reset+'">',t.color.resetToDefault,"</div>",'<div class="note-color-palette" data-target-event="foreColor"></div>',"</div></li>"],r=e("",{title:t.color.more,dropdown:a(s)});return o+r},bold:function(t,e){return i(e.iconPrefix+e.icons.font.bold,{event:"bold",title:t.font.bold})},italic:function(t,e){return i(e.iconPrefix+e.icons.font.italic,{event:"italic",title:t.font.italic})},underline:function(t,e){return i(e.iconPrefix+e.icons.font.underline,{event:"underline",title:t.font.underline})},strikethrough:function(t,e){return i(e.iconPrefix+e.icons.font.strikethrough,{event:"strikethrough",title:t.font.strikethrough})},superscript:function(t,e){return i(e.iconPrefix+e.icons.font.superscript,{event:"superscript",title:t.font.superscript})},subscript:function(t,e){return i(e.iconPrefix+e.icons.font.subscript,{event:"subscript",title:t.font.subscript})},clear:function(t,e){return i(e.iconPrefix+e.icons.font.clear,{event:"removeFormat",title:t.font.clear})},ul:function(t,e){return i(e.iconPrefix+e.icons.lists.unordered,{event:"insertUnorderedList",title:t.lists.unordered})},ol:function(t,e){return i(e.iconPrefix+e.icons.lists.ordered,{event:"insertOrderedList",title:t.lists.ordered})},paragraph:function(t,e){var n=i(e.iconPrefix+e.icons.paragraph.left,{title:t.paragraph.left,event:"justifyLeft"}),o=i(e.iconPrefix+e.icons.paragraph.center,{title:t.paragraph.center,event:"justifyCenter"}),s=i(e.iconPrefix+e.icons.paragraph.right,{title:t.paragraph.right,event:"justifyRight"}),r=i(e.iconPrefix+e.icons.paragraph.justify,{title:t.paragraph.justify,event:"justifyFull"}),l=i(e.iconPrefix+e.icons.paragraph.outdent,{title:t.paragraph.outdent,event:"outdent"}),u=i(e.iconPrefix+e.icons.paragraph.indent,{title:t.paragraph.indent,event:"indent"}),d=['<div class="note-align btn-group">',n+o+s+r,'</div><div class="note-list btn-group">',u+l,"</div>"];
return i(e.iconPrefix+e.icons.paragraph.paragraph,{title:t.paragraph.paragraph,dropdown:a(d,"","div")})},height:function(t,e){var n=e.lineHeights.reduce(function(t,i){return t+'<li><a data-event="lineHeight" href="#" data-value="'+parseFloat(i)+'"><i class="'+e.iconPrefix+e.icons.misc.check+'"></i> '+i+"</a></li>"},"");return i(e.iconPrefix+e.icons.font.height,{title:t.font.height,dropdown:a(n,"note-check")})},help:function(t,e){return i(e.iconPrefix+e.icons.options.help,{event:"showHelpDialog",title:t.options.help,hide:!0})},fullscreen:function(t,e){return i(e.iconPrefix+e.icons.options.fullscreen,{event:"fullscreen",title:t.options.fullscreen})},codeview:function(t,e){return i(e.iconPrefix+e.icons.options.codeview,{event:"codeview",title:t.options.codeview})},undo:function(t,e){return i(e.iconPrefix+e.icons.history.undo,{event:"undo",title:t.history.undo})},redo:function(t,e){return i(e.iconPrefix+e.icons.history.redo,{event:"redo",title:t.history.redo})},hr:function(t,e){return i(e.iconPrefix+e.icons.hr.insert,{event:"insertHorizontalRule",title:t.hr.insert})}},r=function(o,a){var r=function(){var t=i(a.iconPrefix+a.icons.link.edit,{title:o.link.edit,event:"showLinkDialog",hide:!0}),e=i(a.iconPrefix+a.icons.link.unlink,{title:o.link.unlink,event:"unlink"}),s='<a href="http://www.google.com" target="_blank">www.google.com</a>&nbsp;&nbsp;<div class="note-insert btn-group">'+t+e+"</div>";return n("note-link-popover",s)},l=function(){var t=e('<span class="note-fontsize-10">100%</span>',{title:o.image.resizeFull,event:"resize",value:"1"}),s=e('<span class="note-fontsize-10">50%</span>',{title:o.image.resizeHalf,event:"resize",value:"0.5"}),r=e('<span class="note-fontsize-10">25%</span>',{title:o.image.resizeQuarter,event:"resize",value:"0.25"}),l=i(a.iconPrefix+a.icons.image.floatLeft,{title:o.image.floatLeft,event:"floatMe",value:"left"}),u=i(a.iconPrefix+a.icons.image.floatRight,{title:o.image.floatRight,event:"floatMe",value:"right"}),d=i(a.iconPrefix+a.icons.image.floatNone,{title:o.image.floatNone,event:"floatMe",value:"none"}),c=i(a.iconPrefix+a.icons.image.shapeRounded,{title:o.image.shapeRounded,event:"imageShape",value:"img-rounded"}),h=i(a.iconPrefix+a.icons.image.shapeCircle,{title:o.image.shapeCircle,event:"imageShape",value:"img-circle"}),p=i(a.iconPrefix+a.icons.image.shapeThumbnail,{title:o.image.shapeThumbnail,event:"imageShape",value:"img-thumbnail"}),f=i(a.iconPrefix+a.icons.image.shapeNone,{title:o.image.shapeNone,event:"imageShape",value:""}),m=i(a.iconPrefix+a.icons.image.remove,{title:o.image.remove,event:"removeMedia",value:"none"}),v=(a.disableResizeImage?"":'<div class="btn-group">'+t+s+r+"</div>")+'<div class="btn-group">'+l+u+d+'</div><br><div class="btn-group">'+c+h+p+f+'</div><div class="btn-group">'+m+"</div>";return n("note-image-popover",v)},u=function(){for(var e=t("<div />"),i=0,r=a.airPopover.length;i<r;i++){for(var l=a.airPopover[i],u=t('<div class="note-'+l[0]+' btn-group">'),d=0,c=l[1].length;d<c;d++){var h=t(s[l[1][d]](o,a));h.attr("data-name",l[1][d]),u.append(h)}e.append(u)}return n("note-air-popover",e.children())},d=t('<div class="note-popover" />');return d.append(r()),d.append(l()),a.airMode&&d.append(u()),d},c=function(t){return'<div class="note-handle"><div class="note-control-selection"><div class="note-control-selection-bg"></div><div class="note-control-holder note-control-nw"></div><div class="note-control-holder note-control-ne"></div><div class="note-control-holder note-control-sw"></div><div class="'+(t.disableResizeImage?"note-control-holder":"note-control-sizing")+' note-control-se"></div>'+(t.disableResizeImage?"":'<div class="note-control-selection-info"></div>')+"</div></div>"},h=function(t,e){var i="note-shortcut-col col-xs-6 note-shortcut-",n=[];for(var o in e)e.hasOwnProperty(o)&&n.push('<div class="'+i+'key">'+e[o].kbd+'</div><div class="'+i+'name">'+e[o].text+"</div>");return'<div class="note-shortcut-row row"><div class="'+i+'title col-xs-offset-6">'+t+'</div></div><div class="note-shortcut-row row">'+n.join('</div><div class="note-shortcut-row row">')+"</div>"},f=function(t){var e=[{kbd:" + B",text:t.font.bold},{kbd:" + I",text:t.font.italic},{kbd:" + U",text:t.font.underline},{kbd:" + \\",text:t.font.clear}];return h(t.shortcut.textFormatting,e)},m=function(t){var e=[{kbd:" + Z",text:t.history.undo},{kbd:" +  + Z",text:t.history.redo},{kbd:" + ]",text:t.paragraph.indent},{kbd:" + [",text:t.paragraph.outdent},{kbd:" + ENTER",text:t.hr.insert}];return h(t.shortcut.action,e)},v=function(t){var e=[{kbd:" +  + L",text:t.paragraph.left},{kbd:" +  + E",text:t.paragraph.center},{kbd:" +  + R",text:t.paragraph.right},{kbd:" +  + J",text:t.paragraph.justify},{kbd:" +  + NUM7",text:t.lists.ordered},{kbd:" +  + NUM8",text:t.lists.unordered}];return h(t.shortcut.paragraphFormatting,e)},g=function(t){var e=[{kbd:" + NUM0",text:t.style.normal},{kbd:" + NUM1",text:t.style.h1},{kbd:" + NUM2",text:t.style.h2},{kbd:" + NUM3",text:t.style.h3},{kbd:" + NUM4",text:t.style.h4},{kbd:" + NUM5",text:t.style.h5},{kbd:" + NUM6",text:t.style.h6}];return h(t.shortcut.documentStyle,e)},b=function(t,e){var i=e.extraKeys,n=[];for(var o in i)i.hasOwnProperty(o)&&n.push({kbd:o,text:i[o]});return h(t.shortcut.extraKeys,n)},y=function(t,e){var i='class="note-shortcut note-shortcut-col col-sm-6 col-xs-12"',n=["<div "+i+">"+m(t,e)+"</div><div "+i+">"+f(t,e)+"</div>","<div "+i+">"+g(t,e)+"</div><div "+i+">"+v(t,e)+"</div>"];return e.extraKeys&&n.push("<div "+i+">"+b(t,e)+"</div>"),'<div class="note-shortcut-row row">'+n.join('</div><div class="note-shortcut-row row">')+"</div>"},w=function(t){return t.replace(//g,"Ctrl").replace(//g,"Shift")},k={image:function(t,e){var i="";if(e.maximumImageFileSize){var n=Math.floor(Math.log(e.maximumImageFileSize)/Math.log(1024)),a=1*(e.maximumImageFileSize/Math.pow(1024,n)).toFixed(2)+" "+" KMGTP"[n]+"B";i="<small>"+t.image.maximumFileSize+" : "+a+"</small>"}var s='<div class="form-group row note-group-select-from-files"><label>'+t.image.selectFromFiles+'</label><input class="note-image-input form-control" type="file" name="files" accept="image/*" multiple="multiple" />'+i+'</div><div class="form-group row"><label>'+t.image.url+'</label><input class="note-image-url form-control col-md-12" type="text" /></div>',r='<button href="#" class="btn btn-primary note-image-btn disabled" disabled>'+t.image.insert+"</button>";return o("note-image-dialog",t.image.insert,s,r)},link:function(t,e){var i='<div class="form-group row"><label>'+t.link.textToDisplay+'</label><input class="note-link-text form-control col-md-12" type="text" /></div><div class="form-group row"><label>'+t.link.url+'</label><input class="note-link-url form-control col-md-12" type="text" value="http://" /></div>'+(e.disableLinkTarget?"":'<div class="checkbox"><label><input type="checkbox" checked> '+t.link.openInNewWindow+"</label></div>"),n='<button href="#" class="btn btn-primary note-link-btn disabled" disabled>'+t.link.insert+"</button>";return o("note-link-dialog",t.link.insert,i,n)},help:function(t,e){var i='<a class="modal-close pull-right" aria-hidden="true" tabindex="-1">'+t.shortcut.close+'</a><div class="title">'+t.shortcut.shortcuts+"</div>"+(l.isMac?y(t,e):w(y(t,e)))+'<p class="text-center"><a href="//summernote.org/" target="_blank">Summernote 0.6.16</a>  <a href="//github.com/summernote/summernote" target="_blank">Project</a>  <a href="//github.com/summernote/summernote/issues" target="_blank">Issues</a></p>';return o("note-help-dialog","",i,"")}},C=function(e,i){var n="";return t.each(k,function(t,o){n+=o(e,i)}),'<div class="note-dialog">'+n+"</div>"},x=function(){return'<div class="note-resizebar"><div class="note-icon-bar"></div><div class="note-icon-bar"></div><div class="note-icon-bar"></div></div>'},D=function(t){return l.isMac&&(t=t.replace("CMD","").replace("SHIFT","")),t.replace("BACKSLASH","\\").replace("SLASH","/").replace("LEFTBRACKET","[").replace("RIGHTBRACKET","]")},T=function(e,i,n){var o=u.invertObject(i),a=e.find("button");a.each(function(e,i){var n=t(i),a=o[n.data("event")];a&&n.attr("title",function(t,e){return e+" ("+D(a)+")"})}).tooltip({container:"body",trigger:"hover",placement:n||"top"}).on("click",function(){t(this).tooltip("hide")})},M=function(e,i){var n=i.colors;e.find(".note-color-palette").each(function(){for(var e=t(this),i=e.attr("data-target-event"),o=[],a=0,s=n.length;a<s;a++){for(var r=n[a],l=[],u=0,d=r.length;u<d;u++){var c=r[u];l.push(['<button type="button" class="note-color-btn" style="background-color:',c,';" data-event="',i,'" data-value="',c,'" title="',c,'" data-toggle="button" tabindex="-1"></button>'].join(""))}o.push('<div class="note-color-row">'+l.join("")+"</div>")}e.html(o.join(""))})};this.createLayoutByAirMode=function(e,i){var n=i.langInfo,o=i.keyMap[l.isMac?"mac":"pc"],a=u.uniqueId();e.addClass("note-air-editor note-editable panel-body"),e.attr({id:"note-editor-"+a,contentEditable:!0});var s=document.body,d=t(r(n,i));d.addClass("note-air-layout"),d.attr("id","note-popover-"+a),d.appendTo(s),T(d,o),M(d,i);var h=t(c(i));h.addClass("note-air-layout"),h.attr("id","note-handle-"+a),h.appendTo(s);var p=t(C(n,i));p.addClass("note-air-layout"),p.attr("id","note-dialog-"+a),p.find("button.close, a.modal-close").click(function(){t(this).closest(".modal").modal("hide")}),p.appendTo(s)},this.createLayoutByFrame=function(e,i){var n=i.langInfo,o=t('<div class="note-editor panel panel-default" />');i.width&&o.width(i.width),i.height>0&&t('<div class="note-statusbar">'+(i.disableResizeEditor?"":x())+"</div>").prependTo(o);var a=t('<div class="note-editing-area" />'),u=!e.is(":disabled"),d=t('<div class="note-editable panel-body" contentEditable="'+u+'"></div>').prependTo(a);i.height&&d.height(i.height),i.direction&&d.attr("dir",i.direction);var h=e.attr("placeholder")||i.placeholder;h&&d.attr("data-placeholder",h),d.html(p.html(e)||p.emptyPara),t('<textarea class="note-codable"></textarea>').prependTo(a);var f=t(r(n,i)).prependTo(a);M(f,i),T(f,F),t(c(i)).prependTo(a),a.prependTo(o);for(var m=t('<div class="note-toolbar panel-heading" />'),v=0,g=i.toolbar.length;v<g;v++){for(var b=i.toolbar[v][0],y=i.toolbar[v][1],w=t('<div class="note-'+b+' btn-group" />'),k=0,D=y.length;k<D;k++){var S=s[y[k]];if(t.isFunction(S)){var N=t(S(n,i));N.attr("data-name",y[k]),w.append(N)}}m.append(w)}var F=i.keyMap[l.isMac?"mac":"pc"];M(m,i),T(m,F,"bottom"),m.prependTo(o),t('<div class="note-dropzone"><div class="note-dropzone-message"></div></div>').prependTo(o);var $=i.dialogsInBody?t(document.body):o,P=t(C(n,i)).prependTo($);P.find("button.close, a.modal-close").click(function(){t(this).closest(".modal").modal("hide")}),o.insertAfter(e),e.hide()},this.hasNoteEditor=function(t){return this.noteEditorFromHolder(t).length>0},this.noteEditorFromHolder=function(e){return e.hasClass("note-air-editor")?e:e.next().hasClass("note-editor")?e.next():t()},this.createLayout=function(t,e){e.airMode?this.createLayoutByAirMode(t,e):this.createLayoutByFrame(t,e)},this.layoutInfoFromHolder=function(t){var e=this.noteEditorFromHolder(t);if(e.length)return e.data("holder",t),p.buildLayoutInfo(e)},this.removeLayout=function(t,e,i){i.airMode?(t.removeClass("note-air-editor note-editable").removeAttr("id contentEditable"),e.popover().remove(),e.handle().remove(),e.dialog().remove()):(t.html(e.editable().html()),i.dialogsInBody&&e.dialog().remove(),e.editor().remove(),t.show())},this.getTemplate=function(){return{button:e,iconButton:i,dialog:o}},this.addButtonInfo=function(t,e){s[t]=e},this.addDialogInfo=function(t,e){k[t]=e}};t.summernote=t.summernote||{},t.extend(t.summernote,m);var B=new O,j=new H;t.extend(t.summernote,{renderer:B,eventHandler:j,core:{agent:l,list:d,dom:p,range:f},pluginEvents:{},plugins:[]}),t.summernote.addPlugin=function(e){t.summernote.plugins.push(e),e.buttons&&t.each(e.buttons,function(t,e){B.addButtonInfo(t,e)}),e.dialogs&&t.each(e.dialogs,function(t,e){B.addDialogInfo(t,e)}),e.events&&t.each(e.events,function(e,i){t.summernote.pluginEvents[e]=i}),e.langs&&t.each(e.langs,function(e,i){t.summernote.lang[e]&&t.extend(t.summernote.lang[e],i)}),e.options&&t.extend(t.summernote.options,e.options)},t.fn.extend({summernote:function(){var e=t.type(d.head(arguments)),i="string"===e,n="object"===e,o=n?d.head(arguments):{};if(o=t.extend({},t.summernote.options,o),o.icons=t.extend({},t.summernote.options.icons,o.icons),o.langInfo=t.extend(!0,{},t.summernote.lang["en-US"],t.summernote.lang[o.lang]),!i&&n)for(var a=0,s=t.summernote.plugins.length;a<s;a++){var r=t.summernote.plugins[a];o.plugin[r.name]&&(t.summernote.plugins[a]=t.extend(!0,r,o.plugin[r.name]))}this.each(function(e,i){var n=t(i);if(!B.hasNoteEditor(n)){B.createLayout(n,o);var a=B.layoutInfoFromHolder(n);n.data("layoutInfo",a),j.attach(a,o),j.attachCustomEvent(a,o)}});var l=this.first();if(l.length){var u=B.layoutInfoFromHolder(l);if(i){var c=d.head(d.from(arguments)),h=d.tail(d.from(arguments)),p=[c,u.editable()].concat(h);return j.invoke.apply(j,p)}o.focus&&u.editable().focus()}return this},code:function(e){if(void 0===e){var i=this.first();if(!i.length)return;var n=B.layoutInfoFromHolder(i),o=n&&n.editable();if(o&&o.length){var a=j.invoke("codeview.isActivated",n);return j.invoke("codeview.sync",n),a?n.codable().val():n.editable().html()}return p.value(i)}return this.each(function(i,n){var o=B.layoutInfoFromHolder(t(n)),a=o&&o.editable();a&&a.html(e)}),this},destroy:function(){return this.each(function(e,i){var n=t(i);if(B.hasNoteEditor(n)){var o=B.layoutInfoFromHolder(n),a=o.editor().data("options");j.detach(o,a),B.removeLayout(n,o,a)}}),this}})}),!function(t){"use strict";var e=function(e,i){this.options=t.extend({},t.fn.editableform.defaults,i),this.$div=t(e),this.options.scope||(this.options.scope=this)};e.prototype={constructor:e,initInput:function(){this.input=this.options.input,this.value=this.input.str2value(this.options.value),this.input.prerender()},initTemplate:function(){this.$form=t(t.fn.editableform.template)},initButtons:function(){var e=this.$form.find(".editable-buttons");e.append(t.fn.editableform.buttons),"bottom"===this.options.showbuttons&&e.addClass("editable-buttons-bottom")},render:function(){this.$loading=t(t.fn.editableform.loading),this.$div.empty().append(this.$loading),this.initTemplate(),this.options.showbuttons?this.initButtons():this.$form.find(".editable-buttons").remove(),this.showLoading(),this.isSaving=!1,this.$div.triggerHandler("rendering"),this.initInput(),this.$form.find("div.editable-input").append(this.input.$tpl),this.$div.append(this.$form),t.when(this.input.render()).then(t.proxy(function(){if(this.options.showbuttons||this.input.autosubmit(),this.$form.find(".editable-cancel").click(t.proxy(this.cancel,this)),this.input.error)this.error(this.input.error),this.$form.find(".editable-submit").attr("disabled",!0),this.input.$input.attr("disabled",!0),this.$form.submit(function(t){t.preventDefault()});else{this.error(!1),this.input.$input.removeAttr("disabled"),this.$form.find(".editable-submit").removeAttr("disabled");var e=null===this.value||void 0===this.value||""===this.value?this.options.defaultValue:this.value;this.input.value2input(e),this.$form.submit(t.proxy(this.submit,this))}this.$div.triggerHandler("rendered"),this.showForm(),this.input.postrender&&this.input.postrender()},this))},cancel:function(){this.$div.triggerHandler("cancel")},showLoading:function(){var t,e;this.$form?(t=this.$form.outerWidth(),e=this.$form.outerHeight(),t&&this.$loading.width(t),e&&this.$loading.height(e),this.$form.hide()):(t=this.$loading.parent().width(),t&&this.$loading.width(t)),this.$loading.show()},showForm:function(t){this.$loading.hide(),this.$form.show(),t!==!1&&this.input.activate(),this.$div.triggerHandler("show")},error:function(e){var i,n=this.$form.find(".control-group"),o=this.$form.find(".editable-error-block");if(e===!1)n.removeClass(t.fn.editableform.errorGroupClass),o.removeClass(t.fn.editableform.errorBlockClass).empty().hide();else{if(e){i=e.split("\n");for(var a=0;a<i.length;a++)i[a]=t("<div>").text(i[a]).html();e=i.join("<br>")}n.addClass(t.fn.editableform.errorGroupClass),o.addClass(t.fn.editableform.errorBlockClass).html(e).show()}},submit:function(e){e.stopPropagation(),e.preventDefault();var i,n=this.input.input2value();if(i=this.validate(n))return this.error(i),void this.showForm();if(!this.options.savenochange&&this.input.value2str(n)==this.input.value2str(this.value))return void this.$div.triggerHandler("nochange");var o=this.input.value2submit(n);this.isSaving=!0,t.when(this.save(o)).done(t.proxy(function(t){this.isSaving=!1;var e="function"==typeof this.options.success?this.options.success.call(this.options.scope,t,n):null;return e===!1?(this.error(!1),void this.showForm(!1)):"string"==typeof e?(this.error(e),void this.showForm()):(e&&"object"==typeof e&&e.hasOwnProperty("newValue")&&(n=e.newValue),this.error(!1),this.value=n,void this.$div.triggerHandler("save",{newValue:n,submitValue:o,response:t}))},this)).fail(t.proxy(function(t){this.isSaving=!1;var e;e="function"==typeof this.options.error?this.options.error.call(this.options.scope,t,n):"string"==typeof t?t:t.responseText||t.statusText||"Unknown error!",this.error(e),this.showForm()},this))},save:function(e){this.options.pk=t.fn.editableutils.tryParseJson(this.options.pk,!0);var i,n="function"==typeof this.options.pk?this.options.pk.call(this.options.scope):this.options.pk,o=!!("function"==typeof this.options.url||this.options.url&&("always"===this.options.send||"auto"===this.options.send&&null!==n&&void 0!==n));return o?(this.showLoading(),i={name:this.options.name||"",value:e,pk:n},"function"==typeof this.options.params?i=this.options.params.call(this.options.scope,i):(this.options.params=t.fn.editableutils.tryParseJson(this.options.params,!0),t.extend(i,this.options.params)),"function"==typeof this.options.url?this.options.url.call(this.options.scope,i):t.ajax(t.extend({url:this.options.url,data:i,type:"POST"},this.options.ajaxOptions))):void 0},validate:function(t){return void 0===t&&(t=this.value),"function"==typeof this.options.validate?this.options.validate.call(this.options.scope,t):void 0},option:function(t,e){t in this.options&&(this.options[t]=e),"value"===t&&this.setValue(e)},setValue:function(t,e){this.value=e?this.input.str2value(t):t,this.$form&&this.$form.is(":visible")&&this.input.value2input(this.value)}},t.fn.editableform=function(i){var n=arguments;return this.each(function(){var o=t(this),a=o.data("editableform"),s="object"==typeof i&&i;a||o.data("editableform",a=new e(this,s)),"string"==typeof i&&a[i].apply(a,Array.prototype.slice.call(n,1))})},t.fn.editableform.Constructor=e,t.fn.editableform.defaults={type:"text",url:null,params:null,name:null,pk:null,value:null,defaultValue:null,send:"auto",validate:null,success:null,error:null,ajaxOptions:null,showbuttons:!0,scope:null,savenochange:!1},t.fn.editableform.template='<form class="form-inline editableform"><div class="control-group"><div><div class="editable-input"></div><div class="editable-buttons"></div></div><div class="editable-error-block"></div></div></form>',t.fn.editableform.loading='<div class="editableform-loading"></div>',t.fn.editableform.buttons='<button type="submit" class="editable-submit">ok</button><button type="button" class="editable-cancel">cancel</button>',t.fn.editableform.errorGroupClass=null,t.fn.editableform.errorBlockClass="editable-error",t.fn.editableform.engine="jquery"}(window.jQuery),function(t){"use strict";t.fn.editableutils={inherit:function(t,e){var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t,t.superclass=e.prototype},setCursorPosition:function(t,e){if(t.setSelectionRange)t.setSelectionRange(e,e);else if(t.createTextRange){var i=t.createTextRange();i.collapse(!0),i.moveEnd("character",e),i.moveStart("character",e),i.select()}},tryParseJson:function(t,e){if("string"==typeof t&&t.length&&t.match(/^[\{\[].*[\}\]]$/))if(e)try{t=new Function("return "+t)()}catch(i){}finally{return t}else t=new Function("return "+t)();return t},sliceObj:function(e,i,n){var o,a,s={};if(!t.isArray(i)||!i.length)return s;for(var r=0;r<i.length;r++)o=i[r],e.hasOwnProperty(o)&&(s[o]=e[o]),n!==!0&&(a=o.toLowerCase(),e.hasOwnProperty(a)&&(s[o]=e[a]));return s},getConfigData:function(e){var i={};return t.each(e.data(),function(t,e){("object"!=typeof e||e&&"object"==typeof e&&(e.constructor===Object||e.constructor===Array))&&(i[t]=e)}),i},objectKeys:function(t){if(Object.keys)return Object.keys(t);if(t!==Object(t))throw new TypeError("Object.keys called on a non-object");var e,i=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&i.push(e);return i},escape:function(e){return t("<div>").text(e).html()},itemsByValue:function(e,i,n){if(!i||null===e)return[];if("function"!=typeof n){var o=n||"value";n=function(t){return t[o]}}var a=t.isArray(e),s=[],r=this;return t.each(i,function(i,o){if(o.children)s=s.concat(r.itemsByValue(e,o.children,n));else if(a)t.grep(e,function(t){return t==(o&&"object"==typeof o?n(o):o)}).length&&s.push(o);else{var l=o&&"object"==typeof o?n(o):o;e==l&&s.push(o)}}),s},createInput:function(e){var i,n,o,a=e.type;return"date"===a&&("inline"===e.mode?t.fn.editabletypes.datefield?a="datefield":t.fn.editabletypes.dateuifield&&(a="dateuifield"):t.fn.editabletypes.date?a="date":t.fn.editabletypes.dateui&&(a="dateui"),"date"!==a||t.fn.editabletypes.date||(a="combodate")),"datetime"===a&&"inline"===e.mode&&(a="datetimefield"),"wysihtml5"!==a||t.fn.editabletypes[a]||(a="textarea"),"function"==typeof t.fn.editabletypes[a]?(i=t.fn.editabletypes[a],n=this.sliceObj(e,this.objectKeys(i.defaults)),o=new i(n)):(t.error("Unknown type: "+a),!1)},supportsTransitions:function(){var t=document.body||document.documentElement,e=t.style,i="transition",n=["Moz","Webkit","Khtml","O","ms"];if("string"==typeof e[i])return!0;i=i.charAt(0).toUpperCase()+i.substr(1);for(var o=0;o<n.length;o++)if("string"==typeof e[n[o]+i])return!0;return!1}}}(window.jQuery),function(t){"use strict";var e=function(t,e){this.init(t,e)},i=function(t,e){this.init(t,e)};e.prototype={containerName:null,containerDataName:null,innerCss:null,containerClass:"editable-container editable-popup",defaults:{},init:function(i,n){this.$element=t(i),this.options=t.extend({},t.fn.editableContainer.defaults,n),this.splitOptions(),this.formOptions.scope=this.$element[0],this.initContainer(),this.delayedHide=!1,this.$element.on("destroyed",t.proxy(function(){this.destroy()},this)),t(document).data("editable-handlers-attached")||(t(document).on("keyup.editable",function(e){27===e.which&&t(".editable-open").editableContainer("hide")}),t(document).on("click.editable",function(i){var n,o=t(i.target),a=[".editable-container",".ui-datepicker-header",".datepicker",".modal-backdrop",".bootstrap-wysihtml5-insert-image-modal",".bootstrap-wysihtml5-insert-link-modal"];if(t.contains(document.documentElement,i.target)&&!o.is(document)){for(n=0;n<a.length;n++)if(o.is(a[n])||o.parents(a[n]).length)return;e.prototype.closeOthers(i.target)}}),t(document).data("editable-handlers-attached",!0))},splitOptions:function(){if(this.containerOptions={},this.formOptions={},!t.fn[this.containerName])throw new Error(this.containerName+" not found. Have you included corresponding js file?");for(var e in this.options)e in this.defaults?this.containerOptions[e]=this.options[e]:this.formOptions[e]=this.options[e]},tip:function(){return this.container()?this.container().$tip:null},container:function(){var t;return this.containerDataName&&(t=this.$element.data(this.containerDataName))?t:t=this.$element.data(this.containerName)},call:function(){this.$element[this.containerName].apply(this.$element,arguments)},initContainer:function(){this.call(this.containerOptions)},renderForm:function(){this.$form.editableform(this.formOptions).on({save:t.proxy(this.save,this),nochange:t.proxy(function(){this.hide("nochange")},this),cancel:t.proxy(function(){this.hide("cancel")},this),show:t.proxy(function(){this.delayedHide?(this.hide(this.delayedHide.reason),this.delayedHide=!1):this.setPosition()},this),rendering:t.proxy(this.setPosition,this),resize:t.proxy(this.setPosition,this),rendered:t.proxy(function(){this.$element.triggerHandler("shown",t(this.options.scope).data("editable"))},this)}).editableform("render")},show:function(e){this.$element.addClass("editable-open"),e!==!1&&this.closeOthers(this.$element[0]),this.innerShow(),this.tip().addClass(this.containerClass),this.$form,this.$form=t("<div>"),this.tip().is(this.innerCss)?this.tip().append(this.$form):this.tip().find(this.innerCss).append(this.$form),this.renderForm()},hide:function(t){if(this.tip()&&this.tip().is(":visible")&&this.$element.hasClass("editable-open")){if(this.$form.data("editableform").isSaving)return void(this.delayedHide={reason:t});this.delayedHide=!1,this.$element.removeClass("editable-open"),this.innerHide(),this.$element.triggerHandler("hidden",t||"manual")}},innerShow:function(){},innerHide:function(){},toggle:function(t){this.container()&&this.tip()&&this.tip().is(":visible")?this.hide():this.show(t)},setPosition:function(){},save:function(t,e){this.$element.triggerHandler("save",e),this.hide("save")},option:function(t,e){this.options[t]=e,t in this.containerOptions?(this.containerOptions[t]=e,this.setContainerOption(t,e)):(this.formOptions[t]=e,this.$form&&this.$form.editableform("option",t,e))},setContainerOption:function(t,e){this.call("option",t,e)},destroy:function(){this.hide(),this.innerDestroy(),this.$element.off("destroyed"),this.$element.removeData("editableContainer")},innerDestroy:function(){},closeOthers:function(e){t(".editable-open").each(function(i,n){if(n!==e&&!t(n).find(e).length){var o=t(n),a=o.data("editableContainer");a&&("cancel"===a.options.onblur?o.data("editableContainer").hide("onblur"):"submit"===a.options.onblur&&o.data("editableContainer").tip().find("form").submit())}})},activate:function(){this.tip&&this.tip().is(":visible")&&this.$form&&this.$form.data("editableform").input.activate()}},t.fn.editableContainer=function(n){var o=arguments;return this.each(function(){var a=t(this),s="editableContainer",r=a.data(s),l="object"==typeof n&&n,u="inline"===l.mode?i:e;r||a.data(s,r=new u(this,l)),"string"==typeof n&&r[n].apply(r,Array.prototype.slice.call(o,1))})},t.fn.editableContainer.Popup=e,t.fn.editableContainer.Inline=i,t.fn.editableContainer.defaults={value:null,placement:"top",autohide:!0,onblur:"cancel",anim:!1,mode:"popup"},jQuery.event.special.destroyed={remove:function(t){t.handler&&t.handler()}}}(window.jQuery),function(t){"use strict";t.extend(t.fn.editableContainer.Inline.prototype,t.fn.editableContainer.Popup.prototype,{containerName:"editableform",innerCss:".editable-inline",containerClass:"editable-container editable-inline",initContainer:function(){this.$tip=t("<span></span>"),this.options.anim||(this.options.anim=0)},splitOptions:function(){this.containerOptions={},this.formOptions=this.options},tip:function(){return this.$tip},innerShow:function(){this.$element.hide(),this.tip().insertAfter(this.$element).show()},innerHide:function(){this.$tip.hide(this.options.anim,t.proxy(function(){this.$element.show(),this.innerDestroy()},this))},innerDestroy:function(){this.tip()&&this.tip().empty().remove()}})}(window.jQuery),function(t){"use strict";var e=function(e,i){this.$element=t(e),this.options=t.extend({},t.fn.editable.defaults,i,t.fn.editableutils.getConfigData(this.$element)),this.options.selector?this.initLive():this.init(),this.options.highlight&&!t.fn.editableutils.supportsTransitions()&&(this.options.highlight=!1)};e.prototype={constructor:e,init:function(){var e,i=!1;if(this.options.name=this.options.name||this.$element.attr("id"),this.options.scope=this.$element[0],this.input=t.fn.editableutils.createInput(this.options),this.input){switch(void 0===this.options.value||null===this.options.value?(this.value=this.input.html2value(t.trim(this.$element.html())),i=!0):(this.options.value=t.fn.editableutils.tryParseJson(this.options.value,!0),this.value="string"==typeof this.options.value?this.input.str2value(this.options.value):this.options.value),this.$element.addClass("editable"),"textarea"===this.input.type&&this.$element.addClass("editable-pre-wrapped"),"manual"!==this.options.toggle?(this.$element.addClass("editable-click"),this.$element.on(this.options.toggle+".editable",t.proxy(function(t){if(this.options.disabled||t.preventDefault(),"mouseenter"===this.options.toggle)this.show();else{var e="click"!==this.options.toggle;this.toggle(e)}},this))):this.$element.attr("tabindex",-1),"function"==typeof this.options.display&&(this.options.autotext="always"),this.options.autotext){case"always":e=!0;break;case"auto":e=!t.trim(this.$element.text()).length&&null!==this.value&&void 0!==this.value&&!i;break;default:e=!1}t.when(!e||this.render()).then(t.proxy(function(){this.options.disabled?this.disable():this.enable(),this.$element.triggerHandler("init",this)},this))}},initLive:function(){var e=this.options.selector;this.options.selector=!1,this.options.autotext="never",this.$element.on(this.options.toggle+".editable",e,t.proxy(function(e){var i=t(e.target);i.data("editable")||(i.hasClass(this.options.emptyclass)&&i.empty(),i.editable(this.options).trigger(e))},this))},render:function(t){return this.options.display!==!1?this.input.value2htmlFinal?this.input.value2html(this.value,this.$element[0],this.options.display,t):"function"==typeof this.options.display?this.options.display.call(this.$element[0],this.value,t):this.input.value2html(this.value,this.$element[0]):void 0},enable:function(){this.options.disabled=!1,this.$element.removeClass("editable-disabled"),this.handleEmpty(this.isEmpty),"manual"!==this.options.toggle&&"-1"===this.$element.attr("tabindex")&&this.$element.removeAttr("tabindex")},disable:function(){this.options.disabled=!0,this.hide(),this.$element.addClass("editable-disabled"),this.handleEmpty(this.isEmpty),this.$element.attr("tabindex",-1)},toggleDisabled:function(){this.options.disabled?this.enable():this.disable()},option:function(e,i){return e&&"object"==typeof e?void t.each(e,t.proxy(function(e,i){this.option(t.trim(e),i)},this)):(this.options[e]=i,"disabled"===e?i?this.disable():this.enable():("value"===e&&this.setValue(i),this.container&&this.container.option(e,i),void(this.input.option&&this.input.option(e,i))))},handleEmpty:function(e){this.options.display!==!1&&(this.isEmpty=void 0!==e?e:"function"==typeof this.input.isEmpty?this.input.isEmpty(this.$element):""===t.trim(this.$element.html()),this.options.disabled?this.isEmpty&&(this.$element.empty(),this.options.emptyclass&&this.$element.removeClass(this.options.emptyclass)):this.isEmpty?(this.$element.html(this.options.emptytext),this.options.emptyclass&&this.$element.addClass(this.options.emptyclass)):this.options.emptyclass&&this.$element.removeClass(this.options.emptyclass))},show:function(e){if(!this.options.disabled){if(this.container){if(this.container.tip().is(":visible"))return}else{var i=t.extend({},this.options,{value:this.value,input:this.input});this.$element.editableContainer(i),this.$element.on("save.internal",t.proxy(this.save,this)),this.container=this.$element.data("editableContainer")}this.container.show(e)}},hide:function(){this.container&&this.container.hide()},toggle:function(t){this.container&&this.container.tip().is(":visible")?this.hide():this.show(t)},save:function(t,e){if(this.options.unsavedclass){var i=!1;i=i||"function"==typeof this.options.url,i=i||this.options.display===!1,i=i||void 0!==e.response,i=i||this.options.savenochange&&this.input.value2str(this.value)!==this.input.value2str(e.newValue),i?this.$element.removeClass(this.options.unsavedclass):this.$element.addClass(this.options.unsavedclass)}if(this.options.highlight){var n=this.$element,o=n.css("background-color");n.css("background-color",this.options.highlight),setTimeout(function(){"transparent"===o&&(o=""),n.css("background-color",o),
n.addClass("editable-bg-transition"),setTimeout(function(){n.removeClass("editable-bg-transition")},1700)},10)}this.setValue(e.newValue,!1,e.response)},validate:function(){return"function"==typeof this.options.validate?this.options.validate.call(this,this.value):void 0},setValue:function(e,i,n){this.value=i?this.input.str2value(e):e,this.container&&this.container.option("value",this.value),t.when(this.render(n)).then(t.proxy(function(){this.handleEmpty()},this))},activate:function(){this.container&&this.container.activate()},destroy:function(){this.disable(),this.container&&this.container.destroy(),this.input.destroy(),"manual"!==this.options.toggle&&(this.$element.removeClass("editable-click"),this.$element.off(this.options.toggle+".editable")),this.$element.off("save.internal"),this.$element.removeClass("editable editable-open editable-disabled"),this.$element.removeData("editable")}},t.fn.editable=function(i){var n={},o=arguments,a="editable";switch(i){case"validate":return this.each(function(){var e,i=t(this),o=i.data(a);o&&(e=o.validate())&&(n[o.options.name]=e)}),n;case"getValue":return 2===arguments.length&&arguments[1]===!0?n=this.eq(0).data(a).value:this.each(function(){var e=t(this),i=e.data(a);i&&void 0!==i.value&&null!==i.value&&(n[i.options.name]=i.input.value2submit(i.value))}),n;case"submit":var s,r=arguments[1]||{},l=this,u=this.editable("validate");return t.isEmptyObject(u)?(s=this.editable("getValue"),r.data&&t.extend(s,r.data),t.ajax(t.extend({url:r.url,data:s,type:"POST"},r.ajaxOptions)).success(function(t){"function"==typeof r.success&&r.success.call(l,t,r)}).error(function(){"function"==typeof r.error&&r.error.apply(l,arguments)})):"function"==typeof r.error&&r.error.call(l,u),this}return this.each(function(){var n=t(this),s=n.data(a),r="object"==typeof i&&i;return r&&r.selector?void(s=new e(this,r)):(s||n.data(a,s=new e(this,r)),void("string"==typeof i&&s[i].apply(s,Array.prototype.slice.call(o,1))))})},t.fn.editable.defaults={type:"text",disabled:!1,toggle:"click",emptytext:"Empty",autotext:"auto",value:null,display:null,emptyclass:"editable-empty",unsavedclass:"editable-unsaved",selector:null,highlight:"#FFFF80"}}(window.jQuery),function(t){"use strict";t.fn.editabletypes={};var e=function(){};e.prototype={init:function(e,i,n){this.type=e,this.options=t.extend({},n,i)},prerender:function(){this.$tpl=t(this.options.tpl),this.$input=this.$tpl,this.$clear=null,this.error=null},render:function(){},value2html:function(e,i){t(i)[this.options.escape?"text":"html"](t.trim(e))},html2value:function(e){return t("<div>").html(e).text()},value2str:function(t){return t},str2value:function(t){return t},value2submit:function(t){return t},value2input:function(t){this.$input.val(t)},input2value:function(){return this.$input.val()},activate:function(){this.$input.is(":visible")&&this.$input.focus()},clear:function(){this.$input.val(null)},escape:function(e){return t("<div>").text(e).html()},autosubmit:function(){},destroy:function(){},setClass:function(){this.options.inputclass&&this.$input.addClass(this.options.inputclass)},setAttr:function(t){void 0!==this.options[t]&&null!==this.options[t]&&this.$input.attr(t,this.options[t])},option:function(t,e){this.options[t]=e}},e.defaults={tpl:"",inputclass:null,escape:!0,scope:null,showbuttons:!0},t.extend(t.fn.editabletypes,{abstractinput:e})}(window.jQuery),function(t){"use strict";var e=function(){};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{render:function(){var e=t.Deferred();return this.error=null,this.onSourceReady(function(){this.renderList(),e.resolve()},function(){this.error=this.options.sourceError,e.resolve()}),e.promise()},html2value:function(){return null},value2html:function(e,i,n,o){var a=t.Deferred(),s=function(){"function"==typeof n?n.call(i,e,this.sourceData,o):this.value2htmlFinal(e,i),a.resolve()};return null===e?s.call(this):this.onSourceReady(s,function(){a.resolve()}),a.promise()},onSourceReady:function(e,i){var n;if(t.isFunction(this.options.source)?(n=this.options.source.call(this.options.scope),this.sourceData=null):n=this.options.source,this.options.sourceCache&&t.isArray(this.sourceData))return void e.call(this);try{n=t.fn.editableutils.tryParseJson(n,!1)}catch(o){return void i.call(this)}if("string"==typeof n){if(this.options.sourceCache){var a,s=n;if(t(document).data(s)||t(document).data(s,{}),a=t(document).data(s),a.loading===!1&&a.sourceData)return this.sourceData=a.sourceData,this.doPrepend(),void e.call(this);if(a.loading===!0)return a.callbacks.push(t.proxy(function(){this.sourceData=a.sourceData,this.doPrepend(),e.call(this)},this)),void a.err_callbacks.push(t.proxy(i,this));a.loading=!0,a.callbacks=[],a.err_callbacks=[]}var r=t.extend({url:n,type:"get",cache:!1,dataType:"json",success:t.proxy(function(n){a&&(a.loading=!1),this.sourceData=this.makeArray(n),t.isArray(this.sourceData)?(a&&(a.sourceData=this.sourceData,t.each(a.callbacks,function(){this.call()})),this.doPrepend(),e.call(this)):(i.call(this),a&&t.each(a.err_callbacks,function(){this.call()}))},this),error:t.proxy(function(){i.call(this),a&&(a.loading=!1,t.each(a.err_callbacks,function(){this.call()}))},this)},this.options.sourceOptions);t.ajax(r)}else this.sourceData=this.makeArray(n),t.isArray(this.sourceData)?(this.doPrepend(),e.call(this)):i.call(this)},doPrepend:function(){null!==this.options.prepend&&void 0!==this.options.prepend&&(t.isArray(this.prependData)||(t.isFunction(this.options.prepend)&&(this.options.prepend=this.options.prepend.call(this.options.scope)),this.options.prepend=t.fn.editableutils.tryParseJson(this.options.prepend,!0),"string"==typeof this.options.prepend&&(this.options.prepend={"":this.options.prepend}),this.prependData=this.makeArray(this.options.prepend)),t.isArray(this.prependData)&&t.isArray(this.sourceData)&&(this.sourceData=this.prependData.concat(this.sourceData)))},renderList:function(){},value2htmlFinal:function(){},makeArray:function(e){var i,n,o,a,s=[];if(!e||"string"==typeof e)return null;if(t.isArray(e)){a=function(t,e){return n={value:t,text:e},!(i++>=2)&&void 0};for(var r=0;r<e.length;r++)o=e[r],"object"==typeof o?(i=0,t.each(o,a),1===i?s.push(n):i>1&&(o.children&&(o.children=this.makeArray(o.children)),s.push(o))):s.push({value:o,text:o})}else t.each(e,function(t,e){s.push({value:t,text:e})});return s},option:function(t,e){this.options[t]=e,"source"===t&&(this.sourceData=null),"prepend"===t&&(this.prependData=null)}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{source:null,prepend:!1,sourceError:"Error when loading list",sourceCache:!0,sourceOptions:null}),t.fn.editabletypes.list=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("text",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{render:function(){this.renderClear(),this.setClass(),this.setAttr("placeholder")},activate:function(){this.$input.is(":visible")&&(this.$input.focus(),t.fn.editableutils.setCursorPosition(this.$input.get(0),this.$input.val().length),this.toggleClear&&this.toggleClear())},renderClear:function(){this.options.clear&&(this.$clear=t('<span class="editable-clear-x"></span>'),this.$input.after(this.$clear).css("padding-right",24).keyup(t.proxy(function(e){if(!~t.inArray(e.keyCode,[40,38,9,13,27])){clearTimeout(this.t);var i=this;this.t=setTimeout(function(){i.toggleClear(e)},100)}},this)).parent().css("position","relative"),this.$clear.click(t.proxy(this.clear,this)))},postrender:function(){},toggleClear:function(){if(this.$clear){var t=this.$input.val().length,e=this.$clear.is(":visible");t&&!e&&this.$clear.show(),!t&&e&&this.$clear.hide()}},clear:function(){this.$clear.hide(),this.$input.val("").focus()}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="text">',placeholder:null,clear:!0}),t.fn.editabletypes.text=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("textarea",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{render:function(){this.setClass(),this.setAttr("placeholder"),this.setAttr("rows"),this.$input.keydown(function(e){e.ctrlKey&&13===e.which&&t(this).closest("form").submit()})},activate:function(){t.fn.editabletypes.text.prototype.activate.call(this)}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{tpl:"<textarea></textarea>",inputclass:"input-large",placeholder:null,rows:7}),t.fn.editabletypes.textarea=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("select",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.list),t.extend(e.prototype,{renderList:function(){this.$input.empty();var e=function(i,n){var o;if(t.isArray(n))for(var a=0;a<n.length;a++)o={},n[a].children?(o.label=n[a].text,i.append(e(t("<optgroup>",o),n[a].children))):(o.value=n[a].value,n[a].disabled&&(o.disabled=!0),i.append(t("<option>",o).text(n[a].text)));return i};e(this.$input,this.sourceData),this.setClass(),this.$input.on("keydown.editable",function(e){13===e.which&&t(this).closest("form").submit()})},value2htmlFinal:function(e,i){var n="",o=t.fn.editableutils.itemsByValue(e,this.sourceData);o.length&&(n=o[0].text),t.fn.editabletypes.abstractinput.prototype.value2html.call(this,n,i)},autosubmit:function(){this.$input.off("keydown.editable").on("change.editable",function(){t(this).closest("form").submit()})}}),e.defaults=t.extend({},t.fn.editabletypes.list.defaults,{tpl:"<select></select>"}),t.fn.editabletypes.select=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("checklist",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.list),t.extend(e.prototype,{renderList:function(){var e;if(this.$tpl.empty(),t.isArray(this.sourceData)){for(var i=0;i<this.sourceData.length;i++)e=t("<label>").append(t("<input>",{type:"checkbox",value:this.sourceData[i].value})).append(t("<span>").text(" "+this.sourceData[i].text)),t("<div>").append(e).appendTo(this.$tpl);this.$input=this.$tpl.find('input[type="checkbox"]'),this.setClass()}},value2str:function(e){return t.isArray(e)?e.sort().join(t.trim(this.options.separator)):""},str2value:function(e){var i,n=null;return"string"==typeof e&&e.length?(i=new RegExp("\\s*"+t.trim(this.options.separator)+"\\s*"),n=e.split(i)):n=t.isArray(e)?e:[e],n},value2input:function(e){this.$input.prop("checked",!1),t.isArray(e)&&e.length&&this.$input.each(function(i,n){var o=t(n);t.each(e,function(t,e){o.val()==e&&o.prop("checked",!0)})})},input2value:function(){var e=[];return this.$input.filter(":checked").each(function(i,n){e.push(t(n).val())}),e},value2htmlFinal:function(e,i){var n=[],o=t.fn.editableutils.itemsByValue(e,this.sourceData),a=this.options.escape;o.length?(t.each(o,function(e,i){var o=a?t.fn.editableutils.escape(i.text):i.text;n.push(o)}),t(i).html(n.join("<br>"))):t(i).empty()},activate:function(){this.$input.first().focus()},autosubmit:function(){this.$input.on("keydown",function(e){13===e.which&&t(this).closest("form").submit()})}}),e.defaults=t.extend({},t.fn.editabletypes.list.defaults,{tpl:'<div class="editable-checklist"></div>',inputclass:null,separator:","}),t.fn.editabletypes.checklist=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("password",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.text),t.extend(e.prototype,{value2html:function(e,i){e?t(i).text("[hidden]"):t(i).empty()},html2value:function(){return null}}),e.defaults=t.extend({},t.fn.editabletypes.text.defaults,{tpl:'<input type="password">'}),t.fn.editabletypes.password=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("email",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.text),e.defaults=t.extend({},t.fn.editabletypes.text.defaults,{tpl:'<input type="email">'}),t.fn.editabletypes.email=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("url",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.text),e.defaults=t.extend({},t.fn.editabletypes.text.defaults,{tpl:'<input type="url">'}),t.fn.editabletypes.url=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("tel",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.text),e.defaults=t.extend({},t.fn.editabletypes.text.defaults,{tpl:'<input type="tel">'}),t.fn.editabletypes.tel=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("number",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.text),t.extend(e.prototype,{render:function(){e.superclass.render.call(this),this.setAttr("min"),this.setAttr("max"),this.setAttr("step")},postrender:function(){this.$clear&&this.$clear.css({right:24})}}),e.defaults=t.extend({},t.fn.editabletypes.text.defaults,{tpl:'<input type="number">',inputclass:"input-mini",min:null,max:null,step:null}),t.fn.editabletypes.number=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("range",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.number),t.extend(e.prototype,{render:function(){this.$input=this.$tpl.filter("input"),this.setClass(),this.setAttr("min"),this.setAttr("max"),this.setAttr("step"),this.$input.on("input",function(){t(this).siblings("output").text(t(this).val())})},activate:function(){this.$input.focus()}}),e.defaults=t.extend({},t.fn.editabletypes.number.defaults,{tpl:'<input type="range"><output style="width: 30px; display: inline-block"></output>',inputclass:"input-medium"}),t.fn.editabletypes.range=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("time",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{render:function(){this.setClass()}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="time">'}),t.fn.editabletypes.time=e}(window.jQuery),function(t){"use strict";var e=function(i){if(this.init("select2",i,e.defaults),i.select2=i.select2||{},this.sourceData=null,i.placeholder&&(i.select2.placeholder=i.placeholder),!i.select2.tags&&i.source){var n=i.source;t.isFunction(i.source)&&(n=i.source.call(i.scope)),"string"==typeof n?(i.select2.ajax=i.select2.ajax||{},i.select2.ajax.data||(i.select2.ajax.data=function(t){return{query:t}}),i.select2.ajax.results||(i.select2.ajax.results=function(t){return{results:t}}),i.select2.ajax.url=n):(this.sourceData=this.convertSource(n),i.select2.data=this.sourceData)}if(this.options.select2=t.extend({},e.defaults.select2,i.select2),this.isMultiple=this.options.select2.tags||this.options.select2.multiple,this.isRemote="ajax"in this.options.select2,this.idFunc=this.options.select2.id,"function"!=typeof this.idFunc){var o=this.idFunc||"id";this.idFunc=function(t){return t[o]}}this.formatSelection=this.options.select2.formatSelection,"function"!=typeof this.formatSelection&&(this.formatSelection=function(t){return t.text})};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{render:function(){this.setClass(),this.isRemote&&this.$input.on("select2-loaded",t.proxy(function(t){this.sourceData=t.items.results},this)),this.isMultiple&&this.$input.on("change",function(){t(this).closest("form").parent().triggerHandler("resize")})},value2html:function(i,n){var o,a="",s=this;this.options.select2.tags?o=i:this.sourceData&&(o=t.fn.editableutils.itemsByValue(i,this.sourceData,this.idFunc)),t.isArray(o)?(a=[],t.each(o,function(t,e){a.push(e&&"object"==typeof e?s.formatSelection(e):e)})):o&&(a=s.formatSelection(o)),a=t.isArray(a)?a.join(this.options.viewseparator):a,e.superclass.value2html.call(this,a,n)},html2value:function(t){return this.options.select2.tags?this.str2value(t,this.options.viewseparator):null},value2input:function(e){if(this.$input.data("select2")?this.$input.val(e).trigger("change",!0):(this.$input.val(e),this.$input.select2(this.options.select2)),this.isRemote&&!this.isMultiple&&!this.options.select2.initSelection){var i=this.options.select2.id,n=this.options.select2.formatSelection;if(!i&&!n){var o={id:e,text:t(this.options.scope).text()};this.$input.select2("data",o)}}},input2value:function(){return this.$input.select2("val")},str2value:function(e,i){if("string"!=typeof e||!this.isMultiple)return e;i=i||this.options.select2.separator||t.fn.select2.defaults.separator;var n,o,a;if(null===e||e.length<1)return null;for(n=e.split(i),o=0,a=n.length;a>o;o+=1)n[o]=t.trim(n[o]);return n},autosubmit:function(){this.$input.on("change",function(e,i){i||t(this).closest("form").submit()})},convertSource:function(e){if(t.isArray(e)&&e.length&&void 0!==e[0].value)for(var i=0;i<e.length;i++)void 0!==e[i].value&&(e[i].id=e[i].value,delete e[i].value);return e},destroy:function(){this.$input.data("select2")&&this.$input.select2("destroy")}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="hidden">',select2:null,placeholder:null,source:null,viewseparator:", "}),t.fn.editabletypes.select2=e}(window.jQuery),function(t){var e=function(e,i){return this.$element=t(e),this.$element.is("input")?(this.options=t.extend({},t.fn.combodate.defaults,i,this.$element.data()),void this.init()):void t.error("Combodate should be applied to INPUT element")};e.prototype={constructor:e,init:function(){this.map={day:["D","date"],month:["M","month"],year:["Y","year"],hour:["[Hh]","hours"],minute:["m","minutes"],second:["s","seconds"],ampm:["[Aa]",""]},this.$widget=t('<span class="combodate"></span>').html(this.getTemplate()),this.initCombos(),this.$widget.on("change","select",t.proxy(function(){this.$element.val(this.getValue())},this)),this.$widget.find("select").css("width","auto"),this.$element.hide().after(this.$widget),this.setValue(this.$element.val()||this.options.value)},getTemplate:function(){var e=this.options.template;return t.each(this.map,function(t,i){i=i[0];var n=new RegExp(i+"+"),o=i.length>1?i.substring(1,2):i;e=e.replace(n,"{"+o+"}")}),e=e.replace(/ /g,"&nbsp;"),t.each(this.map,function(t,i){i=i[0];var n=i.length>1?i.substring(1,2):i;e=e.replace("{"+n+"}",'<select class="'+t+'"></select>')}),e},initCombos:function(){var e=this;t.each(this.map,function(t){var i,n,o=e.$widget.find("."+t);o.length&&(e["$"+t]=o,i="fill"+t.charAt(0).toUpperCase()+t.slice(1),n=e[i](),e["$"+t].html(e.renderItems(n)))})},initItems:function(t){var e,i=[];if("name"===this.options.firstItem){e=moment.relativeTime||moment.langData()._relativeTime;var n="function"==typeof e[t]?e[t](1,!0,t,!1):e[t];n=n.split(" ").reverse()[0],i.push(["",n])}else"empty"===this.options.firstItem&&i.push(["",""]);return i},renderItems:function(t){for(var e=[],i=0;i<t.length;i++)e.push('<option value="'+t[i][0]+'">'+t[i][1]+"</option>");return e.join("\n")},fillDay:function(){var t,e,i=this.initItems("d"),n=-1!==this.options.template.indexOf("DD");for(e=1;31>=e;e++)t=n?this.leadZero(e):e,i.push([e,t]);return i},fillMonth:function(){var t,e,i=this.initItems("M"),n=-1!==this.options.template.indexOf("MMMM"),o=-1!==this.options.template.indexOf("MMM"),a=-1!==this.options.template.indexOf("MM");for(e=0;11>=e;e++)t=n?moment().date(1).month(e).format("MMMM"):o?moment().date(1).month(e).format("MMM"):a?this.leadZero(e+1):e+1,i.push([e,t]);return i},fillYear:function(){var t,e,i=[],n=-1!==this.options.template.indexOf("YYYY");for(e=this.options.maxYear;e>=this.options.minYear;e--)t=n?e:(e+"").substring(2),i[this.options.yearDescending?"push":"unshift"]([e,t]);return i=this.initItems("y").concat(i)},fillHour:function(){var t,e,i=this.initItems("h"),n=-1!==this.options.template.indexOf("h"),o=(-1!==this.options.template.indexOf("H"),-1!==this.options.template.toLowerCase().indexOf("hh")),a=n?1:0,s=n?12:23;for(e=a;s>=e;e++)t=o?this.leadZero(e):e,i.push([e,t]);return i},fillMinute:function(){var t,e,i=this.initItems("m"),n=-1!==this.options.template.indexOf("mm");for(e=0;59>=e;e+=this.options.minuteStep)t=n?this.leadZero(e):e,i.push([e,t]);return i},fillSecond:function(){var t,e,i=this.initItems("s"),n=-1!==this.options.template.indexOf("ss");for(e=0;59>=e;e+=this.options.secondStep)t=n?this.leadZero(e):e,i.push([e,t]);return i},fillAmpm:function(){var t=-1!==this.options.template.indexOf("a"),e=(-1!==this.options.template.indexOf("A"),[["am",t?"am":"AM"],["pm",t?"pm":"PM"]]);return e},getValue:function(e){var i,n={},o=this,a=!1;return t.each(this.map,function(t){if("ampm"!==t){var e="day"===t?1:0;return n[t]=o["$"+t]?parseInt(o["$"+t].val(),10):e,isNaN(n[t])?(a=!0,!1):void 0}}),a?"":(this.$ampm&&(n.hour=12===n.hour?"am"===this.$ampm.val()?0:12:"am"===this.$ampm.val()?n.hour:n.hour+12),i=moment([n.year,n.month,n.day,n.hour,n.minute,n.second]),this.highlight(i),e=void 0===e?this.options.format:e,null===e?i.isValid()?i:null:i.isValid()?i.format(e):"")},setValue:function(e){function i(e,i){var n={};return e.children("option").each(function(e,o){var a,s=t(o).attr("value");""!==s&&(a=Math.abs(s-i),("undefined"==typeof n.distance||a<n.distance)&&(n={value:s,distance:a}))}),n.value}if(e){var n="string"==typeof e?moment(e,this.options.format):moment(e),o=this,a={};n.isValid()&&(t.each(this.map,function(t,e){"ampm"!==t&&(a[t]=n[e[1]]())}),this.$ampm&&(a.hour>=12?(a.ampm="pm",a.hour>12&&(a.hour-=12)):(a.ampm="am",0===a.hour&&(a.hour=12))),t.each(a,function(t,e){o["$"+t]&&("minute"===t&&o.options.minuteStep>1&&o.options.roundTime&&(e=i(o["$"+t],e)),"second"===t&&o.options.secondStep>1&&o.options.roundTime&&(e=i(o["$"+t],e)),o["$"+t].val(e))}),this.$element.val(n.format(this.options.format)))}},highlight:function(t){t.isValid()?this.options.errorClass?this.$widget.removeClass(this.options.errorClass):this.$widget.find("select").css("border-color",this.borderColor):this.options.errorClass?this.$widget.addClass(this.options.errorClass):(this.borderColor||(this.borderColor=this.$widget.find("select").css("border-color")),this.$widget.find("select").css("border-color","red"))},leadZero:function(t){return 9>=t?"0"+t:t},destroy:function(){this.$widget.remove(),this.$element.removeData("combodate").show()}},t.fn.combodate=function(i){var n,o=Array.apply(null,arguments);return o.shift(),"getValue"===i&&this.length&&(n=this.eq(0).data("combodate"))?n.getValue.apply(n,o):this.each(function(){var n=t(this),a=n.data("combodate"),s="object"==typeof i&&i;a||n.data("combodate",a=new e(this,s)),"string"==typeof i&&"function"==typeof a[i]&&a[i].apply(a,o)})},t.fn.combodate.defaults={format:"DD-MM-YYYY HH:mm",template:"D / MMM / YYYY   H : mm",value:null,minYear:1970,maxYear:2015,yearDescending:!0,minuteStep:5,secondStep:1,firstItem:"empty",errorClass:null,roundTime:!0}}(window.jQuery),function(t){"use strict";var e=function(i){this.init("combodate",i,e.defaults),this.options.viewformat||(this.options.viewformat=this.options.format),i.combodate=t.fn.editableutils.tryParseJson(i.combodate,!0),this.options.combodate=t.extend({},e.defaults.combodate,i.combodate,{format:this.options.format,template:this.options.template})};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{render:function(){this.$input.combodate(this.options.combodate),"bs3"===t.fn.editableform.engine&&this.$input.siblings().find("select").addClass("form-control"),this.options.inputclass&&this.$input.siblings().find("select").addClass(this.options.inputclass)},value2html:function(t,i){var n=t?t.format(this.options.viewformat):"";e.superclass.value2html.call(this,n,i)},html2value:function(t){return t?moment(t,this.options.viewformat):null},value2str:function(t){return t?t.format(this.options.format):""},str2value:function(t){return t?moment(t,this.options.format):null},value2submit:function(t){return this.value2str(t)},value2input:function(t){this.$input.combodate("setValue",t)},input2value:function(){return this.$input.combodate("getValue",null)},activate:function(){this.$input.siblings(".combodate").find("select").eq(0).focus()},autosubmit:function(){}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="text">',inputclass:null,format:"YYYY-MM-DD",viewformat:null,template:"D / MMM / YYYY",combodate:null}),t.fn.editabletypes.combodate=e}(window.jQuery),function(t){"use strict";var e=t.fn.editableform.Constructor.prototype.initInput;t.extend(t.fn.editableform.Constructor.prototype,{initTemplate:function(){this.$form=t(t.fn.editableform.template),this.$form.find(".control-group").addClass("form-group"),this.$form.find(".editable-error-block").addClass("help-block")},initInput:function(){e.apply(this);var i=null===this.input.options.inputclass||this.input.options.inputclass===!1,n="input-sm",o="text,select,textarea,password,email,url,tel,number,range,time,typeaheadjs".split(",");~t.inArray(this.input.type,o)&&(this.input.$input.addClass("form-control"),i&&(this.input.options.inputclass=n,this.input.$input.addClass(n)));for(var a=this.$form.find(".editable-buttons"),s=i?[n]:this.input.options.inputclass.split(" "),r=0;r<s.length;r++)"input-lg"===s[r].toLowerCase()&&a.find("button").removeClass("btn-sm").addClass("btn-lg")}}),t.fn.editableform.buttons='<button type="submit" class="btn btn-primary btn-sm editable-submit"><i class="glyphicon fa fa-check page-edit-button"></i></button><button type="button" class="btn btn-default btn-sm editable-cancel"><i class="glyphicon fa fa-close page-edit-button"></i></button>',t.fn.editableform.errorGroupClass="has-error",t.fn.editableform.errorBlockClass=null,t.fn.editableform.engine="bs3"}(window.jQuery),function(t){"use strict";t.extend(t.fn.editableContainer.Popup.prototype,{containerName:"popover",containerDataName:"bs.popover",innerCss:".popover-content",defaults:t.fn.popover.Constructor.DEFAULTS,initContainer:function(){t.extend(this.containerOptions,{trigger:"manual",selector:!1,content:" ",template:this.defaults.template});var e;this.$element.data("template")&&(e=this.$element.data("template"),this.$element.removeData("template")),this.call(this.containerOptions),e&&this.$element.data("template",e)},innerShow:function(){this.call("show")},innerHide:function(){this.call("hide")},innerDestroy:function(){this.call("destroy")},setContainerOption:function(t,e){this.container().options[t]=e},setPosition:function(){!function(){var t=this.tip(),e="function"==typeof this.options.placement?this.options.placement.call(this,t[0],this.$element[0]):this.options.placement,i=this.getPosition(),n=t[0].offsetWidth,o=t[0].offsetHeight,a=this.getCalculatedOffset(e,i,n,o);this.applyPlacement(a,e)}.call(this.container())}})}(window.jQuery),function(t){function e(){return new Date(Date.UTC.apply(Date,arguments))}function i(e,i){var n,o=t(e).data(),a={},s=new RegExp("^"+i.toLowerCase()+"([A-Z])"),i=new RegExp("^"+i.toLowerCase());for(var r in o)i.test(r)&&(n=r.replace(s,function(t,e){return e.toLowerCase()}),a[n]=o[r]);return a}function n(e){var i={};if(d[e]||(e=e.split("-")[0],d[e])){var n=d[e];return t.each(u,function(t,e){e in n&&(i[e]=n[e])}),i}}var o=function(e,i){this._process_options(i),this.element=t(e),this.isInline=!1,this.isInput=this.element.is("input"),this.component=!!this.element.is(".date")&&this.element.find(".add-on, .btn"),this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.picker=t(c.template),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&(this.picker.addClass("datepicker-rtl"),this.picker.find(".prev i, .next i").toggleClass("icon-arrow-left icon-arrow-right")),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",function(t,e){return parseInt(e)+1}),this._allow_update=!1,this.setStartDate(this.o.startDate),this.setEndDate(this.o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};o.prototype={constructor:o,_process_options:function(e){this._o=t.extend({},this._o,e);var i=this.o=t.extend({},this._o),n=i.language;switch(d[n]||(n=n.split("-")[0],d[n]||(n=l.language)),i.language=n,i.startView){case 2:case"decade":i.startView=2;break;case 1:case"year":i.startView=1;break;default:i.startView=0}switch(i.minViewMode){case 1:case"months":i.minViewMode=1;break;case 2:case"years":i.minViewMode=2;break;default:i.minViewMode=0}i.startView=Math.max(i.startView,i.minViewMode),i.weekStart%=7,i.weekEnd=(i.weekStart+6)%7;var o=c.parseFormat(i.format);i.startDate!==-1/0&&(i.startDate=c.parseDate(i.startDate,o,i.language)),1/0!==i.endDate&&(i.endDate=c.parseDate(i.endDate,o,i.language)),i.daysOfWeekDisabled=i.daysOfWeekDisabled||[],t.isArray(i.daysOfWeekDisabled)||(i.daysOfWeekDisabled=i.daysOfWeekDisabled.split(/[,\s]*/)),i.daysOfWeekDisabled=t.map(i.daysOfWeekDisabled,function(t){return parseInt(t,10)})},_events:[],_secondaryEvents:[],_applyEvents:function(t){for(var e,i,n=0;n<t.length;n++)e=t[n][0],i=t[n][1],e.on(i)},_unapplyEvents:function(t){for(var e,i,n=0;n<t.length;n++)e=t[n][0],i=t[n][1],e.off(i)},_buildEvents:function(){this.isInput?this._events=[[this.element,{focus:t.proxy(this.show,this),keyup:t.proxy(this.update,this),keydown:t.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:t.proxy(this.show,this),keyup:t.proxy(this.update,this),keydown:t.proxy(this.keydown,this)}],[this.component,{click:t.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:t.proxy(this.show,this)}]],this._secondaryEvents=[[this.picker,{click:t.proxy(this.click,this)}],[t(window),{resize:t.proxy(this.place,this)}],[t(document),{mousedown:t.proxy(function(t){this.element.is(t.target)||this.element.find(t.target).size()||this.picker.is(t.target)||this.picker.find(t.target).size()||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(e,i){var n=i||this.date,o=new Date(n.getTime()+6e4*n.getTimezoneOffset());this.element.trigger({type:e,date:o,format:t.proxy(function(t){var e=t||this.o.format;return c.formatDate(n,e,this.o.language)},this)})},show:function(t){this.isInline||this.picker.appendTo("body"),this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.place(),this._attachSecondaryEvents(),t&&t.preventDefault(),this._trigger("show")},hide:function(){this.isInline||this.picker.is(":visible")&&(this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"))},remove:function(){this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date},getDate:function(){var t=this.getUTCDate();return new Date(t.getTime()+6e4*t.getTimezoneOffset())},getUTCDate:function(){return this.date},setDate:function(t){this.setUTCDate(new Date(t.getTime()-6e4*t.getTimezoneOffset()))},setUTCDate:function(t){this.date=t,this.setValue()},setValue:function(){var t=this.getFormattedDate();this.isInput?this.element.val(t):this.component&&this.element.find("input").val(t)},getFormattedDate:function(t){return void 0===t&&(t=this.o.format),c.formatDate(this.date,t,this.o.language)},setStartDate:function(t){this._process_options({startDate:t}),this.update(),this.updateNavArrows()},setEndDate:function(t){this._process_options({endDate:t}),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(t){this._process_options({daysOfWeekDisabled:t}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){
var e=parseInt(this.element.parents().filter(function(){return"auto"!=t(this).css("z-index")}).first().css("z-index"))+10,i=this.component?this.component.parent().offset():this.element.offset(),n=this.component?this.component.outerHeight(!0):this.element.outerHeight(!0);this.picker.css({top:i.top+n,left:i.left,zIndex:e})}},_allow_update:!0,update:function(){if(this._allow_update){var t,e=!1;arguments&&arguments.length&&("string"==typeof arguments[0]||arguments[0]instanceof Date)?(t=arguments[0],e=!0):(t=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),delete this.element.data().date),this.date=c.parseDate(t,this.o.format,this.o.language),e&&this.setValue(),this.viewDate=this.date<this.o.startDate?new Date(this.o.startDate):this.date>this.o.endDate?new Date(this.o.endDate):new Date(this.date),this.fill()}},fillDow:function(){var t=this.o.weekStart,e="<tr>";if(this.o.calendarWeeks){var i='<th class="cw">&nbsp;</th>';e+=i,this.picker.find(".datepicker-days thead tr:first-child").prepend(i)}for(;t<this.o.weekStart+7;)e+='<th class="dow">'+d[this.o.language].daysMin[t++%7]+"</th>";e+="</tr>",this.picker.find(".datepicker-days thead").append(e)},fillMonths:function(){for(var t="",e=0;12>e;)t+='<span class="month">'+d[this.o.language].monthsShort[e++]+"</span>";this.picker.find(".datepicker-months td").html(t)},setRange:function(e){e&&e.length?this.range=t.map(e,function(t){return t.valueOf()}):delete this.range,this.fill()},getClassNames:function(e){var i=[],n=this.viewDate.getUTCFullYear(),o=this.viewDate.getUTCMonth(),a=this.date.valueOf(),s=new Date;return e.getUTCFullYear()<n||e.getUTCFullYear()==n&&e.getUTCMonth()<o?i.push("old"):(e.getUTCFullYear()>n||e.getUTCFullYear()==n&&e.getUTCMonth()>o)&&i.push("new"),this.o.todayHighlight&&e.getUTCFullYear()==s.getFullYear()&&e.getUTCMonth()==s.getMonth()&&e.getUTCDate()==s.getDate()&&i.push("today"),a&&e.valueOf()==a&&i.push("active"),(e.valueOf()<this.o.startDate||e.valueOf()>this.o.endDate||-1!==t.inArray(e.getUTCDay(),this.o.daysOfWeekDisabled))&&i.push("disabled"),this.range&&(e>this.range[0]&&e<this.range[this.range.length-1]&&i.push("range"),-1!=t.inArray(e.valueOf(),this.range)&&i.push("selected")),i},fill:function(){var i,n=new Date(this.viewDate),o=n.getUTCFullYear(),a=n.getUTCMonth(),s=this.o.startDate!==-1/0?this.o.startDate.getUTCFullYear():-1/0,r=this.o.startDate!==-1/0?this.o.startDate.getUTCMonth():-1/0,l=1/0!==this.o.endDate?this.o.endDate.getUTCFullYear():1/0,u=1/0!==this.o.endDate?this.o.endDate.getUTCMonth():1/0;this.date&&this.date.valueOf(),this.picker.find(".datepicker-days thead th.datepicker-switch").text(d[this.o.language].months[a]+" "+o),this.picker.find("tfoot th.today").text(d[this.o.language].today).toggle(this.o.todayBtn!==!1),this.picker.find("tfoot th.clear").text(d[this.o.language].clear).toggle(this.o.clearBtn!==!1),this.updateNavArrows(),this.fillMonths();var h=e(o,a-1,28,0,0,0,0),p=c.getDaysInMonth(h.getUTCFullYear(),h.getUTCMonth());h.setUTCDate(p),h.setUTCDate(p-(h.getUTCDay()-this.o.weekStart+7)%7);var f=new Date(h);f.setUTCDate(f.getUTCDate()+42),f=f.valueOf();for(var m,v=[];h.valueOf()<f;){if(h.getUTCDay()==this.o.weekStart&&(v.push("<tr>"),this.o.calendarWeeks)){var g=new Date(+h+864e5*((this.o.weekStart-h.getUTCDay()-7)%7)),b=new Date(+g+864e5*((11-g.getUTCDay())%7)),y=new Date(+(y=e(b.getUTCFullYear(),0,1))+864e5*((11-y.getUTCDay())%7)),w=(b-y)/864e5/7+1;v.push('<td class="cw">'+w+"</td>")}m=this.getClassNames(h),m.push("day");var k=this.o.beforeShowDay(h);void 0===k?k={}:"boolean"==typeof k?k={enabled:k}:"string"==typeof k&&(k={classes:k}),k.enabled===!1&&m.push("disabled"),k.classes&&(m=m.concat(k.classes.split(/\s+/))),k.tooltip&&(i=k.tooltip),m=t.unique(m),v.push('<td class="'+m.join(" ")+'"'+(i?' title="'+i+'"':"")+">"+h.getUTCDate()+"</td>"),h.getUTCDay()==this.o.weekEnd&&v.push("</tr>"),h.setUTCDate(h.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(v.join(""));var C=this.date&&this.date.getUTCFullYear(),x=this.picker.find(".datepicker-months").find("th:eq(1)").text(o).end().find("span").removeClass("active");C&&C==o&&x.eq(this.date.getUTCMonth()).addClass("active"),(s>o||o>l)&&x.addClass("disabled"),o==s&&x.slice(0,r).addClass("disabled"),o==l&&x.slice(u+1).addClass("disabled"),v="",o=10*parseInt(o/10,10);var D=this.picker.find(".datepicker-years").find("th:eq(1)").text(o+"-"+(o+9)).end().find("td");o-=1;for(var T=-1;11>T;T++)v+='<span class="year'+(-1==T?" old":10==T?" new":"")+(C==o?" active":"")+(s>o||o>l?" disabled":"")+'">'+o+"</span>",o+=1;D.html(v)},updateNavArrows:function(){if(this._allow_update){var t=new Date(this.viewDate),e=t.getUTCFullYear(),i=t.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-1/0&&e<=this.o.startDate.getUTCFullYear()&&i<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),1/0!==this.o.endDate&&e>=this.o.endDate.getUTCFullYear()&&i>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:this.o.startDate!==-1/0&&e<=this.o.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),1/0!==this.o.endDate&&e>=this.o.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}}},click:function(i){i.preventDefault();var n=t(i.target).closest("span, td, th");if(1==n.length)switch(n[0].nodeName.toLowerCase()){case"th":switch(n[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var o=c.modes[this.viewMode].navStep*("prev"==n[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,o);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,o)}this.fill();break;case"today":var a=new Date;a=e(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0),this.showMode(-2);var s="linked"==this.o.todayBtn?null:"view";this._setDate(a,s);break;case"clear":var r;this.isInput?r=this.element:this.component&&(r=this.element.find("input")),r&&r.val("").change(),this._trigger("changeDate"),this.update(),this.o.autoclose&&this.hide()}break;case"span":if(!n.is(".disabled")){if(this.viewDate.setUTCDate(1),n.is(".month")){var l=1,u=n.parent().find("span").index(n),d=this.viewDate.getUTCFullYear();this.viewDate.setUTCMonth(u),this._trigger("changeMonth",this.viewDate),1===this.o.minViewMode&&this._setDate(e(d,u,l,0,0,0,0))}else{var d=parseInt(n.text(),10)||0,l=1,u=0;this.viewDate.setUTCFullYear(d),this._trigger("changeYear",this.viewDate),2===this.o.minViewMode&&this._setDate(e(d,u,l,0,0,0,0))}this.showMode(-1),this.fill()}break;case"td":if(n.is(".day")&&!n.is(".disabled")){var l=parseInt(n.text(),10)||1,d=this.viewDate.getUTCFullYear(),u=this.viewDate.getUTCMonth();n.is(".old")?0===u?(u=11,d-=1):u-=1:n.is(".new")&&(11==u?(u=0,d+=1):u+=1),this._setDate(e(d,u,l,0,0,0,0))}}},_setDate:function(t,e){e&&"date"!=e||(this.date=new Date(t)),e&&"view"!=e||(this.viewDate=new Date(t)),this.fill(),this.setValue(),this._trigger("changeDate");var i;this.isInput?i=this.element:this.component&&(i=this.element.find("input")),i&&(i.change(),!this.o.autoclose||e&&"date"!=e||this.hide())},moveMonth:function(t,e){if(!e)return t;var i,n,o=new Date(t.valueOf()),a=o.getUTCDate(),s=o.getUTCMonth(),r=Math.abs(e);if(e=e>0?1:-1,1==r)n=-1==e?function(){return o.getUTCMonth()==s}:function(){return o.getUTCMonth()!=i},i=s+e,o.setUTCMonth(i),(0>i||i>11)&&(i=(i+12)%12);else{for(var l=0;r>l;l++)o=this.moveMonth(o,e);i=o.getUTCMonth(),o.setUTCDate(a),n=function(){return i!=o.getUTCMonth()}}for(;n();)o.setUTCDate(--a),o.setUTCMonth(i);return o},moveYear:function(t,e){return this.moveMonth(t,12*e)},dateWithinRange:function(t){return t>=this.o.startDate&&t<=this.o.endDate},keydown:function(t){if(this.picker.is(":not(:visible)"))return void(27==t.keyCode&&this.show());var e,i,n,o=!1;switch(t.keyCode){case 27:this.hide(),t.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;e=37==t.keyCode?-1:1,t.ctrlKey?(i=this.moveYear(this.date,e),n=this.moveYear(this.viewDate,e)):t.shiftKey?(i=this.moveMonth(this.date,e),n=this.moveMonth(this.viewDate,e)):(i=new Date(this.date),i.setUTCDate(this.date.getUTCDate()+e),n=new Date(this.viewDate),n.setUTCDate(this.viewDate.getUTCDate()+e)),this.dateWithinRange(i)&&(this.date=i,this.viewDate=n,this.setValue(),this.update(),t.preventDefault(),o=!0);break;case 38:case 40:if(!this.o.keyboardNavigation)break;e=38==t.keyCode?-1:1,t.ctrlKey?(i=this.moveYear(this.date,e),n=this.moveYear(this.viewDate,e)):t.shiftKey?(i=this.moveMonth(this.date,e),n=this.moveMonth(this.viewDate,e)):(i=new Date(this.date),i.setUTCDate(this.date.getUTCDate()+7*e),n=new Date(this.viewDate),n.setUTCDate(this.viewDate.getUTCDate()+7*e)),this.dateWithinRange(i)&&(this.date=i,this.viewDate=n,this.setValue(),this.update(),t.preventDefault(),o=!0);break;case 13:this.hide(),t.preventDefault();break;case 9:this.hide()}if(o){this._trigger("changeDate");var a;this.isInput?a=this.element:this.component&&(a=this.element.find("input")),a&&a.change()}},showMode:function(t){t&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+t))),this.picker.find(">div").hide().filter(".datepicker-"+c.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()}};var a=function(e,i){this.element=t(e),this.inputs=t.map(i.inputs,function(t){return t.jquery?t[0]:t}),delete i.inputs,t(this.inputs).datepicker(i).bind("changeDate",t.proxy(this.dateUpdated,this)),this.pickers=t.map(this.inputs,function(e){return t(e).data("datepicker")}),this.updateDates()};a.prototype={updateDates:function(){this.dates=t.map(this.pickers,function(t){return t.date}),this.updateRanges()},updateRanges:function(){var e=t.map(this.dates,function(t){return t.valueOf()});t.each(this.pickers,function(t,i){i.setRange(e)})},dateUpdated:function(e){var i=t(e.target).data("datepicker"),n=i.getUTCDate(),o=t.inArray(e.target,this.inputs),a=this.inputs.length;if(-1!=o){if(n<this.dates[o])for(;o>=0&&n<this.dates[o];)this.pickers[o--].setUTCDate(n);else if(n>this.dates[o])for(;a>o&&n>this.dates[o];)this.pickers[o++].setUTCDate(n);this.updateDates()}},remove:function(){t.map(this.pickers,function(t){t.remove()}),delete this.element.data().datepicker}};var s=t.fn.datepicker,r=t.fn.datepicker=function(e){var s=Array.apply(null,arguments);s.shift();var r;return this.each(function(){var u=t(this),d=u.data("datepicker"),c="object"==typeof e&&e;if(!d){var h=i(this,"date"),p=t.extend({},l,h,c),f=n(p.language),m=t.extend({},l,f,h,c);if(u.is(".input-daterange")||m.inputs){var v={inputs:m.inputs||u.find("input").toArray()};u.data("datepicker",d=new a(this,t.extend(m,v)))}else u.data("datepicker",d=new o(this,m))}return("string"!=typeof e||"function"!=typeof d[e]||(r=d[e].apply(d,s),void 0===r))&&void 0}),void 0!==r?r:this},l=t.fn.datepicker.defaults={autoclose:!1,beforeShowDay:t.noop,calendarWeeks:!1,clearBtn:!1,daysOfWeekDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,rtl:!1,startDate:-1/0,startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0},u=t.fn.datepicker.locale_opts=["format","rtl","weekStart"];t.fn.datepicker.Constructor=o;var d=t.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}},c={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(t){return 0===t%4&&0!==t%100||0===t%400},getDaysInMonth:function(t,e){return[31,c.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(t){var e=t.replace(this.validParts,"\0").split("\0"),i=t.match(this.validParts);if(!e||!e.length||!i||0===i.length)throw new Error("Invalid date format.");return{separators:e,parts:i}},parseDate:function(i,n,a){if(i instanceof Date)return i;if("string"==typeof n&&(n=c.parseFormat(n)),/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(i)){var s,r,l=/([\-+]\d+)([dmwy])/,u=i.match(/([\-+]\d+)([dmwy])/g);i=new Date;for(var h=0;h<u.length;h++)switch(s=l.exec(u[h]),r=parseInt(s[1]),s[2]){case"d":i.setUTCDate(i.getUTCDate()+r);break;case"m":i=o.prototype.moveMonth.call(o.prototype,i,r);break;case"w":i.setUTCDate(i.getUTCDate()+7*r);break;case"y":i=o.prototype.moveYear.call(o.prototype,i,r)}return e(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate(),0,0,0)}var p,f,s,u=i&&i.match(this.nonpunctuation)||[],i=new Date,m={},v=["yyyy","yy","M","MM","m","mm","d","dd"],g={yyyy:function(t,e){return t.setUTCFullYear(e)},yy:function(t,e){return t.setUTCFullYear(2e3+e)},m:function(t,e){for(e-=1;0>e;)e+=12;for(e%=12,t.setUTCMonth(e);t.getUTCMonth()!=e;)t.setUTCDate(t.getUTCDate()-1);return t},d:function(t,e){return t.setUTCDate(e)}};g.M=g.MM=g.mm=g.m,g.dd=g.d,i=e(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0);var b=n.parts.slice();if(u.length!=b.length&&(b=t(b).filter(function(e,i){return-1!==t.inArray(i,v)}).toArray()),u.length==b.length){for(var h=0,y=b.length;y>h;h++){if(p=parseInt(u[h],10),s=b[h],isNaN(p))switch(s){case"MM":f=t(d[a].months).filter(function(){var t=this.slice(0,u[h].length),e=u[h].slice(0,t.length);return t==e}),p=t.inArray(f[0],d[a].months)+1;break;case"M":f=t(d[a].monthsShort).filter(function(){var t=this.slice(0,u[h].length),e=u[h].slice(0,t.length);return t==e}),p=t.inArray(f[0],d[a].monthsShort)+1}m[s]=p}for(var w,h=0;h<v.length;h++)w=v[h],w in m&&!isNaN(m[w])&&g[w](i,m[w])}return i},formatDate:function(e,i,n){"string"==typeof i&&(i=c.parseFormat(i));var o={d:e.getUTCDate(),D:d[n].daysShort[e.getUTCDay()],DD:d[n].days[e.getUTCDay()],m:e.getUTCMonth()+1,M:d[n].monthsShort[e.getUTCMonth()],MM:d[n].months[e.getUTCMonth()],yy:e.getUTCFullYear().toString().substring(2),yyyy:e.getUTCFullYear()};o.dd=(o.d<10?"0":"")+o.d,o.mm=(o.m<10?"0":"")+o.m;for(var e=[],a=t.extend([],i.separators),s=0,r=i.parts.length;r>=s;s++)a.length&&e.push(a.shift()),e.push(o[i.parts[s]]);return e.join("")},headTemplate:'<thead><tr><th class="prev"><i class="icon-arrow-left"/></th><th colspan="5" class="datepicker-switch"></th><th class="next"><i class="icon-arrow-right"/></th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};c.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+c.headTemplate+"<tbody></tbody>"+c.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+c.headTemplate+c.contTemplate+c.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+c.headTemplate+c.contTemplate+c.footTemplate+"</table></div></div>",t.fn.datepicker.DPGlobal=c,t.fn.datepicker.noConflict=function(){return t.fn.datepicker=s,this},t(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(e){var i=t(this);i.data("datepicker")||(e.preventDefault(),r.call(i,"show"))}),t(function(){r.call(t('[data-provide="datepicker-inline"]'))})}(window.jQuery),function(t){"use strict";t.fn.bdatepicker=t.fn.datepicker.noConflict(),t.fn.datepicker||(t.fn.datepicker=t.fn.bdatepicker);var e=function(t){this.init("date",t,e.defaults),this.initPicker(t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{initPicker:function(e,i){this.options.viewformat||(this.options.viewformat=this.options.format),e.datepicker=t.fn.editableutils.tryParseJson(e.datepicker,!0),this.options.datepicker=t.extend({},i.datepicker,e.datepicker,{format:this.options.viewformat}),this.options.datepicker.language=this.options.datepicker.language||"en",this.dpg=t.fn.bdatepicker.DPGlobal,this.parsedFormat=this.dpg.parseFormat(this.options.format),this.parsedViewFormat=this.dpg.parseFormat(this.options.viewformat)},render:function(){this.$input.bdatepicker(this.options.datepicker),this.options.clear&&(this.$clear=t('<a href="#"></a>').html(this.options.clear).click(t.proxy(function(t){t.preventDefault(),t.stopPropagation(),this.clear()},this)),this.$tpl.parent().append(t('<div class="editable-clear">').append(this.$clear)))},value2html:function(t,i){var n=t?this.dpg.formatDate(t,this.parsedViewFormat,this.options.datepicker.language):"";e.superclass.value2html.call(this,n,i)},html2value:function(t){return this.parseDate(t,this.parsedViewFormat)},value2str:function(t){return t?this.dpg.formatDate(t,this.parsedFormat,this.options.datepicker.language):""},str2value:function(t){return this.parseDate(t,this.parsedFormat)},value2submit:function(t){return this.value2str(t)},value2input:function(t){this.$input.bdatepicker("update",t)},input2value:function(){return this.$input.data("datepicker").date},activate:function(){},clear:function(){this.$input.data("datepicker").date=null,this.$input.find(".active").removeClass("active"),this.options.showbuttons||this.$input.closest("form").submit()},autosubmit:function(){this.$input.on("mouseup",".day",function(e){if(!t(e.currentTarget).is(".old")&&!t(e.currentTarget).is(".new")){var i=t(this).closest("form");setTimeout(function(){i.submit()},200)}})},parseDate:function(t,e){var i,n=null;return t&&(n=this.dpg.parseDate(t,e,this.options.datepicker.language),"string"==typeof t&&(i=this.dpg.formatDate(n,e,this.options.datepicker.language),t!==i&&(n=null))),n}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{tpl:'<div class="editable-date well"></div>',inputclass:null,format:"yyyy-mm-dd",viewformat:null,datepicker:{weekStart:0,startView:0,minViewMode:0,autoclose:!1},clear:"&times; clear"}),t.fn.editabletypes.date=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("datefield",t,e.defaults),this.initPicker(t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.date),t.extend(e.prototype,{render:function(){this.$input=this.$tpl.find("input"),this.setClass(),this.setAttr("placeholder"),this.$tpl.bdatepicker(this.options.datepicker),this.$input.off("focus keydown"),this.$input.keyup(t.proxy(function(){this.$tpl.removeData("date"),this.$tpl.bdatepicker("update")},this))},value2input:function(t){this.$input.val(t?this.dpg.formatDate(t,this.parsedViewFormat,this.options.datepicker.language):""),this.$tpl.bdatepicker("update")},input2value:function(){return this.html2value(this.$input.val())},activate:function(){t.fn.editabletypes.text.prototype.activate.call(this)},autosubmit:function(){}}),e.defaults=t.extend({},t.fn.editabletypes.date.defaults,{tpl:'<div class="input-append date"><input type="text"/><span class="add-on"><i class="icon-th"></i></span></div>',inputclass:"input-small",datepicker:{weekStart:0,startView:0,minViewMode:0,autoclose:!0}}),t.fn.editabletypes.datefield=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("datetime",t,e.defaults),this.initPicker(t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{initPicker:function(e,i){this.options.viewformat||(this.options.viewformat=this.options.format),e.datetimepicker=t.fn.editableutils.tryParseJson(e.datetimepicker,!0),this.options.datetimepicker=t.extend({},i.datetimepicker,e.datetimepicker,{format:this.options.viewformat}),this.options.datetimepicker.language=this.options.datetimepicker.language||"en",this.dpg=t.fn.datetimepicker.DPGlobal,this.parsedFormat=this.dpg.parseFormat(this.options.format,this.options.formatType),this.parsedViewFormat=this.dpg.parseFormat(this.options.viewformat,this.options.formatType)},render:function(){this.$input.datetimepicker(this.options.datetimepicker),this.$input.on("changeMode",function(){var e=t(this).closest("form").parent();setTimeout(function(){e.triggerHandler("resize")},0)}),this.options.clear&&(this.$clear=t('<a href="#"></a>').html(this.options.clear).click(t.proxy(function(t){t.preventDefault(),t.stopPropagation(),this.clear()},this)),this.$tpl.parent().append(t('<div class="editable-clear">').append(this.$clear)))},value2html:function(t,i){var n=t?this.dpg.formatDate(this.toUTC(t),this.parsedViewFormat,this.options.datetimepicker.language,this.options.formatType):"";return i?void e.superclass.value2html.call(this,n,i):n},html2value:function(t){var e=this.parseDate(t,this.parsedViewFormat);return e?this.fromUTC(e):null},value2str:function(t){return t?this.dpg.formatDate(this.toUTC(t),this.parsedFormat,this.options.datetimepicker.language,this.options.formatType):""},str2value:function(t){var e=this.parseDate(t,this.parsedFormat);return e?this.fromUTC(e):null},value2submit:function(t){return this.value2str(t)},value2input:function(t){t&&this.$input.data("datetimepicker").setDate(t)},input2value:function(){var t=this.$input.data("datetimepicker");return t.date?t.getDate():null},activate:function(){},clear:function(){this.$input.data("datetimepicker").date=null,this.$input.find(".active").removeClass("active"),this.options.showbuttons||this.$input.closest("form").submit()},autosubmit:function(){this.$input.on("mouseup",".minute",function(){var e=t(this).closest("form");setTimeout(function(){e.submit()},200)})},toUTC:function(t){return t?new Date(t.valueOf()-6e4*t.getTimezoneOffset()):t},fromUTC:function(t){return t?new Date(t.valueOf()+6e4*t.getTimezoneOffset()):t},parseDate:function(t,e){var i,n=null;return t&&(n=this.dpg.parseDate(t,e,this.options.datetimepicker.language,this.options.formatType),"string"==typeof t&&(i=this.dpg.formatDate(n,e,this.options.datetimepicker.language,this.options.formatType),t!==i&&(n=null))),n}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{tpl:'<div class="editable-date well"></div>',inputclass:null,format:"yyyy-mm-dd hh:ii",formatType:"standard",viewformat:null,datetimepicker:{todayHighlight:!1,autoclose:!1},clear:"&times; clear"}),t.fn.editabletypes.datetime=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("datetimefield",t,e.defaults),this.initPicker(t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.datetime),t.extend(e.prototype,{render:function(){this.$input=this.$tpl.find("input"),this.setClass(),this.setAttr("placeholder"),this.$tpl.datetimepicker(this.options.datetimepicker),this.$input.off("focus keydown"),this.$input.keyup(t.proxy(function(){this.$tpl.removeData("date"),this.$tpl.datetimepicker("update")},this))},value2input:function(t){this.$input.val(this.value2html(t)),this.$tpl.datetimepicker("update")},input2value:function(){return this.html2value(this.$input.val())},activate:function(){t.fn.editabletypes.text.prototype.activate.call(this)},autosubmit:function(){}}),e.defaults=t.extend({},t.fn.editabletypes.datetime.defaults,{tpl:'<div class="input-append date"><input type="text"/><span class="add-on"><i class="icon-th"></i></span></div>',inputclass:"input-medium",datetimepicker:{todayHighlight:!1,autoclose:!0}}),t.fn.editabletypes.datetimefield=e}(window.jQuery),$.fn.editable.defaults.mode="inline",$(document).ready(function(){$("#content").on("shown",function(t,e){e.input.$input.summernote({minHeight:700,focus:!0}),e.input.$input.code($(this).html())}),$("#title").editable({type:"text",pk:pk_name,url:api_url,title:"Enter title",validate:function(t){if(!t)return"Required field!"}}),$("#content").editable({type:"wysihtml5",escape:!1,pk:pk_name,url:api_url,title:"Enter Content",rows:40,validate:function(t){if(!t)return"Required field!"}})});