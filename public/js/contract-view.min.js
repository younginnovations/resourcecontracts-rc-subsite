function htmlEncode(t){return document.createElement("a").appendChild(document.createTextNode(t)).parentNode.innerHTML}function htmlDecode(t){var e=document.createElement("a");return e.innerHTML=t,e.textContent}function nl2br(t,e){var n=e||"undefined"==typeof e?"<br />":"<br>";return(t+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1"+n+"$2")}(function(){function t(t){function e(e,n,r,o,a,i){for(;a>=0&&i>a;a+=t){var s=o?o[a]:a;r=n(r,e[s],s,e)}return r}return function(n,r,o,a){r=_(r,a,4);var i=!A(n)&&y.keys(n),s=(i||n).length,c=t>0?0:s-1;return arguments.length<3&&(o=n[i?i[c]:c],c+=t),e(n,r,o,i,c,s)}}function e(t){return function(e,n,r){n=w(n,r);for(var o=R(e),a=t>0?0:o-1;a>=0&&o>a;a+=t)if(n(e[a],a,e))return a;return-1}}function n(t,e,n){return function(r,o,a){var i=0,s=R(r);if("number"==typeof a)t>0?i=a>=0?a:Math.max(a+s,i):s=a>=0?Math.min(a+1,s):a+s+1;else if(n&&a&&s)return a=n(r,o),r[a]===o?a:-1;if(o!==o)return a=e(u.call(r,i,s),y.isNaN),a>=0?a+i:-1;for(a=t>0?i:s-1;a>=0&&s>a;a+=t)if(r[a]===o)return a;return-1}}function r(t,e){var n=k.length,r=t.constructor,o=y.isFunction(r)&&r.prototype||s,a="constructor";for(y.has(t,a)&&!y.contains(e,a)&&e.push(a);n--;)a=k[n],a in t&&t[a]!==o[a]&&!y.contains(e,a)&&e.push(a)}var o=this,a=o._,i=Array.prototype,s=Object.prototype,c=Function.prototype,l=i.push,u=i.slice,p=s.toString,d=s.hasOwnProperty,h=Array.isArray,f=Object.keys,m=c.bind,g=Object.create,v=function(){},y=function(t){return t instanceof y?t:this instanceof y?void(this._wrapped=t):new y(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=y),exports._=y):o._=y,y.VERSION="1.8.3";var _=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)};case 4:return function(n,r,o,a){return t.call(e,n,r,o,a)}}return function(){return t.apply(e,arguments)}},w=function(t,e,n){return null==t?y.identity:y.isFunction(t)?_(t,e,n):y.isObject(t)?y.matcher(t):y.property(t)};y.iteratee=function(t,e){return w(t,e,1/0)};var b=function(t,e){return function(n){var r=arguments.length;if(2>r||null==n)return n;for(var o=1;r>o;o++)for(var a=arguments[o],i=t(a),s=i.length,c=0;s>c;c++){var l=i[c];e&&void 0!==n[l]||(n[l]=a[l])}return n}},C=function(t){if(!y.isObject(t))return{};if(g)return g(t);v.prototype=t;var e=new v;return v.prototype=null,e},E=function(t){return function(e){return null==e?void 0:e[t]}},x=Math.pow(2,53)-1,R=E("length"),A=function(t){var e=R(t);return"number"==typeof e&&e>=0&&x>=e};y.each=y.forEach=function(t,e,n){e=_(e,n);var r,o;if(A(t))for(r=0,o=t.length;o>r;r++)e(t[r],r,t);else{var a=y.keys(t);for(r=0,o=a.length;o>r;r++)e(t[a[r]],a[r],t)}return t},y.map=y.collect=function(t,e,n){e=w(e,n);for(var r=!A(t)&&y.keys(t),o=(r||t).length,a=Array(o),i=0;o>i;i++){var s=r?r[i]:i;a[i]=e(t[s],s,t)}return a},y.reduce=y.foldl=y.inject=t(1),y.reduceRight=y.foldr=t(-1),y.find=y.detect=function(t,e,n){var r;return r=A(t)?y.findIndex(t,e,n):y.findKey(t,e,n),void 0!==r&&-1!==r?t[r]:void 0},y.filter=y.select=function(t,e,n){var r=[];return e=w(e,n),y.each(t,function(t,n,o){e(t,n,o)&&r.push(t)}),r},y.reject=function(t,e,n){return y.filter(t,y.negate(w(e)),n)},y.every=y.all=function(t,e,n){e=w(e,n);for(var r=!A(t)&&y.keys(t),o=(r||t).length,a=0;o>a;a++){var i=r?r[a]:a;if(!e(t[i],i,t))return!1}return!0},y.some=y.any=function(t,e,n){e=w(e,n);for(var r=!A(t)&&y.keys(t),o=(r||t).length,a=0;o>a;a++){var i=r?r[a]:a;if(e(t[i],i,t))return!0}return!1},y.contains=y.includes=y.include=function(t,e,n,r){return A(t)||(t=y.values(t)),("number"!=typeof n||r)&&(n=0),y.indexOf(t,e,n)>=0},y.invoke=function(t,e){var n=u.call(arguments,2),r=y.isFunction(e);return y.map(t,function(t){var o=r?e:t[e];return null==o?o:o.apply(t,n)})},y.pluck=function(t,e){return y.map(t,y.property(e))},y.where=function(t,e){return y.filter(t,y.matcher(e))},y.findWhere=function(t,e){return y.find(t,y.matcher(e))},y.max=function(t,e,n){var r,o,a=-(1/0),i=-(1/0);if(null==e&&null!=t){t=A(t)?t:y.values(t);for(var s=0,c=t.length;c>s;s++)r=t[s],r>a&&(a=r)}else e=w(e,n),y.each(t,function(t,n,r){o=e(t,n,r),(o>i||o===-(1/0)&&a===-(1/0))&&(a=t,i=o)});return a},y.min=function(t,e,n){var r,o,a=1/0,i=1/0;if(null==e&&null!=t){t=A(t)?t:y.values(t);for(var s=0,c=t.length;c>s;s++)r=t[s],a>r&&(a=r)}else e=w(e,n),y.each(t,function(t,n,r){o=e(t,n,r),(i>o||o===1/0&&a===1/0)&&(a=t,i=o)});return a},y.shuffle=function(t){for(var e,n=A(t)?t:y.values(t),r=n.length,o=Array(r),a=0;r>a;a++)e=y.random(0,a),e!==a&&(o[a]=o[e]),o[e]=n[a];return o},y.sample=function(t,e,n){return null==e||n?(A(t)||(t=y.values(t)),t[y.random(t.length-1)]):y.shuffle(t).slice(0,Math.max(0,e))},y.sortBy=function(t,e,n){return e=w(e,n),y.pluck(y.map(t,function(t,n,r){return{value:t,index:n,criteria:e(t,n,r)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return t.index-e.index}),"value")};var T=function(t){return function(e,n,r){var o={};return n=w(n,r),y.each(e,function(r,a){var i=n(r,a,e);t(o,r,i)}),o}};y.groupBy=T(function(t,e,n){y.has(t,n)?t[n].push(e):t[n]=[e]}),y.indexBy=T(function(t,e,n){t[n]=e}),y.countBy=T(function(t,e,n){y.has(t,n)?t[n]++:t[n]=1}),y.toArray=function(t){return t?y.isArray(t)?u.call(t):A(t)?y.map(t,y.identity):y.values(t):[]},y.size=function(t){return null==t?0:A(t)?t.length:y.keys(t).length},y.partition=function(t,e,n){e=w(e,n);var r=[],o=[];return y.each(t,function(t,n,a){(e(t,n,a)?r:o).push(t)}),[r,o]},y.first=y.head=y.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:y.initial(t,t.length-e)},y.initial=function(t,e,n){return u.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},y.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:y.rest(t,Math.max(0,t.length-e))},y.rest=y.tail=y.drop=function(t,e,n){return u.call(t,null==e||n?1:e)},y.compact=function(t){return y.filter(t,y.identity)};var P=function(t,e,n,r){for(var o=[],a=0,i=r||0,s=R(t);s>i;i++){var c=t[i];if(A(c)&&(y.isArray(c)||y.isArguments(c))){e||(c=P(c,e,n));var l=0,u=c.length;for(o.length+=u;u>l;)o[a++]=c[l++]}else n||(o[a++]=c)}return o};y.flatten=function(t,e){return P(t,e,!1)},y.without=function(t){return y.difference(t,u.call(arguments,1))},y.uniq=y.unique=function(t,e,n,r){y.isBoolean(e)||(r=n,n=e,e=!1),null!=n&&(n=w(n,r));for(var o=[],a=[],i=0,s=R(t);s>i;i++){var c=t[i],l=n?n(c,i,t):c;e?(i&&a===l||o.push(c),a=l):n?y.contains(a,l)||(a.push(l),o.push(c)):y.contains(o,c)||o.push(c)}return o},y.union=function(){return y.uniq(P(arguments,!0,!0))},y.intersection=function(t){for(var e=[],n=arguments.length,r=0,o=R(t);o>r;r++){var a=t[r];if(!y.contains(e,a)){for(var i=1;n>i&&y.contains(arguments[i],a);i++);i===n&&e.push(a)}}return e},y.difference=function(t){var e=P(arguments,!0,!0,1);return y.filter(t,function(t){return!y.contains(e,t)})},y.zip=function(){return y.unzip(arguments)},y.unzip=function(t){for(var e=t&&y.max(t,R).length||0,n=Array(e),r=0;e>r;r++)n[r]=y.pluck(t,r);return n},y.object=function(t,e){for(var n={},r=0,o=R(t);o>r;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n},y.findIndex=e(1),y.findLastIndex=e(-1),y.sortedIndex=function(t,e,n,r){n=w(n,r,1);for(var o=n(e),a=0,i=R(t);i>a;){var s=Math.floor((a+i)/2);n(t[s])<o?a=s+1:i=s}return a},y.indexOf=n(1,y.findIndex,y.sortedIndex),y.lastIndexOf=n(-1,y.findLastIndex),y.range=function(t,e,n){null==e&&(e=t||0,t=0),n=n||1;for(var r=Math.max(Math.ceil((e-t)/n),0),o=Array(r),a=0;r>a;a++,t+=n)o[a]=t;return o};var N=function(t,e,n,r,o){if(!(r instanceof e))return t.apply(n,o);var a=C(t.prototype),i=t.apply(a,o);return y.isObject(i)?i:a};y.bind=function(t,e){if(m&&t.bind===m)return m.apply(t,u.call(arguments,1));if(!y.isFunction(t))throw new TypeError("Bind must be called on a function");var n=u.call(arguments,2),r=function(){return N(t,r,e,this,n.concat(u.call(arguments)))};return r},y.partial=function(t){var e=u.call(arguments,1),n=function(){for(var r=0,o=e.length,a=Array(o),i=0;o>i;i++)a[i]=e[i]===y?arguments[r++]:e[i];for(;r<arguments.length;)a.push(arguments[r++]);return N(t,n,this,this,a)};return n},y.bindAll=function(t){var e,n,r=arguments.length;if(1>=r)throw new Error("bindAll must be passed function names");for(e=1;r>e;e++)n=arguments[e],t[n]=y.bind(t[n],t);return t},y.memoize=function(t,e){var n=function(r){var o=n.cache,a=""+(e?e.apply(this,arguments):r);return y.has(o,a)||(o[a]=t.apply(this,arguments)),o[a]};return n.cache={},n},y.delay=function(t,e){var n=u.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},y.defer=y.partial(y.delay,y,1),y.throttle=function(t,e,n){var r,o,a,i=null,s=0;n||(n={});var c=function(){s=n.leading===!1?0:y.now(),i=null,a=t.apply(r,o),i||(r=o=null)};return function(){var l=y.now();s||n.leading!==!1||(s=l);var u=e-(l-s);return r=this,o=arguments,0>=u||u>e?(i&&(clearTimeout(i),i=null),s=l,a=t.apply(r,o),i||(r=o=null)):i||n.trailing===!1||(i=setTimeout(c,u)),a}},y.debounce=function(t,e,n){var r,o,a,i,s,c=function(){var l=y.now()-i;e>l&&l>=0?r=setTimeout(c,e-l):(r=null,n||(s=t.apply(a,o),r||(a=o=null)))};return function(){a=this,o=arguments,i=y.now();var l=n&&!r;return r||(r=setTimeout(c,e)),l&&(s=t.apply(a,o),a=o=null),s}},y.wrap=function(t,e){return y.partial(e,t)},y.negate=function(t){return function(){return!t.apply(this,arguments)}},y.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}},y.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},y.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),1>=t&&(e=null),n}},y.once=y.partial(y.before,2);var S=!{toString:null}.propertyIsEnumerable("toString"),k=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];y.keys=function(t){if(!y.isObject(t))return[];if(f)return f(t);var e=[];for(var n in t)y.has(t,n)&&e.push(n);return S&&r(t,e),e},y.allKeys=function(t){if(!y.isObject(t))return[];var e=[];for(var n in t)e.push(n);return S&&r(t,e),e},y.values=function(t){for(var e=y.keys(t),n=e.length,r=Array(n),o=0;n>o;o++)r[o]=t[e[o]];return r},y.mapObject=function(t,e,n){e=w(e,n);for(var r,o=y.keys(t),a=o.length,i={},s=0;a>s;s++)r=o[s],i[r]=e(t[r],r,t);return i},y.pairs=function(t){for(var e=y.keys(t),n=e.length,r=Array(n),o=0;n>o;o++)r[o]=[e[o],t[e[o]]];return r},y.invert=function(t){for(var e={},n=y.keys(t),r=0,o=n.length;o>r;r++)e[t[n[r]]]=n[r];return e},y.functions=y.methods=function(t){var e=[];for(var n in t)y.isFunction(t[n])&&e.push(n);return e.sort()},y.extend=b(y.allKeys),y.extendOwn=y.assign=b(y.keys),y.findKey=function(t,e,n){e=w(e,n);for(var r,o=y.keys(t),a=0,i=o.length;i>a;a++)if(r=o[a],e(t[r],r,t))return r},y.pick=function(t,e,n){var r,o,a={},i=t;if(null==i)return a;y.isFunction(e)?(o=y.allKeys(i),r=_(e,n)):(o=P(arguments,!1,!1,1),r=function(t,e,n){return e in n},i=Object(i));for(var s=0,c=o.length;c>s;s++){var l=o[s],u=i[l];r(u,l,i)&&(a[l]=u)}return a},y.omit=function(t,e,n){if(y.isFunction(e))e=y.negate(e);else{var r=y.map(P(arguments,!1,!1,1),String);e=function(t,e){return!y.contains(r,e)}}return y.pick(t,e,n)},y.defaults=b(y.allKeys,!0),y.create=function(t,e){var n=C(t);return e&&y.extendOwn(n,e),n},y.clone=function(t){return y.isObject(t)?y.isArray(t)?t.slice():y.extend({},t):t},y.tap=function(t,e){return e(t),t},y.isMatch=function(t,e){var n=y.keys(e),r=n.length;if(null==t)return!r;for(var o=Object(t),a=0;r>a;a++){var i=n[a];if(e[i]!==o[i]||!(i in o))return!1}return!0};var D=function(t,e,n,r){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return t===e;t instanceof y&&(t=t._wrapped),e instanceof y&&(e=e._wrapped);var o=p.call(t);if(o!==p.call(e))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e}var a="[object Array]"===o;if(!a){if("object"!=typeof t||"object"!=typeof e)return!1;var i=t.constructor,s=e.constructor;if(i!==s&&!(y.isFunction(i)&&i instanceof i&&y.isFunction(s)&&s instanceof s)&&"constructor"in t&&"constructor"in e)return!1}n=n||[],r=r||[];for(var c=n.length;c--;)if(n[c]===t)return r[c]===e;if(n.push(t),r.push(e),a){if(c=t.length,c!==e.length)return!1;for(;c--;)if(!D(t[c],e[c],n,r))return!1}else{var l,u=y.keys(t);if(c=u.length,y.keys(e).length!==c)return!1;for(;c--;)if(l=u[c],!y.has(e,l)||!D(t[l],e[l],n,r))return!1}return n.pop(),r.pop(),!0};y.isEqual=function(t,e){return D(t,e)},y.isEmpty=function(t){return null==t?!0:A(t)&&(y.isArray(t)||y.isString(t)||y.isArguments(t))?0===t.length:0===y.keys(t).length},y.isElement=function(t){return!(!t||1!==t.nodeType)},y.isArray=h||function(t){return"[object Array]"===p.call(t)},y.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},y.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){y["is"+t]=function(e){return p.call(e)==="[object "+t+"]"}}),y.isArguments(arguments)||(y.isArguments=function(t){return y.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(y.isFunction=function(t){return"function"==typeof t||!1}),y.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},y.isNaN=function(t){return y.isNumber(t)&&t!==+t},y.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===p.call(t)},y.isNull=function(t){return null===t},y.isUndefined=function(t){return void 0===t},y.has=function(t,e){return null!=t&&d.call(t,e)},y.noConflict=function(){return o._=a,this},y.identity=function(t){return t},y.constant=function(t){return function(){return t}},y.noop=function(){},y.property=E,y.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},y.matcher=y.matches=function(t){return t=y.extendOwn({},t),function(e){return y.isMatch(e,t)}},y.times=function(t,e,n){var r=Array(Math.max(0,t));e=_(e,n,1);for(var o=0;t>o;o++)r[o]=e(o);return r},y.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},y.now=Date.now||function(){return(new Date).getTime()};var M={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},I=y.invert(M),O=function(t){var e=function(e){return t[e]},n="(?:"+y.keys(t).join("|")+")",r=RegExp(n),o=RegExp(n,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(o,e):t}};y.escape=O(M),y.unescape=O(I),y.result=function(t,e,n){var r=null==t?void 0:t[e];return void 0===r&&(r=n),y.isFunction(r)?r.call(t):r};var U=0;y.uniqueId=function(t){var e=++U+"";return t?t+e:e},y.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var L=/(.)^/,F={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},j=/\\|'|\r|\n|\u2028|\u2029/g,V=function(t){return"\\"+F[t]};y.template=function(t,e,n){!e&&n&&(e=n),e=y.defaults({},e,y.templateSettings);var r=RegExp([(e.escape||L).source,(e.interpolate||L).source,(e.evaluate||L).source].join("|")+"|$","g"),o=0,a="__p+='";t.replace(r,function(e,n,r,i,s){return a+=t.slice(o,s).replace(j,V),o=s+e.length,n?a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?a+="'+\n((__t=("+r+"))==null?'':__t)+\n'":i&&(a+="';\n"+i+"\n__p+='"),e}),a+="';\n",e.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{var i=new Function(e.variable||"obj","_",a)}catch(s){throw s.source=a,s}var c=function(t){return i.call(this,t,y)},l=e.variable||"obj";return c.source="function("+l+"){\n"+a+"}",c},y.chain=function(t){var e=y(t);return e._chain=!0,e};var B=function(t,e){return t._chain?y(e).chain():e};y.mixin=function(t){y.each(y.functions(t),function(e){var n=y[e]=t[e];y.prototype[e]=function(){var t=[this._wrapped];return l.apply(t,arguments),B(this,n.apply(y,t))}})},y.mixin(y),y.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=i[t];y.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],B(this,n)}}),y.each(["concat","join","slice"],function(t){var e=i[t];y.prototype[t]=function(){return B(this,e.apply(this._wrapped,arguments))}}),y.prototype.value=function(){return this._wrapped},y.prototype.valueOf=y.prototype.toJSON=y.prototype.value,y.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return y})}).call(this),function(t){var e="object"==typeof self&&self.self==self&&self||"object"==typeof global&&global.global==global&&global;if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(n,r,o){e.Backbone=t(e,o,n,r)});else if("undefined"!=typeof exports){var n,r=require("underscore");try{n=require("jquery")}catch(o){}t(e,exports,r,n)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(function(t,e,n,r){var o=t.Backbone,a=[].slice;e.VERSION="1.2.1",e.$=r,e.noConflict=function(){return t.Backbone=o,this},e.emulateHTTP=!1,e.emulateJSON=!1;var i=function(t,e,r){switch(t){case 1:return function(){return n[e](this[r])};case 2:return function(t){return n[e](this[r],t)};case 3:return function(t,o){return n[e](this[r],t,o)};case 4:return function(t,o,a){return n[e](this[r],t,o,a)};default:return function(){var t=a.call(arguments);return t.unshift(this[r]),n[e].apply(n,t)}}},s=function(t,e,r){n.each(e,function(e,o){n[o]&&(t.prototype[o]=i(e,o,r))})},c=e.Events={},l=/\s+/,u=function(t,e,r,o,a){var i,s=0;if(r&&"object"==typeof r){void 0!==o&&"context"in a&&void 0===a.context&&(a.context=o);for(i=n.keys(r);s<i.length;s++)e=t(e,i[s],r[i[s]],a)}else if(r&&l.test(r))for(i=r.split(l);s<i.length;s++)e=t(e,i[s],o,a);else e=t(e,r,o,a);return e};c.on=function(t,e,n){return p(this,t,e,n)};var p=function(t,e,n,r,o){if(t._events=u(d,t._events||{},e,n,{context:r,ctx:t,listening:o}),o){var a=t._listeners||(t._listeners={});a[o.id]=o}return t};c.listenTo=function(t,e,r){if(!t)return this;var o=t._listenId||(t._listenId=n.uniqueId("l")),a=this._listeningTo||(this._listeningTo={}),i=a[o];if(!i){var s=this._listenId||(this._listenId=n.uniqueId("l"));i=a[o]={obj:t,objId:o,id:s,listeningTo:a,count:0}}return p(t,e,r,this,i),this};var d=function(t,e,n,r){if(n){var o=t[e]||(t[e]=[]),a=r.context,i=r.ctx,s=r.listening;s&&s.count++,o.push({callback:n,context:a,ctx:a||i,listening:s})}return t};c.off=function(t,e,n){return this._events?(this._events=u(h,this._events,t,e,{context:n,listeners:this._listeners}),this):this},c.stopListening=function(t,e,r){var o=this._listeningTo;if(!o)return this;for(var a=t?[t._listenId]:n.keys(o),i=0;i<a.length;i++){var s=o[a[i]];if(!s)break;s.obj.off(e,r,this)}return n.isEmpty(o)&&(this._listeningTo=void 0),this};var h=function(t,e,r,o){if(t){var a,i=0,s=o.context,c=o.listeners;if(e||r||s){for(var l=e?[e]:n.keys(t);i<l.length;i++){e=l[i];var u=t[e];if(!u)break;for(var p=[],d=0;d<u.length;d++){var h=u[d];r&&r!==h.callback&&r!==h.callback._callback||s&&s!==h.context?p.push(h):(a=h.listening,a&&0===--a.count&&(delete c[a.id],delete a.listeningTo[a.objId]))}p.length?t[e]=p:delete t[e]}return n.size(t)?t:void 0}for(var f=n.keys(c);i<f.length;i++)a=c[f[i]],delete c[a.id],delete a.listeningTo[a.objId]}};c.once=function(t,e,r){var o=u(f,{},t,e,n.bind(this.off,this));return this.on(o,void 0,r)},c.listenToOnce=function(t,e,r){var o=u(f,{},e,r,n.bind(this.stopListening,this,t));return this.listenTo(t,o)};var f=function(t,e,r,o){if(r){var a=t[e]=n.once(function(){o(e,a),r.apply(this,arguments)});a._callback=r}return t};c.trigger=function(t){if(!this._events)return this;for(var e=Math.max(0,arguments.length-1),n=Array(e),r=0;e>r;r++)n[r]=arguments[r+1];return u(m,this._events,t,void 0,n),this};var m=function(t,e,n,r){if(t){var o=t[e],a=t.all;o&&a&&(a=a.slice()),o&&g(o,r),a&&g(a,[e].concat(r))}return t},g=function(t,e){var n,r=-1,o=t.length,a=e[0],i=e[1],s=e[2];switch(e.length){case 0:for(;++r<o;)(n=t[r]).callback.call(n.ctx);return;case 1:for(;++r<o;)(n=t[r]).callback.call(n.ctx,a);return;case 2:for(;++r<o;)(n=t[r]).callback.call(n.ctx,a,i);return;case 3:for(;++r<o;)(n=t[r]).callback.call(n.ctx,a,i,s);return;default:for(;++r<o;)(n=t[r]).callback.apply(n.ctx,e);return}};c.bind=c.on,c.unbind=c.off,n.extend(e,c);var v=e.Model=function(t,e){var r=t||{};e||(e={}),this.cid=n.uniqueId(this.cidPrefix),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(r=this.parse(r,e)||{}),r=n.defaults({},r,n.result(this,"defaults")),this.set(r,e),this.changed={},this.initialize.apply(this,arguments)};n.extend(v.prototype,c,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(t){return n.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return n.escape(this.get(t))},has:function(t){return null!=this.get(t)},matches:function(t){return!!n.iteratee(t,this)(this.attributes)},set:function(t,e,r){if(null==t)return this;var o;if("object"==typeof t?(o=t,r=e):(o={})[t]=e,r||(r={}),!this._validate(o,r))return!1;var a=r.unset,i=r.silent,s=[],c=this._changing;this._changing=!0,c||(this._previousAttributes=n.clone(this.attributes),this.changed={});var l=this.attributes,u=this.changed,p=this._previousAttributes;this.idAttribute in o&&(this.id=o[this.idAttribute]);for(var d in o)e=o[d],n.isEqual(l[d],e)||s.push(d),n.isEqual(p[d],e)?delete u[d]:u[d]=e,a?delete l[d]:l[d]=e;if(!i){s.length&&(this._pending=r);for(var h=0;h<s.length;h++)this.trigger("change:"+s[h],this,l[s[h]],r)}if(c)return this;if(!i)for(;this._pending;)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,n.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var r in this.attributes)e[r]=void 0;return this.set(e,n.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!n.isEmpty(this.changed):n.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?n.clone(this.changed):!1;var e=this._changing?this._previousAttributes:this.attributes,r={};for(var o in t){var a=t[o];n.isEqual(e[o],a)||(r[o]=a)}return n.size(r)?r:!1},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(t){t=n.extend({parse:!0},t);var e=this,r=t.success;return t.success=function(n){var o=t.parse?e.parse(n,t):n;return e.set(o,t)?(r&&r.call(t.context,e,n,t),void e.trigger("sync",e,n,t)):!1},j(this,t),this.sync("read",this,t)},save:function(t,e,r){var o;null==t||"object"==typeof t?(o=t,r=e):(o={})[t]=e,r=n.extend({validate:!0,parse:!0},r);var a=r.wait;if(o&&!a){if(!this.set(o,r))return!1}else if(!this._validate(o,r))return!1;var i=this,s=r.success,c=this.attributes;r.success=function(t){i.attributes=c;var e=r.parse?i.parse(t,r):t;return a&&(e=n.extend({},o,e)),e&&!i.set(e,r)?!1:(s&&s.call(r.context,i,t,r),void i.trigger("sync",i,t,r))},j(this,r),o&&a&&(this.attributes=n.extend({},c,o));var l=this.isNew()?"create":r.patch?"patch":"update";"patch"!==l||r.attrs||(r.attrs=o);var u=this.sync(l,this,r);return this.attributes=c,u},destroy:function(t){t=t?n.clone(t):{};var e=this,r=t.success,o=t.wait,a=function(){e.stopListening(),e.trigger("destroy",e,e.collection,t)};t.success=function(n){o&&a(),r&&r.call(t.context,e,n,t),e.isNew()||e.trigger("sync",e,n,t)};var i=!1;return this.isNew()?n.defer(t.success):(j(this,t),i=this.sync("delete",this,t)),o||a(),i},url:function(){var t=n.result(this,"urlRoot")||n.result(this.collection,"url")||F();if(this.isNew())return t;var e=this.get(this.idAttribute);return t.replace(/[^\/]$/,"$&/")+encodeURIComponent(e)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},n.defaults({validate:!0},t))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=n.extend({},this.attributes,t);var r=this.validationError=this.validate(t,e)||null;return r?(this.trigger("invalid",this,r,n.extend(e,{validationError:r})),!1):!0}});var y={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};s(v,y,"attributes");var _=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,n.extend({silent:!0},e))},w={add:!0,remove:!0,merge:!0},b={add:!0,remove:!1};n.extend(_.prototype,c,{model:v,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,n.extend({merge:!1},e,b))},remove:function(t,e){e=n.extend({},e);var r=!n.isArray(t);t=r?[t]:n.clone(t);var o=this._removeModels(t,e);return!e.silent&&o&&this.trigger("update",this,e),r?o[0]:o},set:function(t,e){e=n.defaults({},e,w),e.parse&&!this._isModel(t)&&(t=this.parse(t,e));var r=!n.isArray(t);t=r?t?[t]:[]:t.slice();var o,a,i,s,c,l=e.at;null!=l&&(l=+l),0>l&&(l+=this.length+1);for(var u=this.comparator&&null==l&&e.sort!==!1,p=n.isString(this.comparator)?this.comparator:null,d=[],h=[],f={},m=e.add,g=e.merge,v=e.remove,y=!u&&m&&v?[]:!1,_=!1,b=0;b<t.length;b++){if(i=t[b],s=this.get(i))v&&(f[s.cid]=!0),g&&i!==s&&(i=this._isModel(i)?i.attributes:i,e.parse&&(i=s.parse(i,e)),s.set(i,e),u&&!c&&s.hasChanged(p)&&(c=!0)),t[b]=s;else if(m){if(a=t[b]=this._prepareModel(i,e),!a)continue;d.push(a),this._addReference(a,e)}a=s||a,a&&(o=this.modelId(a.attributes),!y||!a.isNew()&&f[o]||(y.push(a),_=_||!this.models[b]||a.cid!==this.models[b].cid),f[o]=!0)}if(v){for(var b=0;b<this.length;b++)f[(a=this.models[b]).cid]||h.push(a);h.length&&this._removeModels(h,e)}if(d.length||_)if(u&&(c=!0),this.length+=d.length,null!=l)for(var b=0;b<d.length;b++)this.models.splice(l+b,0,d[b]);else{y&&(this.models.length=0);for(var C=y||d,b=0;b<C.length;b++)this.models.push(C[b])}if(c&&this.sort({silent:!0}),!e.silent){for(var E=null!=l?n.clone(e):e,b=0;b<d.length;b++)null!=l&&(E.index=l+b),(a=d[b]).trigger("add",a,this,E);(c||_)&&this.trigger("sort",this,e),(d.length||h.length)&&this.trigger("update",this,e)}return r?t[0]:t},reset:function(t,e){e=e?n.clone(e):{};for(var r=0;r<this.models.length;r++)this._removeReference(this.models[r],e);return e.previousModels=this.models,this._reset(),t=this.add(t,n.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,n.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t)},unshift:function(t,e){return this.add(t,n.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t)},slice:function(){return a.apply(this.models,arguments)},get:function(t){if(null==t)return void 0;var e=this.modelId(this._isModel(t)?t.attributes:t);return this._byId[t]||this._byId[e]||this._byId[t.cid]},at:function(t){return 0>t&&(t+=this.length),this.models[t]},where:function(t,e){var r=n.matches(t);return this[e?"find":"filter"](function(t){return r(t.attributes)})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),n.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return n.invoke(this.models,"get",t)},fetch:function(t){t=n.extend({parse:!0},t);var e=t.success,r=this;return t.success=function(n){var o=t.reset?"reset":"set";r[o](n,t),e&&e.call(t.context,r,n,t),r.trigger("sync",r,n,t)},j(this,t),this.sync("read",this,t)},create:function(t,e){e=e?n.clone(e):{};var r=e.wait;if(t=this._prepareModel(t,e),!t)return!1;r||this.add(t,e);var o=this,a=e.success;return e.success=function(t,e,n){r&&o.add(t,n),a&&a.call(n.context,t,e,n)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t){return t[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(this._isModel(t))return t.collection||(t.collection=this),t;e=e?n.clone(e):{},e.collection=this;var r=new this.model(t,e);return r.validationError?(this.trigger("invalid",this,r.validationError,e),!1):r},_removeModels:function(t,e){for(var n=[],r=0;r<t.length;r++){var o=this.get(t[r]);if(o){var a=this.indexOf(o);this.models.splice(a,1),this.length--,e.silent||(e.index=a,o.trigger("remove",o,this,e)),n.push(o),this._removeReference(o,e)}}return n.length?n:!1},_isModel:function(t){return t instanceof v},_addReference:function(t,e){this._byId[t.cid]=t;var n=this.modelId(t.attributes);null!=n&&(this._byId[n]=t),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){delete this._byId[t.cid];var n=this.modelId(t.attributes);null!=n&&delete this._byId[n],this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,r){if("add"!==t&&"remove"!==t||n===this){if("destroy"===t&&this.remove(e,r),"change"===t){var o=this.modelId(e.previousAttributes()),a=this.modelId(e.attributes);o!==a&&(null!=o&&delete this._byId[o],null!=a&&(this._byId[a]=e))}this.trigger.apply(this,arguments)}}});var C={forEach:3,each:3,map:3,collect:3,reduce:4,foldl:4,inject:4,reduceRight:4,foldr:4,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:2,contains:2,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3};s(_,C,"models");var E=["groupBy","countBy","sortBy","indexBy"];n.each(E,function(t){n[t]&&(_.prototype[t]=function(e,r){var o=n.isFunction(e)?e:function(t){return t.get(e)};return n[t](this.models,o,r)})});var x=e.View=function(t){this.cid=n.uniqueId("view"),n.extend(this,n.pick(t,A)),this._ensureElement(),this.initialize.apply(this,arguments)},R=/^(\S+)\s*(.*)$/,A=["model","collection","el","id","attributes","className","tagName","events"];n.extend(x.prototype,c,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0]},delegateEvents:function(t){if(t||(t=n.result(this,"events")),!t)return this;this.undelegateEvents();for(var e in t){var r=t[e];if(n.isFunction(r)||(r=this[r]),r){var o=e.match(R);this.delegate(o[1],o[2],n.bind(r,this))}}return this},delegate:function(t,e,n){return this.$el.on(t+".delegateEvents"+this.cid,e,n),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(t,e,n){return this.$el.off(t+".delegateEvents"+this.cid,e,n),this},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"));else{var t=n.extend({},n.result(this,"attributes"));this.id&&(t.id=n.result(this,"id")),this.className&&(t["class"]=n.result(this,"className")),this.setElement(this._createElement(n.result(this,"tagName"))),this._setAttributes(t)}},_setAttributes:function(t){this.$el.attr(t)}}),e.sync=function(t,r,o){var a=T[t];n.defaults(o||(o={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var i={type:a,dataType:"json"};if(o.url||(i.url=n.result(r,"url")||F()),null!=o.data||!r||"create"!==t&&"update"!==t&&"patch"!==t||(i.contentType="application/json",
i.data=JSON.stringify(o.attrs||r.toJSON(o))),o.emulateJSON&&(i.contentType="application/x-www-form-urlencoded",i.data=i.data?{model:i.data}:{}),o.emulateHTTP&&("PUT"===a||"DELETE"===a||"PATCH"===a)){i.type="POST",o.emulateJSON&&(i.data._method=a);var s=o.beforeSend;o.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",a),s?s.apply(this,arguments):void 0}}"GET"===i.type||o.emulateJSON||(i.processData=!1);var c=o.error;o.error=function(t,e,n){o.textStatus=e,o.errorThrown=n,c&&c.call(o.context,t,e,n)};var l=o.xhr=e.ajax(n.extend(i,o));return r.trigger("request",r,l,o),l};var T={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var P=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},N=/\((.*?)\)/g,S=/(\(\?)?:\w+/g,k=/\*\w+/g,D=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(P.prototype,c,{initialize:function(){},route:function(t,r,o){n.isRegExp(t)||(t=this._routeToRegExp(t)),n.isFunction(r)&&(o=r,r=""),o||(o=this[r]);var a=this;return e.history.route(t,function(n){var i=a._extractParameters(t,n);a.execute(o,i,r)!==!1&&(a.trigger.apply(a,["route:"+r].concat(i)),a.trigger("route",r,i),e.history.trigger("route",a,r,i))}),this},execute:function(t,e,n){t&&t.apply(this,e)},navigate:function(t,n){return e.history.navigate(t,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var t,e=n.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(D,"\\$&").replace(N,"(?:$1)?").replace(S,function(t,e){return e?t:"([^/?]+)"}).replace(k,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var r=t.exec(e).slice(1);return n.map(r,function(t,e){return e===r.length-1?t||null:t?decodeURIComponent(t):null})}});var M=e.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},I=/^[#\/]|\s+$/g,O=/^\/+|\/+$/g,U=/#.*$/;M.started=!1,n.extend(M.prototype,c,{interval:50,atRoot:function(){var t=this.location.pathname.replace(/[^\/]$/,"$&/");return t===this.root&&!this.getSearch()},matchRoot:function(){var t=this.decodeFragment(this.location.pathname),e=t.slice(0,this.root.length-1)+"/";return e===this.root},decodeFragment:function(t){return decodeURI(t.replace(/%25/g,"%2525"))},getSearch:function(){var t=this.location.href.replace(/#.*/,"").match(/\?.+/);return t?t[0]:""},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getPath:function(){var t=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===t.charAt(0)?t.slice(1):t},getFragment:function(t){return null==t&&(t=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),t.replace(I,"")},start:function(t){if(M.started)throw new Error("Backbone.history has already been started");if(M.started=!0,this.options=n.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window,this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(O,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var e=this.root.slice(0,-1)||"/";return this.location.replace(e+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var r=document.body,o=r.insertBefore(this.iframe,r.firstChild).contentWindow;o.document.open(),o.document.close(),o.location.hash="#"+this.fragment}var a=window.addEventListener||function(t,e){return attachEvent("on"+t,e)};return this._usePushState?a("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?a("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.options.silent?void 0:this.loadUrl()},stop:function(){var t=window.removeEventListener||function(t,e){return detachEvent("on"+t,e)};this._usePushState?t("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&t("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),M.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getHash(this.iframe.contentWindow)),e===this.fragment?!1:(this.iframe&&this.navigate(e),void this.loadUrl())},loadUrl:function(t){return this.matchRoot()?(t=this.fragment=this.getFragment(t),n.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0})):!1},navigate:function(t,e){if(!M.started)return!1;e&&e!==!0||(e={trigger:!!e}),t=this.getFragment(t||"");var n=this.root;(""===t||"?"===t.charAt(0))&&(n=n.slice(0,-1)||"/");var r=n+t;if(t=this.decodeFragment(t.replace(U,"")),this.fragment!==t){if(this.fragment=t,this._usePushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,r);else{if(!this._wantsHashChange)return this.location.assign(r);if(this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getHash(this.iframe.contentWindow)){var o=this.iframe.contentWindow;e.replace||(o.document.open(),o.document.close()),this._updateHash(o.location,t,e.replace)}}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,n){if(n){var r=t.href.replace(/(javascript:|#).*$/,"");t.replace(r+"#"+e)}else t.hash="#"+e}}),e.history=new M;var L=function(t,e){var r,o=this;r=t&&n.has(t,"constructor")?t.constructor:function(){return o.apply(this,arguments)},n.extend(r,o,e);var a=function(){this.constructor=r};return a.prototype=o.prototype,r.prototype=new a,t&&n.extend(r.prototype,t),r.__super__=o.prototype,r};v.extend=_.extend=P.extend=x.extend=M.extend=L;var F=function(){throw new Error('A "url" property or function must be specified')},j=function(t,e){var n=e.error;e.error=function(r){n&&n.call(e.context,t,r,e),t.trigger("error",t,r,e)}};return e}),function(t){function e(t,e,n,r){var o,a=0,i=0,s=0,n=(n||"(").toString(),r=(r||")").toString();for(o=0;o<t.length;o++){var c=t[o];if(c.indexOf(n,a)>c.indexOf(r,a)||~c.indexOf(n,a)&&!~c.indexOf(r,a)||!~c.indexOf(n,a)&&~c.indexOf(r,a)){if(i=c.indexOf(n,a),s=c.indexOf(r,a),~i&&!~s||!~i&&~s){var l=t.slice(0,(o||1)+1).join(e);t=[l].concat(t.slice((o||1)+1))}a=(s>i?s:i)+1,o=0}else a=0}return t}function n(t,e){for(var n,o=0,a="";n=t.substr(o).match(/[^\w\d\- %@&]*\*[^\w\d\- %@&]*/);)o=n.index+n[0].length,n[0]=n[0].replace(/^\*/,"([_.()!\\ %@&a-zA-Z0-9-]+)"),a+=t.substr(0,n.index)+n[0];t=a+=t.substr(o);var i,s,c=t.match(/:([^\/]+)/gi);if(c){s=c.length;for(var l=0;s>l;l++)i=c[l],t="::"===i.slice(0,2)?i.slice(1):t.replace(i,r(i,e))}return t}function r(t,e,n){n=t;for(var r in e)if(e.hasOwnProperty(r)&&(n=e[r](t),n!==t))break;return n===t?"([._a-zA-Z0-9-%()]+)":n}function o(t,e,n){if(!t.length)return n();var r=0;!function o(){e(t[r],function(e){e||e===!1?(n(e),n=function(){}):(r+=1,r===t.length?n():o())})}()}function a(t){for(var e=[],n=0,r=t.length;r>n;n++)e=e.concat(t[n]);return e}function i(t,e){for(var n=0;n<t.length;n+=1)if(e(t[n],n,t)===!1)return}function c(){return""===l.hash||"#"===l.hash}var l=document.location,u={mode:"modern",hash:l.hash,history:!1,check:function(){var t=l.hash;t!=this.hash&&(this.hash=t,this.onHashChanged())},fire:function(){"modern"===this.mode?this.history===!0?window.onpopstate():window.onhashchange():this.onHashChanged()},init:function(t,e){function n(t){for(var e=0,n=p.listeners.length;n>e;e++)p.listeners[e](t)}var r=this;if(this.history=e,p.listeners||(p.listeners=[]),"onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7))this.history===!0?setTimeout(function(){window.onpopstate=n},500):window.onhashchange=n,this.mode="modern";else{var o=document.createElement("iframe");o.id="state-frame",o.style.display="none",document.body.appendChild(o),this.writeFrame(""),"onpropertychange"in document&&"attachEvent"in document&&document.attachEvent("onpropertychange",function(){"location"===event.propertyName&&r.check()}),window.setInterval(function(){r.check()},50),this.onHashChanged=n,this.mode="legacy"}return p.listeners.push(t),this.mode},destroy:function(t){if(p&&p.listeners)for(var e=p.listeners,n=e.length-1;n>=0;n--)e[n]===t&&e.splice(n,1)},setHash:function(t){return"legacy"===this.mode&&this.writeFrame(t),this.history===!0?(window.history.pushState({},document.title,t),this.fire()):l.hash="/"===t[0]?t:"/"+t,this},writeFrame:function(t){var e=document.getElementById("state-frame"),n=e.contentDocument||e.contentWindow.document;n.open(),n.write("<script>_hash = '"+t+"'; onload = parent.listener.syncHash;<script>"),n.close()},syncHash:function(){var t=this._hash;return t!=l.hash&&(l.hash=t),this},onHashChanged:function(){}},p=t.Router=function(t){return this instanceof p?(this.params={},this.routes={},this.methods=["on","once","after","before"],this.scope=[],this._methods={},this._insert=this.insert,this.insert=this.insertEx,this.historySupport=null!=(null!=window.history?window.history.pushState:null),this.configure(),this.mount(t||{}),void 0):new p(t)};p.prototype.init=function(t){var e,n=this;return this.handler=function(t){var e=t&&t.newURL||window.location.hash,r=n.history===!0?n.getPath():e.replace(/.*#/,"");n.dispatch("on","/"===r.charAt(0)?r:"/"+r)},u.init(this.handler,this.history),this.history===!1?c()&&t?l.hash=t:c()||n.dispatch("on","/"+l.hash.replace(/^(#\/|#|\/)/,"")):(this.convert_hash_in_init?(e=c()&&t?t:c()?null:l.hash.replace(/^#/,""),e&&window.history.replaceState({},document.title,e)):e=this.getPath(),(e||this.run_in_init===!0)&&this.handler()),this},p.prototype.explode=function(){var t=this.history===!0?this.getPath():l.hash;return"/"===t.charAt(1)&&(t=t.slice(1)),t.slice(1,t.length).split("/")},p.prototype.setRoute=function(t,e,n){var r=this.explode();return"number"==typeof t&&"string"==typeof e?r[t]=e:"string"==typeof n?r.splice(t,e,s):r=[t],u.setHash(r.join("/")),r},p.prototype.insertEx=function(t,e,n,r){return"once"===t&&(t="on",n=function(t){var e=!1;return function(){return e?void 0:(e=!0,t.apply(this,arguments))}}(n)),this._insert(t,e,n,r)},p.prototype.getRoute=function(t){var e=t;if("number"==typeof t)e=this.explode()[t];else if("string"==typeof t){var n=this.explode();e=n.indexOf(t)}else e=this.explode();return e},p.prototype.destroy=function(){return u.destroy(this.handler),this},p.prototype.getPath=function(){var t=window.location.pathname;return"/"!==t.substr(0,1)&&(t="/"+t),t};var d=/\?.*/;p.prototype.configure=function(t){t=t||{};for(var e=0;e<this.methods.length;e++)this._methods[this.methods[e]]=!0;return this.recurse=t.recurse||this.recurse||!1,this.async=t.async||!1,this.delimiter=t.delimiter||"/",this.strict="undefined"==typeof t.strict?!0:t.strict,this.notfound=t.notfound,this.resource=t.resource,this.history=t.html5history&&this.historySupport||!1,this.run_in_init=this.history===!0&&t.run_handler_in_init!==!1,this.convert_hash_in_init=this.history===!0&&t.convert_hash_in_init!==!1,this.every={after:t.after||null,before:t.before||null,on:t.on||null},this},p.prototype.param=function(t,e){":"!==t[0]&&(t=":"+t);var n=new RegExp(t,"g");return this.params[t]=function(t){return t.replace(n,e.source||e)},this},p.prototype.on=p.prototype.route=function(t,n,r){var o=this;return!r&&"function"==typeof n&&(r=n,n=t,t="on"),Array.isArray(n)?n.forEach(function(e){o.on(t,e,r)}):(n.source&&(n=n.source.replace(/\\\//gi,"/")),Array.isArray(t)?t.forEach(function(t){o.on(t.toLowerCase(),n,r)}):(n=n.split(new RegExp(this.delimiter)),n=e(n,this.delimiter),this.insert(t,this.scope.concat(n),r),void 0))},p.prototype.path=function(t,n){var r=this.scope.length;t.source&&(t=t.source.replace(/\\\//gi,"/")),t=t.split(new RegExp(this.delimiter)),t=e(t,this.delimiter),this.scope=this.scope.concat(t),n.call(this,this),this.scope.splice(r,t.length)},p.prototype.dispatch=function(t,e,n){function r(){a.last=i.after,a.invoke(a.runlist(i),a,n)}var o,a=this,i=this.traverse(t,e.replace(d,""),this.routes,""),s=this._invoked;return this._invoked=!0,i&&0!==i.length?("forward"===this.recurse&&(i=i.reverse()),o=this.every&&this.every.after?[this.every.after].concat(this.last):[this.last],o&&o.length>0&&s?(this.async?this.invoke(o,this,r):(this.invoke(o,this),r()),!0):(r(),!0)):(this.last=[],"function"==typeof this.notfound&&this.invoke([this.notfound],{method:t,path:e},n),!1)},p.prototype.invoke=function(t,e,n){var r,a=this;this.async?(r=function(n,a){return Array.isArray(n)?o(n,r,a):void("function"==typeof n&&n.apply(e,(t.captures||[]).concat(a)))},o(t,r,function(){n&&n.apply(e,arguments)})):(r=function(n){return Array.isArray(n)?i(n,r):"function"==typeof n?n.apply(e,t.captures||[]):void("string"==typeof n&&a.resource&&a.resource[n].apply(e,t.captures||[]))},i(t,r))},p.prototype.traverse=function(t,e,n,r,o){function a(t){function e(t){for(var n=t.length-1;n>=0;n--)Array.isArray(t[n])?(e(t[n]),0===t[n].length&&t.splice(n,1)):o(t[n])||t.splice(n,1)}function n(t){for(var e=[],r=0;r<t.length;r++)e[r]=Array.isArray(t[r])?n(t[r]):t[r];return e}if(!o)return t;var r=n(t);return r.matched=t.matched,r.captures=t.captures,r.after=t.after.filter(o),e(r),r}var i,s,c,l,u=[];if(e===this.delimiter&&n[t])return l=[[n.before,n[t]].filter(Boolean)],l.after=[n.after].filter(Boolean),l.matched=!0,l.captures=[],a(l);for(var p in n)if(n.hasOwnProperty(p)&&(!this._methods[p]||this._methods[p]&&"object"==typeof n[p]&&!Array.isArray(n[p]))){if(i=s=r+this.delimiter+p,this.strict||(s+="["+this.delimiter+"]?"),c=e.match(new RegExp("^"+s)),!c)continue;if(c[0]&&c[0]==e&&n[p][t])return l=[[n[p].before,n[p][t]].filter(Boolean)],l.after=[n[p].after].filter(Boolean),l.matched=!0,l.captures=c.slice(1),this.recurse&&n===this.routes&&(l.push([n.before,n.on].filter(Boolean)),l.after=l.after.concat([n.after].filter(Boolean))),a(l);if(l=this.traverse(t,e,n[p],i),l.matched)return l.length>0&&(u=u.concat(l)),this.recurse&&(u.push([n[p].before,n[p].on].filter(Boolean)),l.after=l.after.concat([n[p].after].filter(Boolean)),n===this.routes&&(u.push([n.before,n.on].filter(Boolean)),l.after=l.after.concat([n.after].filter(Boolean)))),u.matched=!0,u.captures=l.captures,u.after=l.after,a(u)}return!1},p.prototype.insert=function(t,e,r,o){var a,i,s,c,l;if(e=e.filter(function(t){return t&&t.length>0}),o=o||this.routes,l=e.shift(),/\:|\*/.test(l)&&!/\\d|\\w/.test(l)&&(l=n(l,this.params)),e.length>0)return o[l]=o[l]||{},this.insert(t,e,r,o[l]);if(l||e.length||o!==this.routes){if(i=typeof o[l],s=Array.isArray(o[l]),o[l]&&!s&&"object"==i)switch(a=typeof o[l][t]){case"function":return void(o[l][t]=[o[l][t],r]);case"object":return void o[l][t].push(r);case"undefined":return void(o[l][t]=r)}else if("undefined"==i)return c={},c[t]=r,o[l]=c,void 0;throw new Error("Invalid route context: "+i)}switch(a=typeof o[t]){case"function":return void(o[t]=[o[t],r]);case"object":return void o[t].push(r);case"undefined":return void(o[t]=r)}},p.prototype.extend=function(t){function e(t){r._methods[t]=!0,r[t]=function(){var e=1===arguments.length?[t,""]:[t];r.on.apply(r,e.concat(Array.prototype.slice.call(arguments)))}}var n,r=this,o=t.length;for(n=0;o>n;n++)e(t[n])},p.prototype.runlist=function(t){var e=this.every&&this.every.before?[this.every.before].concat(a(t)):a(t);return this.every&&this.every.on&&e.push(this.every.on),e.captures=t.captures,e.source=t.source,e},p.prototype.mount=function(t,n){function r(n,r){var a=n,i=n.split(o.delimiter),s=typeof t[n],c=""===i[0]||!o._methods[i[0]],l=c?"on":a;c&&(a=a.slice((a.match(new RegExp("^"+o.delimiter))||[""])[0].length),i.shift()),c&&"object"===s&&!Array.isArray(t[n])?(r=r.concat(i),o.mount(t[n],r)):(c&&(r=r.concat(a.split(o.delimiter)),r=e(r,o.delimiter)),o.insert(l,r,t[n]))}if(t&&"object"==typeof t&&!Array.isArray(t)){var o=this;n=n||[],Array.isArray(n)||(n=n.split(o.delimiter));for(var a in t)t.hasOwnProperty(a)&&r(a,n.slice(0))}}}("object"==typeof exports?exports:window);var ViewerPage=Backbone.Model.extend({}),ViewerPageCollection=Backbone.Collection.extend({model:ViewerPage,sort_key:"page_no",comparator:function(t){return t.get(this.sort_key)},parse:function(t){return t.result}}),Annotation=Backbone.Model.extend({"default":{text:"",cluster:"Other12"}}),AnnotationsCollection=Backbone.Collection.extend({model:Annotation,sort_key:"category",setSortByKey:function(t){this.sort_key=t},comparator:function(t){return t.get(this.sort_key)},parse:function(t){return t.result.map(function(t){return t.category=_lc(t.category_key,t.category),t})},parentAnnotations:function(t){var e=[];return this.models.map(function(n){n.get("category_key")==t&&(e[n.get("annotation_id")]=n.get("text"))}),e},relatedAnnotations:function(t){var e=[];return this.models.map(function(n){n.get("annotation_id")==t.annotation_id&&n.get("id")!=t.id&&e.push(n)}),e},groupByCategory:function(){var t=this.groupBy(function(t){return t.get("category_key")});return t},groupByPage:function(){var t=this.groupBy(function(t){return t.get("page")});return t},totalAnnotations:function(){return _.keys(this.groupByCategory()).length}}),AnnotationCategory=Backbone.Model.extend({}),AnnotationCategories=Backbone.Collection.extend({model:AnnotationCategory}),SearchResultRow=Backbone.Model.extend({}),SearchResultsCollection=Backbone.Collection.extend({model:SearchResultRow,sort_key:"page_no",comparator:function(t){return t.get(this.sort_key)},getSearchTerm:function(){return this.searchTerm},fetch:function(t,e){this.searchTerm=decodeURI(t.searchTerm),this.searchCompleted=!1;var n=this;$.ajax({url:this.url,dataType:"json",type:"GET",data:{q:n.searchTerm},async:!0}).done(function(t){n.destroy(),$.each(t.results,function(t,e){"annotation"==e.type?n.add({text:e.text,page_no:e.page_no,type:e.type,annotation_type:e.annotation_type,annotation_id:e.annotation_id}):n.add({text:e.text,page_no:e.page_no,type:e.type})}),n.searchCompleted=!0,n.trigger("reset")})},destroy:function(){var t=this;_.each(_.clone(t.models),function(t){t.destroy()})}}),Metadata=Backbone.Model.extend({}),ContractApp=Backbone.Model.extend({defaults:{page_no:1,total_pages:0,view:"pdf",search_query:"",contract_id:0,guid:"",selected_annotation_id:0,pdfscale:1,showMeta:!0,canrender:!0,isSearch:!1},initialize:function(t){this.metadata=new Metadata,this.loadMetadata()},setAnnotatorInstance:function(t){return this.set({annotator:t})},getAnnotatorInstance:function(t){return this.get("annotator")},loadMetadata:function(){this.metadata.url=this.getMetadataUrl(),this.metadata.fetch()},setIsSearch:function(t){return this.set({isSearch:t})},getIsSearch:function(){return this.get("isSearch")},getShowMeta:function(){return this.get("showMeta")},getContractId:function(){return this.get("contract_id")},getContractGuid:function(){return this.get("guid")},getMetadataSummaryLink:function(){return app_url+"/contract/"+this.getContractGuid()},getMetadataUrl:function(){return this.get("esapi")+"contract/"+this.getContractGuid()+"/metadata"},getAllPageUrl:function(){return this.get("esapi")+"contract/"+this.getContractGuid()+"/text"},getAllAnnotationsUrl:function(){return this.get("esapi")+"contract/"+this.getContractGuid()+"/annotations"},getSearchUrl:function(){return this.get("esapi")+"contract/"+this.getContractGuid()+"/searchtext"},setPdfLoaded:function(t){this.set({pdfLoaded:t})},isPdfLoaded:function(){return this.get("pdfLoaded")},setPrevClick:function(t){this.set({preClick:t})},isPrevClick:function(){return this.get("preClick")},getPdfUrl:function(){var t=parseInt(this.getCurrentPage()),e=pagesCollection.where({page_no:t});return e&&e[0]&&e[0].attributes?e[0].get("pdf_url"):""},getFullPdfUrl:function(){return""},getLoadAnnotationsUrl:function(){return this.get("esapi")+"contract/"+this.getContractGuid()+"/annotations"},getAnnotationsListAnchor:function(){return app_url+"/contract/"+this.getContractGuid()+"#annotations"},renderStart:function(){this.set({canrender:!0})},renderComplete:function(){this.set({canrender:!1})},canRender:function(){return this.get("canrender")},setCurrentPage:function(t){t=parseInt(t),this.set({page_no:t})},getCurrentPage:function(){return this.get("page_no")},getTotalPages:function(){return this.get("total_pages")},setSelectedAnnotation:function(t){this.set("selected_annotation_id",t)},resetSelectedAnnotation:function(t){this.set("selected_annotation_id",0)},getSelectedAnnotation:function(){return this.get("selected_annotation_id")},setView:function(t){("pdf"==t.trim()||"text"==t.trim()||"search"==t.trim())&&this.set({view:t})},getView:function(){return this.get("view")},getSearchQuery:function(){return this.get("search_query")},setSearchQuery:function(t){this.set({search_query:t.trim()})},getPdfScale:function(){return this.get("pdfscale")},setPdfScale:function(t){return this.set({pdfscale:t})},triggerScrollToTextPage:function(){("text"===this.get("view")||"search"===this.get("view"))&&this.trigger("scroll-to-text-page")},triggerGoToPdfPage:function(){"pdf"===this.get("view")&&this.trigger("scroll-to-pdf-page")},triggerUpdateTextPaginationPage:function(t){("text"===this.get("view")||"search"===this.get("view"))&&this.trigger("update-text-pagination-page",t)},triggerUpdatePdfPaginationPage:function(t){"pdf"===this.get("view")&&this.trigger("update-pdf-pagination-page",t)},getBoxPosition:function(t){var e=$(".pdf-annotator").find("canvas").first();return t.width=t.width*e.width(),t.height=t.height*e.height(),t.x=t.x*e.width(),t.y=t.y*e.height(),t},showPdfAnnotationPopup:function(t){if(0==this.isPdfLoaded())return!0;var e=$(".pdf-annotator");e.find(".annotator-viewer").addClass("annotator-hide");var n=this.getAnnotatorInstance().content.data("annotator").dumpAnnotations(),r=this;n.map(function(n,o){if(n.id==t){var a=r.getBoxPosition(n.shapes[0].geometry),i={top:a.y+a.height/2,left:a.x+a.width/2};setTimeout(function(){e.animate({scrollTop:i.top-200},"fast")}(i,e),300),e.annotator().annotator("showViewer",[n],i)}})},showTextAnnotationPopup:function(t){var e=$(".text-annotator");e.find(".annotator-viewer").addClass("annotator-hide"),e.find(".annotator-hl").each(function(n,r){var r=$(r),o=r.data("annotation");if(o.id==t){var a=r.position();setTimeout(function(){e.animate({scrollTop:a.top-200},"fast")}(a,e),300),a.top=a.top+15,a.left=a.left+r.width()/2,e.annotator().annotator("showViewer",[o],a)}})},isViewVisible:function(t){var e=[];return("text"===this.getView()||"search"===this.getView())&&(e=["TextPaginationView","TextViewer","TextSearchForm"]),"pdf"==this.getView()&&(e=["PdfPaginationView","PdfViewer","PdfZoom"]),("search"==this.getView()||this.getIsSearch())&&e.push("TextSearchResultsList"),["text","pdf"].indexOf(this.getView())>=0&&0==this.getIsSearch()&&e.push("AnnotationsViewer"),this.getShowMeta()&&e.push("RightColumnView"),e.indexOf(t)>=0?!0:!1}}),PdfPage=Backbone.Model.extend({defaults:{content:""},initialize:function(t){var e=this;e.init=!1,this.contractApp=t.contractApp,this.contractApp.on("change:page_no",function(){"pdf"===e.contractApp.getView()&&(debug("pdf.js change:page_no called"),e.loadPdf())})},fetchBlob:function(t,e){this.xhr&&4!=this.xhr.readystate&&this.xhr.abort(),this.xhr=new XMLHttpRequest,this.xhr.open("GET",t,!0),this.xhr.responseType="blob",this.xhr.onload=function(t){if(200==this.status){var n=new Blob([this.response],{type:"application/pdf"}),r=URL.createObjectURL(n);e&&e(r)}},this.xhr.send()},loadPdf:function(){var t=this;""!==this.contractApp.getPdfUrl().trim()?(t.init=!0,debug("setting content to -"),t.set({content:"-"}),t.trigger("change:content"),this.fetchBlob(this.contractApp.getPdfUrl(),function(e){t.init=!0,debug("pdf.js loadPdf: fetched ",this.contractApp.getPdfUrl()," setting pdfpage: content"),t.set({content:e})})):(debug("pdf.js loadPdf: no url defined for pdf "," setting pdfpage: content to false"),t.set({content:"-1"}))}});(function(){var t,e,n,r,o,a,i,s,c,l,u,p,d,h,f,m,g,v,y,_,w,b,C,E,x,R,A,T,P=[].slice,N={}.hasOwnProperty,S=function(t,e){function n(){this.constructor=t}for(var r in e)N.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},k=function(t,e){return function(){return t.apply(e,arguments)}},D=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};if(v=function(e){var n;return n=this.map(function(){var n,r,o,a;for(o="",n=this;(null!=n?n.nodeType:void 0)===Node.ELEMENT_NODE&&n!==e;)a=n.tagName.replace(":","\\:"),r=t(n.parentNode).children(a).index(n)+1,r="["+r+"]",o="/"+n.tagName.toLowerCase()+r+o,n=n.parentNode;return o}),n.get()},y=function(t){var e,n,r,o;return e=function(t){var e,n;return e=h(t),n=f(t),""+e+"["+n+"]"},o=t,n=function(t){var n;for(n="";t!==o;){if(null==t)throw new Error("Called getPathTo on a node which was not a descendant of @rootNode. "+o);n=e(t)+"/"+n,t=t.parentNode}return n="/"+n,n=n.replace(/\/$/,"")},r=this.map(function(){var t;return t=n(this)}),r.get()},l=function(t,e,n){var r,o,a,i,s,c;if(!t.hasChildNodes())throw new Error("XPath error: node has no children!");for(o=t.childNodes,a=0,s=0,c=o.length;c>s;s++)if(r=o[s],i=h(r),i===e&&(a+=1,a===n))return r;throw new Error("XPath error: wanted child not found.")},h=function(t){var e;switch(e=t.nodeName.toLowerCase()){case"#text":return"text()";case"#comment":return"comment()";case"#cdata-section":return"cdata-section()";default:return e}},f=function(t){var e,n;for(e=0,n=t;n;)n.nodeName===t.nodeName&&e++,n=n.previousSibling;return e},m=null,"undefined"!=typeof Gettext&&null!==Gettext?(w=new Gettext({domain:"annotator"}),m=function(t){return w.gettext(t)}):m=function(t){return t},T=function(t){return m(t)},("undefined"!=typeof jQuery&&null!==jQuery&&null!=(R=jQuery.fn)?R.jquery:void 0)||console.error(T("Annotator requires jQuery: have you included lib/vendor/jquery.js?")),JSON&&JSON.parse&&JSON.stringify||console.error(T("Annotator requires a JSON implementation: have you included lib/vendor/json2.js?")),t=jQuery,a={},a.flatten=function(e){var n;return(n=function(e){var r,o,a,i;for(o=[],a=0,i=e.length;i>a;a++)r=e[a],o=o.concat(r&&t.isArray(r)?n(r):r);return o})(e)},a.contains=function(t,e){var n;for(n=e;null!=n;){if(n===t)return!0;n=n.parentNode}return!1},a.getTextNodes=function(t){var e;return e=function(t){var n;if(t&&t.nodeType!==Node.TEXT_NODE){if(n=[],t.nodeType!==Node.COMMENT_NODE)for(t=t.lastChild;t;)n.push(e(t)),t=t.previousSibling;return n.reverse()}return t},t.map(function(){return a.flatten(e(this))})},a.getLastTextNodeUpTo=function(t){var e;switch(t.nodeType){case Node.TEXT_NODE:return t;case Node.ELEMENT_NODE:if(null!=t.lastChild&&(e=a.getLastTextNodeUpTo(t.lastChild),null!=e))return e}return t=t.previousSibling,null!=t?a.getLastTextNodeUpTo(t):null},a.getFirstTextNodeNotBefore=function(t){var e;switch(t.nodeType){case Node.TEXT_NODE:return t;case Node.ELEMENT_NODE:if(null!=t.firstChild&&(e=a.getFirstTextNodeNotBefore(t.firstChild),null!=e))return e}return t=t.nextSibling,null!=t?a.getFirstTextNodeNotBefore(t):null},a.readRangeViaSelection=function(t){var e;return e=a.getGlobal().getSelection(),e.removeAllRanges(),e.addRange(t.toRange()),e.toString()},a.xpathFromNode=function(t,e){var n,r;try{r=v.call(t,e)}catch(o){n=o,console.log("jQuery-based XPath construction failed! Falling back to manual."),r=y.call(t,e)}return r},a.nodeFromXPath=function(t,e){var n,r,o,a,i,s,c,u;for(i=t.substring(1).split("/"),o=e,s=0,c=i.length;c>s;s++)a=i[s],u=a.split("["),r=u[0],n=u[1],n=null!=n?parseInt((null!=n?n.split("]"):void 0)[0]):1,o=l(o,r.toLowerCase(),n);return o},a.escape=function(t){return t.replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},a.uuid=function(){var t;return t=0,function(){return t++}}(),a.getGlobal=function(){return function(){return this}()},a.maxZIndex=function(e){var n,r;return n=function(){var n,o,a;for(a=[],n=0,o=e.length;o>n;n++)r=e[n],"static"===t(r).css("position")?a.push(-1):a.push(parseInt(t(r).css("z-index"),10)||-1);return a}(),Math.max.apply(Math,n)},a.mousePosition=function(e,n){var r,o;return"absolute"!==(o=t(n).css("position"))&&"fixed"!==o&&"relative"!==o&&(n=t(n).offsetParent()[0]),r=t(n).offset(),{top:e.pageY-r.top,left:e.pageX-r.left}},a.preventEventDefault=function(t){return null!=t&&"function"==typeof t.preventDefault?t.preventDefault():void 0},p=["log","debug","info","warn","exception","assert","dir","dirxml","trace","group","groupEnd","groupCollapsed","time","timeEnd","profile","profileEnd","count","clear","table","error","notifyFirebug","firebug","userObjects"],"undefined"!=typeof console&&null!==console)for(null==console.group&&(console.group=function(t){return console.log("GROUP: ",t)}),null==console.groupCollapsed&&(console.groupCollapsed=console.group),b=0,E=p.length;E>b;b++)u=p[b],null==console[u]&&(console[u]=function(){return console.log(T("Not implemented:")+(" console."+name))});else{for(this.console={},C=0,x=p.length;x>C;C++)u=p[C],this.console[u]=function(){};this.console.error=function(){var t;return t=1<=arguments.length?P.call(arguments,0):[],alert("ERROR: "+t.join(", "))},this.console.warn=function(){var t;return t=1<=arguments.length?P.call(arguments,0):[],alert("WARNING: "+t.join(", "))}}n=function(){function e(e,n){this.options=t.extend(!0,{},this.options,n),this.element=t(e),this._closures={},this.on=this.subscribe,this.addEvents()}return e.prototype.events={},e.prototype.options={},e.prototype.element=null,e.prototype.addEvents=function(){var t,n,r,o,a;for(o=e._parseEvents(this.events),a=[],n=0,r=o.length;r>n;n++)t=o[n],a.push(this._addEvent(t.selector,t.event,t.functionName));return a},e.prototype.removeEvents=function(){var t,n,r,o,a;for(o=e._parseEvents(this.events),a=[],n=0,r=o.length;r>n;n++)t=o[n],a.push(this._removeEvent(t.selector,t.event,t.functionName));return a},e.prototype._addEvent=function(t,n,r){var o;return o=function(t){return function(){return t[r].apply(t,arguments)}}(this),""===t&&e._isCustomEvent(n)?this.subscribe(n,o):this.element.delegate(t,n,o),this._closures[""+t+"/"+n+"/"+r]=o,this},e.prototype._removeEvent=function(t,n,r){var o;return o=this._closures[""+t+"/"+n+"/"+r],""===t&&e._isCustomEvent(n)?this.unsubscribe(n,o):this.element.undelegate(t,n,o),delete this._closures[""+t+"/"+n+"/"+r],this},e.prototype.publish=function(){return this.element.triggerHandler.apply(this.element,arguments),this},e.prototype.subscribe=function(e,n){var r;return r=function(){return n.apply(this,[].slice.call(arguments,1))},r.guid=n.guid=t.guid+=1,this.element.bind(e,r),this},e.prototype.unsubscribe=function(){return this.element.unbind.apply(this.element,arguments),this},e}(),n._parseEvents=function(t){var e,n,r,o,a,i,s;n=[];for(o in t)r=t[o],s=o.split(" "),a=2<=s.length?P.call(s,0,i=s.length-1):(i=0,[]),e=s[i++],n.push({selector:a.join(" "),event:e,functionName:r});return n},n.natives=function(){var t,e,n;return e=function(){var e,r;e=jQuery.event.special,r=[];for(t in e)N.call(e,t)&&(n=e[t],r.push(t));return r}(),"blur focus focusin focusout load resize scroll unload click dblclick\nmousedown mouseup mousemove mouseover mouseout mouseenter mouseleave\nchange select submit keydown keypress keyup error".split(/[^a-z]+/).concat(e)}(),n._isCustomEvent=function(e){return e=e.split(".")[0],-1===t.inArray(e,n.natives)},o={},o.sniff=function(t){return null!=t.commonAncestorContainer?new o.BrowserRange(t):"string"==typeof t.start?new o.SerializedRange(t):t.start&&"object"==typeof t.start?new o.NormalizedRange(t):(console.error(T("Could not sniff range type")),
!1)},o.nodeFromXPath=function(e,n){var r,o,i,s,c;return null==n&&(n=document),o=function(t,e){var r;null==e&&(e=null);try{return document.evaluate("."+t,n,e,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue}catch(o){return r=o,console.log("XPath evaluation failed."),console.log("Trying fallback..."),a.nodeFromXPath(t,n)}},t.isXMLDoc(document.documentElement)?(r=document.createNSResolver(null===document.ownerDocument?document.documentElement:document.ownerDocument.documentElement),s=o(e,r),s||(e=function(){var t,n,r,o;for(r=e.split("/"),o=[],t=0,n=r.length;n>t;t++)c=r[t],c&&-1===c.indexOf(":")?o.push(c.replace(/^([a-z]+)/,"xhtml:$1")):o.push(c);return o}().join("/"),i=document.lookupNamespaceURI(null),r=function(t){return"xhtml"===t?i:document.documentElement.getAttribute("xmlns:"+t)},s=o(e,r)),s):o(e)},o.RangeError=function(t){function e(t,n,r){this.type=t,this.message=n,this.parent=null!=r?r:null,e.__super__.constructor.call(this,this.message)}return S(e,t),e}(Error),o.BrowserRange=function(){function t(t){this.commonAncestorContainer=t.commonAncestorContainer,this.startContainer=t.startContainer,this.startOffset=t.startOffset,this.endContainer=t.endContainer,this.endOffset=t.endOffset}return t.prototype.normalize=function(t){var e,n,r,i;if(this.tainted)return console.error(T("You may only call normalize() once on a BrowserRange!")),!1;if(this.tainted=!0,i={},this.startContainer.nodeType===Node.ELEMENT_NODE?(i.start=a.getFirstTextNodeNotBefore(this.startContainer.childNodes[this.startOffset]),i.startOffset=0):(i.start=this.startContainer,i.startOffset=this.startOffset),this.endContainer.nodeType===Node.ELEMENT_NODE){if(n=this.endContainer.childNodes[this.endOffset],null!=n){for(e=n;null!=e&&e.nodeType!==Node.TEXT_NODE;)e=e.firstChild;null!=e&&(i.end=e,i.endOffset=0)}null==i.end&&(n=this.endContainer.childNodes[this.endOffset-1],i.end=a.getLastTextNodeUpTo(n),i.endOffset=i.end.nodeValue.length)}else i.end=this.endContainer,i.endOffset=this.endOffset;for(r={},i.startOffset>0?i.start.nodeValue.length>i.startOffset?r.start=i.start.splitText(i.startOffset):r.start=i.start.nextSibling:r.start=i.start,i.start===i.end?(r.start.nodeValue.length>i.endOffset-i.startOffset&&r.start.splitText(i.endOffset-i.startOffset),r.end=r.start):(i.end.nodeValue.length>i.endOffset&&i.end.splitText(i.endOffset),r.end=i.end),r.commonAncestor=this.commonAncestorContainer;r.commonAncestor.nodeType!==Node.ELEMENT_NODE;)r.commonAncestor=r.commonAncestor.parentNode;return new o.NormalizedRange(r)},t.prototype.serialize=function(t,e){return this.normalize(t).serialize(t,e)},t}(),o.NormalizedRange=function(){function e(t){this.commonAncestor=t.commonAncestor,this.start=t.start,this.end=t.end}return e.prototype.normalize=function(t){return this},e.prototype.limit=function(e){var n,r,o,a,i,s;if(n=t.grep(this.textNodes(),function(n){return n.parentNode===e||t.contains(e,n.parentNode)}),!n.length)return null;for(this.start=n[0],this.end=n[n.length-1],o=t(this.start).parents(),s=t(this.end).parents(),a=0,i=s.length;i>a;a++)if(r=s[a],-1!==o.index(r)){this.commonAncestor=r;break}return this},e.prototype.serialize=function(e,n){var r,i,s;return i=function(r,o){var i,s,c,l,u,p,d,h;for(l=n?t(r).parents(":not("+n+")").eq(0):t(r).parent(),p=a.xpathFromNode(l,e)[0],u=a.getTextNodes(l),s=u.slice(0,u.index(r)),c=0,d=0,h=s.length;h>d;d++)i=s[d],c+=i.nodeValue.length;return o?[p,c+r.nodeValue.length]:[p,c]},s=i(this.start),r=i(this.end,!0),new o.SerializedRange({start:s[0],end:r[0],startOffset:s[1],endOffset:r[1]})},e.prototype.text=function(){var t;return function(){var e,n,r,o;for(r=this.textNodes(),o=[],e=0,n=r.length;n>e;e++)t=r[e],o.push(t.nodeValue);return o}.call(this).join("")},e.prototype.textNodes=function(){var e,n,r,o;return r=a.getTextNodes(t(this.commonAncestor)),o=[r.index(this.start),r.index(this.end)],n=o[0],e=o[1],t.makeArray(r.slice(n,+e+1||9e9))},e.prototype.toRange=function(){var t;return t=document.createRange(),t.setStartBefore(this.start),t.setEndAfter(this.end),t},e}(),o.SerializedRange=function(){function e(t){this.start=t.start,this.startOffset=t.startOffset,this.end=t.end,this.endOffset=t.endOffset}return e.prototype.normalize=function(e){var n,r,i,s,c,l,u,p,d,h,f,m,g,v;for(l={},g=["start","end"],d=0,f=g.length;f>d;d++){c=g[d];try{s=o.nodeFromXPath(this[c],e)}catch(y){throw r=y,new o.RangeError(c,"Error while finding "+c+" node: "+this[c]+": "+r,r)}if(!s)throw new o.RangeError(c,"Couldn't find "+c+" node: "+this[c]);for(i=0,u=this[c+"Offset"],"end"===c&&u--,v=a.getTextNodes(t(s)),h=0,m=v.length;m>h;h++){if(p=v[h],i+p.nodeValue.length>u){l[c+"Container"]=p,l[c+"Offset"]=this[c+"Offset"]-i;break}i+=p.nodeValue.length}if(null==l[c+"Offset"])throw new o.RangeError(""+c+"offset","Couldn't find offset "+this[c+"Offset"]+" in element "+this[c])}return n=null==document.compareDocumentPosition?function(t,e){return t.contains(e)}:function(t,e){return 16&t.compareDocumentPosition(e)},t(l.startContainer).parents().each(function(){return n(this,l.endContainer)?(l.commonAncestorContainer=this,!1):void 0}),new o.BrowserRange(l).normalize(e)},e.prototype.serialize=function(t,e){return this.normalize(t).serialize(t,e)},e.prototype.toObject=function(){return{start:this.start,startOffset:this.startOffset,end:this.end,endOffset:this.endOffset}},e}(),_=this.Annotator,e=function(e){function n(e,r){return this.onDeleteAnnotation=k(this.onDeleteAnnotation,this),this.onEditAnnotation=k(this.onEditAnnotation,this),this.onAdderClick=k(this.onAdderClick,this),this.onAdderMousedown=k(this.onAdderMousedown,this),this.onHighlightMouseover=k(this.onHighlightMouseover,this),this.checkForEndSelection=k(this.checkForEndSelection,this),this.checkForStartSelection=k(this.checkForStartSelection,this),this.clearViewerHideTimer=k(this.clearViewerHideTimer,this),this.startViewerHideTimer=k(this.startViewerHideTimer,this),this.showViewer=k(this.showViewer,this),this.onEditorSubmit=k(this.onEditorSubmit,this),this.onEditorHide=k(this.onEditorHide,this),this.showEditor=k(this.showEditor,this),n.__super__.constructor.apply(this,arguments),this.plugins={},n.supported()?(this.options.readOnly||this._setupDocumentEvents(),this._setupWrapper()._setupViewer()._setupEditor(),this._setupDynamicStyle(),this.adder=t(this.html.adder).appendTo(this.wrapper).hide(),void n._instances.push(this)):this}return S(n,e),n.prototype.events={".annotator-adder button click":"onAdderClick",".annotator-adder button mousedown":"onAdderMousedown",".annotator-hl mouseover":"onHighlightMouseover",".annotator-hl mouseout":"startViewerHideTimer"},n.prototype.html={adder:'<div class="annotator-adder"><button>'+T("Annotate")+"</button></div>",wrapper:'<div class="annotator-wrapper"></div>'},n.prototype.options={readOnly:!1},n.prototype.plugins={},n.prototype.editor=null,n.prototype.viewer=null,n.prototype.selectedRanges=null,n.prototype.mouseIsDown=!1,n.prototype.ignoreMouseup=!1,n.prototype.viewerHideTimer=null,n.prototype._setupWrapper=function(){return this.wrapper=t(this.html.wrapper),this.element.find("script").remove(),this.element.wrapInner(this.wrapper),this.wrapper=this.element.find(".annotator-wrapper"),this},n.prototype._setupViewer=function(){return this.viewer=new n.Viewer({readOnly:this.options.readOnly}),this.viewer.hide().on("edit",this.onEditAnnotation).on("delete",this.onDeleteAnnotation).addField({load:function(e){return function(n,r){return r.text?t(n).html(a.escape(r.text)):t(n).html("<i>"+T("No Comment")+"</i>"),e.publish("annotationViewerTextField",[n,r])}}(this)}).element.appendTo(this.wrapper).bind({mouseover:this.clearViewerHideTimer,mouseout:this.startViewerHideTimer}),this},n.prototype._setupEditor=function(){return this.editor=new n.Editor,this.editor.hide().on("hide",this.onEditorHide).on("save",this.onEditorSubmit).addField({type:"textarea",label:T("Comments")+"…",load:function(e,n){return t(e).find("textarea").val(n.text||"")},submit:function(e,n){return n.text=t(e).find("textarea").val()}}),this.editor.element.appendTo(this.wrapper),this},n.prototype._setupDocumentEvents=function(){return t(document).bind({mouseup:this.checkForEndSelection,mousedown:this.checkForStartSelection}),this},n.prototype._setupDynamicStyle=function(){var e,n,r,o;return r=t("#annotator-dynamic-style"),r.length||(r=t('<style id="annotator-dynamic-style"></style>').appendTo(document.head)),n="*"+function(){var t,e,n,r;for(n=["adder","outer","notice","filter"],r=[],t=0,e=n.length;e>t;t++)o=n[t],r.push(":not(.annotator-"+o+")");return r}().join(""),e=a.maxZIndex(t(document.body).find(n)),e=Math.max(e,1e3),r.text([".annotator-adder, .annotator-outer, .annotator-notice {","  z-index: "+(e+20)+";","}",".annotator-filter {","  z-index: "+(e+10)+";","}"].join("\n")),this},n.prototype.destroy=function(){var e,r,o,a;t(document).unbind({mouseup:this.checkForEndSelection,mousedown:this.checkForStartSelection}),t("#annotator-dynamic-style").remove(),this.adder.remove(),this.viewer.destroy(),this.editor.destroy(),this.wrapper.find(".annotator-hl").each(function(){return t(this).contents().insertBefore(this),t(this).remove()}),this.wrapper.contents().insertBefore(this.wrapper),this.wrapper.remove(),this.element.data("annotator",null),a=this.plugins;for(r in a)o=a[r],this.plugins[r].destroy();return this.removeEvents(),e=n._instances.indexOf(this),-1!==e?n._instances.splice(e,1):void 0},n.prototype.getSelectedRanges=function(){var e,n,r,i,s,c,l,u,p;for(l=a.getGlobal().getSelection(),s=[],c=[],l.isCollapsed||(s=function(){var t,a,s;for(s=[],n=t=0,a=l.rangeCount;a>=0?a>t:t>a;n=a>=0?++t:--t)i=l.getRangeAt(n),e=new o.BrowserRange(i),r=e.normalize().limit(this.wrapper[0]),null===r&&c.push(i),s.push(r);return s}.call(this),l.removeAllRanges()),u=0,p=c.length;p>u;u++)i=c[u],l.addRange(i);return t.grep(s,function(t){return t&&l.addRange(t.toRange()),t})},n.prototype.createAnnotation=function(){var t;return t={},this.publish("beforeAnnotationCreated",[t]),t},n.prototype.setupAnnotation=function(e){var n,r,a,i,s,c,l,u,p,d;for(s=this.wrapper[0],e.ranges||(e.ranges=this.selectedRanges),a=[],d=e.ranges,c=0,u=d.length;u>c;c++){i=d[c];try{a.push(o.sniff(i).normalize(s))}catch(h){if(n=h,!(n instanceof o.RangeError))throw n;this.publish("rangeNormalizeFail",[e,i,n])}}for(e.quote=[],e.ranges=[],e.highlights=[],l=0,p=a.length;p>l;l++)r=a[l],e.quote.push(t.trim(r.text())),e.ranges.push(r.serialize(this.wrapper[0],".annotator-hl")),t.merge(e.highlights,this.highlightRange(r));return e.quote=e.quote.join(" / "),t(e.highlights).data("annotation",e),e},n.prototype.updateAnnotation=function(t){return this.publish("beforeAnnotationUpdated",[t]),this.publish("annotationUpdated",[t]),t},n.prototype.deleteAnnotation=function(e){var n,r,o,a,i;if(null!=e.highlights)for(i=e.highlights,o=0,a=i.length;a>o;o++)r=i[o],null!=r.parentNode&&(n=r.childNodes[0],t(r).replaceWith(r.childNodes));return this.publish("annotationDeleted",[e]),e},n.prototype.loadAnnotations=function(t){var e,n;return null==t&&(t=[]),n=function(t){return function(r){var o,a,i,s;for(null==r&&(r=[]),a=r.splice(0,10),i=0,s=a.length;s>i;i++)o=a[i],t.setupAnnotation(o);return r.length>0?setTimeout(function(){return n(r)},10):t.publish("annotationsLoaded",[e])}}(this),e=t.slice(),n(t),this},n.prototype.dumpAnnotations=function(){return this.plugins.Store?this.plugins.Store.dumpAnnotations():(console.warn(T("Can't dump annotations without Store plugin.")),!1)},n.prototype.highlightRange=function(e,n){var r,o,a,i,s,c,l;for(null==n&&(n="annotator-hl"),a=/^\s*$/,r=t("<span class='"+n+"'></span>"),c=e.textNodes(),l=[],i=0,s=c.length;s>i;i++)o=c[i],a.test(o.nodeValue)||l.push(t(o).wrapAll(r).parent().show()[0]);return l},n.prototype.highlightRanges=function(e,n){var r,o,a,i;for(null==n&&(n="annotator-hl"),r=[],a=0,i=e.length;i>a;a++)o=e[a],t.merge(r,this.highlightRange(o,n));return r},n.prototype.addPlugin=function(t,e){var r,o;return this.plugins[t]?console.error(T("You cannot have more than one instance of any plugin.")):(r=n.Plugin[t],"function"==typeof r?(this.plugins[t]=new r(this.element[0],e),this.plugins[t].annotator=this,"function"==typeof(o=this.plugins[t]).pluginInit&&o.pluginInit()):console.error(T("Could not load ")+t+T(" plugin. Have you included the appropriate <script> tag?"))),this},n.prototype.showEditor=function(t,e){return this.editor.element.css(e),this.editor.load(t),this.publish("annotationEditorShown",[this.editor,t]),this},n.prototype.onEditorHide=function(){return this.publish("annotationEditorHidden",[this.editor]),this.ignoreMouseup=!1},n.prototype.onEditorSubmit=function(t){return this.publish("annotationEditorSubmit",[this.editor,t])},n.prototype.showViewer=function(t,e){return this.viewer.element.css(e),this.viewer.load(t),this.publish("annotationViewerShown",[this.viewer,t])},n.prototype.startViewerHideTimer=function(){return this.viewerHideTimer?void 0:this.viewerHideTimer=setTimeout(this.viewer.hide,250)},n.prototype.clearViewerHideTimer=function(){return clearTimeout(this.viewerHideTimer),this.viewerHideTimer=!1},n.prototype.checkForStartSelection=function(t){return t&&this.isAnnotator(t.target)||this.startViewerHideTimer(),this.mouseIsDown=!0},n.prototype.checkForEndSelection=function(e){var n,r,o,i,s;if(this.mouseIsDown=!1,!this.ignoreMouseup){for(this.selectedRanges=this.getSelectedRanges(),s=this.selectedRanges,o=0,i=s.length;i>o;o++)if(r=s[o],n=r.commonAncestor,t(n).hasClass("annotator-hl")&&(n=t(n).parents("[class!=annotator-hl]")[0]),this.isAnnotator(n))return;return e&&this.selectedRanges.length?this.adder.css(a.mousePosition(e,this.wrapper[0])).show():this.adder.hide()}},n.prototype.isAnnotator=function(e){return!!t(e).parents().addBack().filter("[class^=annotator-]").not(this.wrapper).length},n.prototype.onHighlightMouseover=function(e){var n;return this.clearViewerHideTimer(),this.mouseIsDown||this.viewer.isShown()?!1:(n=t(e.target).parents(".annotator-hl").addBack().map(function(){return t(this).data("annotation")}),this.showViewer(t.makeArray(n),a.mousePosition(e,this.wrapper[0])))},n.prototype.onAdderMousedown=function(t){return null!=t&&t.preventDefault(),this.ignoreMouseup=!0},n.prototype.onAdderClick=function(e){var n,r,o,a,i;return null!=e&&e.preventDefault(),a=this.adder.position(),this.adder.hide(),n=this.setupAnnotation(this.createAnnotation()),t(n.highlights).addClass("annotator-hl-temporary"),i=function(e){return function(){return o(),t(n.highlights).removeClass("annotator-hl-temporary"),e.publish("annotationCreated",[n])}}(this),r=function(t){return function(){return o(),t.deleteAnnotation(n)}}(this),o=function(t){return function(){return t.unsubscribe("annotationEditorHidden",r),t.unsubscribe("annotationEditorSubmit",i)}}(this),this.subscribe("annotationEditorHidden",r),this.subscribe("annotationEditorSubmit",i),this.showEditor(n,a)},n.prototype.onEditAnnotation=function(t){var e,n,r;return n=this.viewer.element.position(),r=function(n){return function(){return e(),n.updateAnnotation(t)}}(this),e=function(t){return function(){return t.unsubscribe("annotationEditorHidden",e),t.unsubscribe("annotationEditorSubmit",r)}}(this),this.subscribe("annotationEditorHidden",e),this.subscribe("annotationEditorSubmit",r),this.viewer.hide(),this.showEditor(t,n)},n.prototype.onDeleteAnnotation=function(t){return this.viewer.hide(),this.deleteAnnotation(t)},n}(n),e.Plugin=function(t){function e(t,n){e.__super__.constructor.apply(this,arguments)}return S(e,t),e.prototype.pluginInit=function(){},e.prototype.destroy=function(){return this.removeEvents()},e}(n),d=a.getGlobal(),null==(null!=(A=d.document)?A.evaluate:void 0)&&t.getScript("http://assets.annotateit.org/vendor/xpath.min.js"),null==d.getSelection&&t.getScript("http://assets.annotateit.org/vendor/ierange.min.js"),null==d.JSON&&t.getScript("http://assets.annotateit.org/vendor/json2.min.js"),null==d.Node&&(d.Node={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12}),e.$=t,e.Delegator=n,e.Range=o,e.Util=a,e._instances=[],e._t=T,e.supported=function(){return function(){return!!this.getSelection}()},e.noConflict=function(){return a.getGlobal().Annotator=_,this},t.fn.annotator=function(n){var r;return r=Array.prototype.slice.call(arguments,1),this.each(function(){var o;return o=t.data(this,"annotator"),o?n&&o[n].apply(o,r):(o=new e(this,n),t.data(this,"annotator",o))})},this.Annotator=e,e.Widget=function(n){function r(n,o){r.__super__.constructor.apply(this,arguments),this.classes=t.extend({},e.Widget.prototype.classes,this.classes)}return S(r,n),r.prototype.classes={hide:"annotator-hide",invert:{x:"annotator-invert-x",y:"annotator-invert-y"}},r.prototype.destroy=function(){return this.removeEvents(),this.element.remove()},r.prototype.checkOrientation=function(){var n,r,o,a,i;return this.resetOrientation(),i=t(e.Util.getGlobal()),a=this.element.children(":first"),r=a.offset(),o={top:i.scrollTop(),right:i.width()+i.scrollLeft()},n={top:r.top,right:r.left+a.width()},n.top-o.top<0&&this.invertY(),n.right-o.right>0&&this.invertX(),this},r.prototype.resetOrientation=function(){return this.element.removeClass(this.classes.invert.x).removeClass(this.classes.invert.y),this},r.prototype.invertX=function(){return this.element.addClass(this.classes.invert.x),this},r.prototype.invertY=function(){return this.element.addClass(this.classes.invert.y),this},r.prototype.isInvertedY=function(){return this.element.hasClass(this.classes.invert.y)},r.prototype.isInvertedX=function(){return this.element.hasClass(this.classes.invert.x)},r}(n),e.Editor=function(n){function r(e){this.onCancelButtonMouseover=k(this.onCancelButtonMouseover,this),this.processKeypress=k(this.processKeypress,this),this.submit=k(this.submit,this),this.load=k(this.load,this),this.hide=k(this.hide,this),this.show=k(this.show,this),r.__super__.constructor.call(this,t(this.html)[0],e),this.fields=[],this.annotation={}}return S(r,n),r.prototype.events={"form submit":"submit",".annotator-save click":"submit",".annotator-cancel click":"hide",".annotator-cancel mouseover":"onCancelButtonMouseover","textarea keydown":"processKeypress"},r.prototype.classes={hide:"annotator-hide",focus:"annotator-focus"},r.prototype.html='<div class="annotator-outer annotator-editor">\n  <form class="annotator-widget">\n    <ul class="annotator-listing"></ul>\n    <div class="annotator-controls">\n      <a href="#cancel" class="annotator-cancel">'+T("Cancel")+'</a>\n<a href="#save" class="annotator-save annotator-focus">'+T("Save")+"</a>\n    </div>\n  </form>\n</div>",r.prototype.options={},r.prototype.show=function(t){return e.Util.preventEventDefault(t),this.element.removeClass(this.classes.hide),this.element.find(".annotator-save").addClass(this.classes.focus),this.checkOrientation(),this.element.find(":input:first").focus(),this.setupDraggables(),this.publish("show")},r.prototype.hide=function(t){return e.Util.preventEventDefault(t),this.element.addClass(this.classes.hide),this.publish("hide")},r.prototype.load=function(t){var e,n,r,o;for(this.annotation=t,this.publish("load",[this.annotation]),o=this.fields,n=0,r=o.length;r>n;n++)e=o[n],e.load(e.element,this.annotation);return this.show()},r.prototype.submit=function(t){var n,r,o,a;for(e.Util.preventEventDefault(t),a=this.fields,r=0,o=a.length;o>r;r++)n=a[r],n.submit(n.element,this.annotation);return this.publish("save",[this.annotation]),this.hide()},r.prototype.addField=function(n){var r,o,a;switch(o=t.extend({id:"annotator-field-"+e.Util.uuid(),type:"input",label:"",load:function(){},submit:function(){}},n),a=null,r=t('<li class="annotator-item" />'),o.element=r[0],o.type){case"textarea":a=t("<textarea />");break;case"input":case"checkbox":a=t("<input />");break;case"select":a=t("<select />")}return r.append(a),a.attr({id:o.id,placeholder:o.label}),"checkbox"===o.type&&(a[0].type="checkbox",r.addClass("annotator-checkbox"),r.append(t("<label />",{"for":o.id,html:o.label}))),this.element.find("ul:first").append(r),this.fields.push(o),o.element},r.prototype.checkOrientation=function(){var t,e;return r.__super__.checkOrientation.apply(this,arguments),e=this.element.find("ul"),t=this.element.find(".annotator-controls"),this.element.hasClass(this.classes.invert.y)?t.insertBefore(e):t.is(":first-child")&&t.insertAfter(e),this},r.prototype.processKeypress=function(t){return 27===t.keyCode?this.hide():13!==t.keyCode||t.shiftKey?void 0:this.submit()},r.prototype.onCancelButtonMouseover=function(){return this.element.find("."+this.classes.focus).removeClass(this.classes.focus)},r.prototype.setupDraggables=function(){var e,n,r,o,a,i,s,c,l,u,p;return this.element.find(".annotator-resize").remove(),r=this.element.hasClass(this.classes.invert.y)?this.element.find(".annotator-item:last"):this.element.find(".annotator-item:first"),r&&t('<span class="annotator-resize"></span>').appendTo(r),a=null,e=this.classes,o=this.element,u=null,l=o.find(".annotator-resize"),n=o.find(".annotator-controls"),p=!1,i=function(e){return e.target===this?(a={element:this,top:e.pageY,left:e.pageX},u=o.find("textarea:first"),t(window).bind({"mouseup.annotator-editor-resize":c,"mousemove.annotator-editor-resize":s}),e.preventDefault()):void 0},c=function(){return a=null,t(window).unbind(".annotator-editor-resize")},s=function(t){return function(t){var r,i,s,c,d;return a&&p===!1?(r={top:t.pageY-a.top,left:t.pageX-a.left},a.element===l[0]?(c=u.outerHeight(),d=u.outerWidth(),i=o.hasClass(e.invert.x)?-1:1,s=o.hasClass(e.invert.y)?1:-1,u.height(c+r.top*s),u.width(d+r.left*i),u.outerHeight()!==c&&(a.top=t.pageY),u.outerWidth()!==d&&(a.left=t.pageX)):a.element===n[0]&&(o.css({top:parseInt(o.css("top"),10)+r.top,left:parseInt(o.css("left"),10)+r.left}),a.top=t.pageY,a.left=t.pageX),p=!0,setTimeout(function(){return p=!1},1e3/60)):void 0}}(this),l.bind("mousedown",i),n.bind("mousedown",i)},r}(e.Widget),e.Viewer=function(n){function o(e){this.onDeleteClick=k(this.onDeleteClick,this),this.onEditClick=k(this.onEditClick,this),this.load=k(this.load,this),this.hide=k(this.hide,this),this.show=k(this.show,this),o.__super__.constructor.call(this,t(this.html.element)[0],e),this.item=t(this.html.item)[0],this.fields=[],this.annotations=[]}return S(o,n),o.prototype.events={".annotator-edit click":"onEditClick",".annotator-delete click":"onDeleteClick"},o.prototype.classes={hide:"annotator-hide",showControls:"annotator-visible"},o.prototype.html={element:'<div class="annotator-outer annotator-viewer">\n  <ul class="annotator-widget annotator-listing"></ul>\n</div>',item:'<li class="annotator-annotation annotator-item">\n  <span class="annotator-controls">\n    <a href="#" title="View as webpage" class="annotator-link">View as webpage</a>\n    <button title="Edit" class="annotator-edit">Edit</button>\n    <button title="Delete" class="annotator-delete">Delete</button>\n  </span>\n</li>'},o.prototype.options={readOnly:!1},o.prototype.show=function(t){var n;return e.Util.preventEventDefault(t),n=this.element.find(".annotator-controls").addClass(this.classes.showControls),setTimeout(function(t){return function(){return n.removeClass(t.classes.showControls)}}(this),500),this.element.removeClass(this.classes.hide),this.checkOrientation().publish("show")},o.prototype.isShown=function(){return!this.element.hasClass(this.classes.hide)},o.prototype.hide=function(t){return e.Util.preventEventDefault(t),this.element.addClass(this.classes.hide),this.publish("hide")},o.prototype.load=function(e){var n,o,a,i,s,c,l,u,p,d,h,f,m,g,v,y,_;for(this.annotations=e||[],h=this.element.find("ul:first").empty(),y=this.annotations,f=0,g=y.length;g>f;f++)for(n=y[f],u=t(this.item).clone().appendTo(h).data("annotation",n),a=u.find(".annotator-controls"),p=a.find(".annotator-link"),s=a.find(".annotator-edit"),i=a.find(".annotator-delete"),d=new r(n.links||[]).get("alternate",{type:"text/html"}),0===d.length||null==d[0].href?p.remove():p.attr("href",d[0].href),this.options.readOnly?(s.remove(),i.remove()):o={showEdit:function(){return s.removeAttr("disabled")},hideEdit:function(){return s.attr("disabled","disabled")},showDelete:function(){return i.removeAttr("disabled")},hideDelete:function(){return i.attr("disabled","disabled")}},_=this.fields,m=0,v=_.length;v>m;m++)l=_[m],c=t(l.element).clone().appendTo(u)[0],l.load(c,n,o);return this.publish("load",[this.annotations]),this.show()},o.prototype.addField=function(e){var n;return n=t.extend({load:function(){}},e),n.element=t("<div />")[0],this.fields.push(n),n.element,this},o.prototype.onEditClick=function(t){return this.onButtonClick(t,"edit")},o.prototype.onDeleteClick=function(t){return this.onButtonClick(t,"delete")},o.prototype.onButtonClick=function(e,n){var r;return r=t(e.target).parents(".annotator-annotation"),this.publish(n,[r.data("annotation")])},o}(e.Widget),r=function(){function e(t){this.data=t}return e.prototype.get=function(e,n){var r,o,a,i,s,c,l,u,p;for(null==n&&(n={}),n=t.extend({},n,{rel:e}),a=function(){var t;t=[];for(o in n)N.call(n,o)&&(s=n[o],t.push(o));return t}(),u=this.data,p=[],c=0,l=u.length;l>c;c++)r=u[c],i=a.reduce(function(t,e){return t&&r[e]===n[e]},!0),i&&p.push(r);return p},e}(),e=e||{},e.Notification=function(n){function r(e){this.hide=k(this.hide,this),this.show=k(this.show,this),r.__super__.constructor.call(this,t(this.options.html).appendTo(document.body)[0],e)}return S(r,n),r.prototype.events={click:"hide"},r.prototype.options={html:"<div class='annotator-notice'></div>",classes:{show:"annotator-notice-show",info:"annotator-notice-info",success:"annotator-notice-success",error:"annotator-notice-error"}},r.prototype.show=function(n,r){return null==r&&(r=e.Notification.INFO),this.currentStatus=r,t(this.element).addClass(this.options.classes.show).addClass(this.options.classes[this.currentStatus]).html(a.escape(n||"")),setTimeout(this.hide,5e3),this},r.prototype.hide=function(){return null==this.currentStatus&&(this.currentStatus=e.Notification.INFO),t(this.element).removeClass(this.options.classes.show).removeClass(this.options.classes[this.currentStatus]),this},r}(n),e.Notification.INFO="info",e.Notification.SUCCESS="success",e.Notification.ERROR="error",t(function(){var t;return t=new e.Notification,e.showNotification=t.show,e.hideNotification=t.hide}),e.Plugin.Unsupported=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return S(r,n),r.prototype.options={message:e._t("Sorry your current browser does not support the Annotator")},r.prototype.pluginInit=function(){return e.supported()?void 0:t(function(n){return function(){return e.showNotification(n.options.message),void 0===window.XMLHttpRequest&&void 0!==ActiveXObject?t("html").addClass("ie6"):void 0}}(this))},r}(e.Plugin),c=function(t){var e,n,r,o,a,i;return o="([0-9]{4})(-([0-9]{2})(-([0-9]{2})(T([0-9]{2}):([0-9]{2})(:([0-9]{2})(\\.([0-9]+))?)?(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?",e=t.match(new RegExp(o)),r=0,n=new Date(e[1],0,1),e[3]&&n.setMonth(e[3]-1),e[5]&&n.setDate(e[5]),e[7]&&n.setHours(e[7]),e[8]&&n.setMinutes(e[8]),e[10]&&n.setSeconds(e[10]),e[12]&&n.setMilliseconds(1e3*Number("0."+e[12])),e[14]&&(r=60*Number(e[16])+Number(e[17]),r*=null!=(i="-"===e[15])?i:{1:-1}),r-=n.getTimezoneOffset(),a=Number(n)+60*r*1e3,n.setTime(Number(a)),n},i=function(t){var e,n,r,o,a,i,s,c,l,u,p,d,h;if("undefined"!=typeof atob&&null!==atob)return atob(t);if(n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l=0,e=0,o="",h=[],!t)return t;for(t+="";l<t.length;)a=n.indexOf(t.charAt(l++)),i=n.indexOf(t.charAt(l++)),s=n.indexOf(t.charAt(l++)),c=n.indexOf(t.charAt(l++)),r=a<<18|i<<12|s<<6|c,u=r>>16&255,p=r>>8&255,d=255&r,64===s?h[e++]=String.fromCharCode(u):64===c?h[e++]=String.fromCharCode(u,p):h[e++]=String.fromCharCode(u,p,d);return h.join("")},s=function(t){var e,n,r,o;if(n=t.length%4,0!==n)for(e=r=0,o=4-n;o>=0?o>r:r>o;e=o>=0?++r:--r)t+="=";return t=t.replace(/-/g,"+"),t=t.replace(/_/g,"/"),i(t)},g=function(t){var e,n,r,o;return o=t.split("."),e=o[0],n=o[1],r=o[2],JSON.parse(s(n))},e.Plugin.Auth=function(n){function r(t,e){r.__super__.constructor.apply(this,arguments),this.waitingForToken=[],this.options.token?this.setToken(this.options.token):this.requestToken()}return S(r,n),r.prototype.options={token:null,tokenUrl:"/auth/token",autoFetch:!0},r.prototype.requestToken=function(){return this.requestInProgress=!0,t.ajax({url:this.options.tokenUrl,dataType:"text",xhrFields:{withCredentials:!0}}).done(function(t){return function(e,n,r){return t.setToken(e)}}(this)).fail(function(t){return function(t,n,r){var o;return o=e._t("Couldn't get auth token:"),console.error(""+o+" "+r,t),e.showNotification(""+o+" "+t.responseText,e.Notification.ERROR)}}(this)).always(function(t){return function(){return t.requestInProgress=!1}}(this))},r.prototype.setToken=function(t){var n;if(this.token=t,this._unsafeToken=g(t),this.haveValidToken()){for(this.options.autoFetch&&(this.refreshTimeout=setTimeout(function(t){return function(){return t.requestToken()}}(this),1e3*(this.timeToExpiry()-2))),this.updateHeaders(),n=[];this.waitingForToken.length>0;)n.push(this.waitingForToken.pop()(this._unsafeToken));return n}return console.warn(e._t("Didn't get a valid token.")),this.options.autoFetch?(console.warn(e._t("Getting a new token in 10s.")),setTimeout(function(t){return function(){return t.requestToken()}}(this),1e4)):void 0},r.prototype.haveValidToken=function(){var t;return t=this._unsafeToken&&this._unsafeToken.issuedAt&&this._unsafeToken.ttl&&this._unsafeToken.consumerKey,t&&this.timeToExpiry()>0?!0:!1},r.prototype.timeToExpiry=function(){var t,e,n,r;return n=(new Date).getTime()/1e3,e=c(this._unsafeToken.issuedAt).getTime()/1e3,t=e+this._unsafeToken.ttl,r=t-n,r>0?r:0},r.prototype.updateHeaders=function(){var e;return e=this.element.data("annotator:headers"),this.element.data("annotator:headers",t.extend(e,{"x-annotator-auth-token":this.token}))},r.prototype.withToken=function(t){return null!=t?this.haveValidToken()?t(this._unsafeToken):(this.waitingForToken.push(t),this.requestInProgress?void 0:this.requestToken()):void 0},r}(e.Plugin),e.Plugin.Store=function(n){function r(t,e){this._onError=k(this._onError,this),this._onLoadAnnotationsFromSearch=k(this._onLoadAnnotationsFromSearch,this),this._onLoadAnnotations=k(this._onLoadAnnotations,this),this._getAnnotations=k(this._getAnnotations,this),r.__super__.constructor.apply(this,arguments),this.annotations=[]}return S(r,n),r.prototype.events={annotationCreated:"annotationCreated",annotationDeleted:"annotationDeleted",annotationUpdated:"annotationUpdated"},r.prototype.options={annotationData:{},emulateHTTP:!1,loadFromSearch:!1,prefix:"/store",urls:{create:"/annotations",read:"/annotations/:id",update:"/annotations/:id",destroy:"/annotations/:id",search:"/search"}},r.prototype.pluginInit=function(){return e.supported()?this.annotator.plugins.Auth?this.annotator.plugins.Auth.withToken(this._getAnnotations):this._getAnnotations():void 0},r.prototype._getAnnotations=function(){return this.options.loadFromSearch?this.loadAnnotationsFromSearch(this.options.loadFromSearch):this.loadAnnotations()},r.prototype.annotationCreated=function(n){return D.call(this.annotations,n)<0?(this.registerAnnotation(n),this._apiRequest("create",n,function(r){return function(o){return null==o.id?console.warn(e._t("Warning: No ID returned from server for annotation "),n):(n.id=o.id,t("#id-annotator-temp").attr("id",n.id),t("#annotator-temp").attr("id","annotation-"+n.id),t("#annotation-"+n.id).children(".annotator-marginviewer-quote").show()),r.updateAnnotation(n,o)}}(this))):this.updateAnnotation(n,{})},r.prototype.annotationUpdated=function(t){return D.call(this.annotations,t)>=0?this._apiRequest("update",t,function(e){return function(n){return e.updateAnnotation(t,n)}}(this)):void 0},r.prototype.annotationDeleted=function(t){return D.call(this.annotations,t)>=0?this._apiRequest("destroy",t,function(e){return function(){
return e.unregisterAnnotation(t)}}(this)):void 0},r.prototype.registerAnnotation=function(t){return this.annotations.push(t)},r.prototype.unregisterAnnotation=function(t){return this.annotations.splice(this.annotations.indexOf(t),1)},r.prototype.updateAnnotation=function(n,r){return D.call(this.annotations,n)<0?console.error(e._t("Trying to update unregistered annotation!")):t.extend(n,r),t(n.highlights).data("annotation",n)},r.prototype.loadAnnotations=function(){return this._apiRequest("read",null,this._onLoadAnnotations)},r.prototype._onLoadAnnotations=function(t){var e,n,r,o,a,i,s,c,l;for(null==t&&(t=[]),r={},l=this.annotations,a=0,s=l.length;s>a;a++)e=l[a],r[e.id]=e;for(o=[],i=0,c=t.length;c>i;i++)e=t[i],r[e.id]?(n=r[e.id],this.updateAnnotation(n,e)):o.push(e);return this.annotations=this.annotations.concat(o),this.annotator.loadAnnotations(o.slice())},r.prototype.loadAnnotationsFromSearch=function(t){return this._apiRequest("search",t,this._onLoadAnnotationsFromSearch)},r.prototype._onLoadAnnotationsFromSearch=function(t){return null==t&&(t={}),this._onLoadAnnotations(t.rows||t.result||[])},r.prototype.dumpAnnotations=function(){var t,e,n,r,o;for(r=this.annotations,o=[],e=0,n=r.length;n>e;e++)t=r[e],o.push(JSON.parse(this._dataFor(t)));return o},r.prototype._apiRequest=function(e,n,r){var o,a,i,s;return o=n&&n.id,s=this._urlFor(e,o),a=this._apiRequestOptions(e,n,r),i=t.ajax(s,a),i._id=o,i._action=e,i},r.prototype._apiRequestOptions=function(e,n,r){var o,a,i;return a=this._methodFor(e),i={type:a,headers:this.element.data("annotator:headers"),dataType:"json",success:r||function(){},error:this._onError},!this.options.emulateHTTP||"PUT"!==a&&"DELETE"!==a||(i.headers=t.extend(i.headers,{"X-HTTP-Method-Override":a}),i.type="POST"),"search"===e?i=t.extend(i,{data:n}):(o=n&&this._dataFor(n),this.options.emulateJSON?(i.data={json:o},this.options.emulateHTTP&&(i.data._method=a),i):i=t.extend(i,{data:o,contentType:"application/json; charset=utf-8"}))},r.prototype._urlFor=function(t,e){var n;return n=null!=this.options.prefix?this.options.prefix:"",n+=this.options.urls[t],n=n.replace(/\/:id/,null!=e?"/"+e:""),n=n.replace(/:id/,null!=e?e:"")},r.prototype._methodFor=function(t){var e;return e={create:"POST",read:"GET",update:"PUT",destroy:"POST",search:"GET"},e[t]},r.prototype._dataFor=function(e){var n,r;return r=e.highlights,delete e.highlights,t.extend(e,this.options.annotationData),n=JSON.stringify(e),r&&(e.highlights=r),n},r.prototype._onError=function(t){var n,r;switch(n=t._action,r=e._t("Sorry we could not ")+n+e._t(" this annotation"),"search"===t._action?r=e._t("Sorry we could not search the store for annotations"):"read"!==t._action||t._id||(r=e._t("Sorry we could not ")+n+e._t(" the annotations from the store")),t.status){case 401:r=e._t("Sorry you are not allowed to ")+n+e._t(" this annotation");break;case 404:r=e._t("Sorry we could not connect to the annotations store");break;case 500:r=e._t("Sorry something went wrong with the annotation store")}return e.showNotification(r,e.Notification.ERROR),console.error(e._t("API request failed:")+(" '"+t.status+"'"))},r}(e.Plugin),e.Plugin.Permissions=function(n){function r(t,e){this._setAuthFromToken=k(this._setAuthFromToken,this),this.updateViewer=k(this.updateViewer,this),this.updateAnnotationPermissions=k(this.updateAnnotationPermissions,this),this.updatePermissionsField=k(this.updatePermissionsField,this),this.addFieldsToAnnotation=k(this.addFieldsToAnnotation,this),r.__super__.constructor.apply(this,arguments),this.options.user&&(this.setUser(this.options.user),delete this.options.user)}return S(r,n),r.prototype.events={beforeAnnotationCreated:"addFieldsToAnnotation"},r.prototype.options={showViewPermissionsCheckbox:!0,showEditPermissionsCheckbox:!0,userId:function(t){return t},userString:function(t){return t},userAuthorize:function(t,e,n){var r,o,a,i;if(e.permissions){if(o=e.permissions[t]||[],0===o.length)return!0;for(a=0,i=o.length;i>a;a++)if(r=o[a],this.userId(n)===r)return!0;return!1}return e.user?n?this.userId(n)===this.userId(e.user):!1:!0},user:"",permissions:{read:[],update:[],"delete":[],admin:[]}},r.prototype.pluginInit=function(){var t,n;if(e.supported())return n=this,t=function(t,e){return function(r,o){return n[t].call(n,e,r,o)}},!this.user&&this.annotator.plugins.Auth&&this.annotator.plugins.Auth.withToken(this._setAuthFromToken),this.options.showViewPermissionsCheckbox===!0&&this.annotator.editor.addField({type:"checkbox",label:e._t("Allow anyone to <strong>view</strong> this annotation"),load:t("updatePermissionsField","read"),submit:t("updateAnnotationPermissions","read")}),this.options.showEditPermissionsCheckbox===!0&&this.annotator.editor.addField({type:"checkbox",label:e._t("Allow anyone to <strong>edit</strong> this annotation"),load:t("updatePermissionsField","update"),submit:t("updateAnnotationPermissions","update")}),this.annotator.viewer.addField({load:this.updateViewer}),this.annotator.plugins.Filter?this.annotator.plugins.Filter.addFilter({label:e._t("User"),property:"user",isFiltered:function(t){return function(e,n){var r,o,a,i;if(n=t.options.userString(n),!e||!n)return!1;for(i=e.split(/\s*/),o=0,a=i.length;a>o;o++)if(r=i[o],-1===n.indexOf(r))return!1;return!0}}(this)}):void 0},r.prototype.setUser=function(t){return this.user=t},r.prototype.addFieldsToAnnotation=function(t){return t&&(t.permissions=this.options.permissions,this.user)?t.user=this.user:void 0},r.prototype.authorize=function(t,e,n){return void 0===n&&(n=this.user),this.options.userAuthorize?this.options.userAuthorize.call(this.options,t,e,n):!0},r.prototype.updatePermissionsField=function(e,n,r){var o;return n=t(n).show(),o=n.find("input").removeAttr("disabled"),this.authorize("admin",r)||n.hide(),this.authorize(e,r||{},null)?o.attr("checked","checked"):o.removeAttr("checked")},r.prototype.updateAnnotationPermissions=function(e,n,r){var o;return r.permissions||(r.permissions=this.options.permissions),o=e+"-permissions",t(n).find("input").is(":checked")?r.permissions[e]=[]:r.permissions[e]=[this.options.userId(this.user)]},r.prototype.updateViewer=function(n,r,o){var a,i;return n=t(n),i=this.options.userString(r.user),r.user&&i&&"string"==typeof i?(a=e.Util.escape(this.options.userString(r.user)),n.html(a).addClass("annotator-user")):n.remove(),o&&(this.authorize("update",r)||o.hideEdit(),!this.authorize("delete",r))?o.hideDelete():void 0},r.prototype._setAuthFromToken=function(t){return this.setUser(t.userId)},r}(e.Plugin),e.Plugin.AnnotateItPermissions=function(e){function n(){return this._setAuthFromToken=k(this._setAuthFromToken,this),this.updateAnnotationPermissions=k(this.updateAnnotationPermissions,this),this.updatePermissionsField=k(this.updatePermissionsField,this),this.addFieldsToAnnotation=k(this.addFieldsToAnnotation,this),n.__super__.constructor.apply(this,arguments)}return S(n,e),n.prototype.options={showViewPermissionsCheckbox:!0,showEditPermissionsCheckbox:!0,groups:{world:"group:__world__",authenticated:"group:__authenticated__",consumer:"group:__consumer__"},userId:function(t){return t.userId},userString:function(t){return t.userId},userAuthorize:function(t,e,n){var r,o,a,i,s,c;return o=e.permissions||{},r=o[t]||[],a=this.groups.world,D.call(r,a)>=0?!0:null!=n&&null!=n.userId&&null!=n.consumerKey?n.userId===e.user&&n.consumerKey===e.consumer?!0:(i=this.groups.authenticated,D.call(r,i)>=0?!0:n.consumerKey===e.consumer&&(s=this.groups.consumer,D.call(r,s)>=0)?!0:n.consumerKey===e.consumer&&(c=n.userId,D.call(r,c)>=0)?!0:n.consumerKey===e.consumer&&n.admin?!0:!1):!1},permissions:{read:["group:__world__"],update:[],"delete":[],admin:[]}},n.prototype.addFieldsToAnnotation=function(t){return t&&(t.permissions=this.options.permissions,this.user)?(t.user=this.user.userId,t.consumer=this.user.consumerKey):void 0},n.prototype.updatePermissionsField=function(e,n,r){var o;return n=t(n).show(),o=n.find("input").removeAttr("disabled"),this.authorize("admin",r)||n.hide(),this.user&&this.authorize(e,r||{},{userId:"__nonexistentuser__",consumerKey:this.user.consumerKey})?o.attr("checked","checked"):o.removeAttr("checked")},n.prototype.updateAnnotationPermissions=function(e,n,r){var o;return r.permissions||(r.permissions=this.options.permissions),o=e+"-permissions",t(n).find("input").is(":checked")?r.permissions[e]=["read"===e?this.options.groups.world:this.options.groups.consumer]:r.permissions[e]=[]},n.prototype._setAuthFromToken=function(t){return this.setUser(t)},n}(e.Plugin.Permissions),e.Plugin.Filter=function(n){function r(e,n){this._onPreviousClick=k(this._onPreviousClick,this),this._onNextClick=k(this._onNextClick,this),this._onFilterKeyup=k(this._onFilterKeyup,this),this._onFilterBlur=k(this._onFilterBlur,this),this._onFilterFocus=k(this._onFilterFocus,this),this.updateHighlights=k(this.updateHighlights,this);var o;e=t(this.html.element).appendTo((null!=n?n.appendTo:void 0)||this.options.appendTo),r.__super__.constructor.call(this,e,n),(o=this.options).filters||(o.filters=[]),this.filter=t(this.html.filter),this.filters=[],this.current=0}return S(r,n),r.prototype.events={".annotator-filter-property input focus":"_onFilterFocus",".annotator-filter-property input blur":"_onFilterBlur",".annotator-filter-property input keyup":"_onFilterKeyup",".annotator-filter-previous click":"_onPreviousClick",".annotator-filter-next click":"_onNextClick",".annotator-filter-clear click":"_onClearClick"},r.prototype.classes={active:"annotator-filter-active",hl:{hide:"annotator-hl-filtered",active:"annotator-hl-active"}},r.prototype.html={element:'<div class="annotator-filter">\n  <strong>'+e._t("Navigate:")+'</strong>\n<span class="annotator-filter-navigation">\n  <button class="annotator-filter-previous">'+e._t("Previous")+'</button>\n<button class="annotator-filter-next">'+e._t("Next")+"</button>\n</span>\n<strong>"+e._t("Filter by:")+"</strong>\n</div>",filter:'<span class="annotator-filter-property">\n  <label></label>\n  <input/>\n  <button class="annotator-filter-clear">'+e._t("Clear")+"</button>\n</span>"},r.prototype.options={appendTo:"body",filters:[],addAnnotationFilter:!0,isFiltered:function(t,e){var n,r,o,a;if(!t||!e)return!1;for(a=t.split(/\s+/),r=0,o=a.length;o>r;r++)if(n=a[r],-1===e.indexOf(n))return!1;return!0}},r.prototype.pluginInit=function(){var t,n,r,o;for(o=this.options.filters,n=0,r=o.length;r>n;n++)t=o[n],this.addFilter(t);return this.updateHighlights(),this._setupListeners()._insertSpacer(),this.options.addAnnotationFilter===!0?this.addFilter({label:e._t("Annotation"),property:"text"}):void 0},r.prototype.destroy=function(){var e,n;return r.__super__.destroy.apply(this,arguments),n=t("html"),e=parseInt(n.css("padding-top"),10)||0,n.css("padding-top",e-this.element.outerHeight()),this.element.remove()},r.prototype._insertSpacer=function(){var e,n;return n=t("html"),e=parseInt(n.css("padding-top"),10)||0,n.css("padding-top",e+this.element.outerHeight()),this},r.prototype._setupListeners=function(){var t,e,n,r;for(e=["annotationsLoaded","annotationCreated","annotationUpdated","annotationDeleted"],n=0,r=e.length;r>n;n++)t=e[n],this.annotator.subscribe(t,this.updateHighlights);return this},r.prototype.addFilter=function(n){var r,o;return o=t.extend({label:"",property:"",isFiltered:this.options.isFiltered},n),function(){var t,e,n,a;for(n=this.filters,a=[],t=0,e=n.length;e>t;t++)r=n[t],r.property===o.property&&a.push(r);return a}.call(this).length||(o.id="annotator-filter-"+o.property,o.annotations=[],o.element=this.filter.clone().appendTo(this.element),o.element.find("label").html(o.label).attr("for",o.id),o.element.find("input").attr({id:o.id,placeholder:e._t("Filter by ")+o.label+"…"}),o.element.find("button").hide(),o.element.data("filter",o),this.filters.push(o)),this},r.prototype.updateFilter=function(e){var n,r,o,a,i,s,c;if(e.annotations=[],this.updateHighlights(),this.resetHighlights(),o=t.trim(e.element.find("input").val())){for(r=this.highlights.map(function(){return t(this).data("annotation")}),c=t.makeArray(r),i=0,s=c.length;s>i;i++)n=c[i],a=n[e.property],e.isFiltered(o,a)&&e.annotations.push(n);return this.filterHighlights()}},r.prototype.updateHighlights=function(){return this.highlights=this.annotator.element.find(".annotator-hl:visible"),this.filtered=this.highlights.not(this.classes.hl.hide)},r.prototype.filterHighlights=function(){var e,n,r,o,a,i,s,c,l,u;for(e=t.grep(this.filters,function(t){return!!t.annotations.length}),o=(null!=(u=e[0])?u.annotations:void 0)||[],e.length>1&&(r=[],t.each(e,function(){return t.merge(r,this.annotations)}),s=[],o=[],t.each(r,function(){return-1===t.inArray(this,s)?s.push(this):o.push(this)})),a=this.highlights,i=c=0,l=o.length;l>c;i=++c)n=o[i],a=a.not(n.highlights);return a.addClass(this.classes.hl.hide),this.filtered=this.highlights.not(this.classes.hl.hide),this},r.prototype.resetHighlights=function(){return this.highlights.removeClass(this.classes.hl.hide),this.filtered=this.highlights,this},r.prototype._onFilterFocus=function(e){var n;return n=t(e.target),n.parent().addClass(this.classes.active),n.next("button").show()},r.prototype._onFilterBlur=function(e){var n;return e.target.value?void 0:(n=t(e.target),n.parent().removeClass(this.classes.active),n.next("button").hide())},r.prototype._onFilterKeyup=function(e){var n;return n=t(e.target).parent().data("filter"),n?this.updateFilter(n):void 0},r.prototype._findNextHighlight=function(t){var e,n,r,o,a,i,s,c;return this.highlights.length?(i=t?0:-1,c=t?-1:0,s=t?"lt":"gt",e=this.highlights.not("."+this.classes.hl.hide),r=e.filter("."+this.classes.hl.active),r.length||(r=e.eq(i)),n=r.data("annotation"),o=e.index(r[0]),a=e.filter(":"+s+"("+o+")").not(n.highlights).eq(c),a.length||(a=e.eq(c)),this._scrollToHighlight(a.data("annotation").highlights)):this},r.prototype._onNextClick=function(t){return this._findNextHighlight()},r.prototype._onPreviousClick=function(t){return this._findNextHighlight(!0)},r.prototype._scrollToHighlight=function(e){return e=t(e),this.highlights.removeClass(this.classes.hl.active),e.addClass(this.classes.hl.active),t("html, body").animate({scrollTop:e.offset().top-(this.element.height()+20)},150)},r.prototype._onClearClick=function(e){return t(e.target).prev("input").val("").keyup().blur()},r}(e.Plugin),e.Plugin.Markdown=function(n){function r(t,n){this.updateTextField=k(this.updateTextField,this),null!=("undefined"!=typeof Showdown&&null!==Showdown?Showdown.converter:void 0)?(r.__super__.constructor.apply(this,arguments),this.converter=new Showdown.converter):console.error(e._t("To use the Markdown plugin, you must include Showdown into the page first."))}return S(r,n),r.prototype.events={annotationViewerTextField:"updateTextField"},r.prototype.updateTextField=function(n,r){var o;return o=e.Util.escape(r.text||""),t(n).html(this.convert(o))},r.prototype.convert=function(t){return this.converter.makeHtml(t)},r}(e.Plugin),e.Plugin.Tags=function(n){function r(){return this.setAnnotationTags=k(this.setAnnotationTags,this),this.updateField=k(this.updateField,this),r.__super__.constructor.apply(this,arguments)}return S(r,n),r.prototype.options={parseTags:function(e){var n;return e=t.trim(e),n=[],e&&(n=e.split(/\s+/)),n},stringifyTags:function(t){return t.join(" ")}},r.prototype.field=null,r.prototype.input=null,r.prototype.pluginInit=function(){return e.supported()?(this.field=this.annotator.editor.addField({label:e._t("Add some tags here")+"…",load:this.updateField,submit:this.setAnnotationTags}),this.annotator.viewer.addField({load:this.updateViewer}),this.annotator.plugins.Filter&&this.annotator.plugins.Filter.addFilter({label:e._t("Tag"),property:"tags",isFiltered:e.Plugin.Tags.filterCallback}),this.input=t(this.field).find(":input")):void 0},r.prototype.parseTags=function(t){return this.options.parseTags(t)},r.prototype.stringifyTags=function(t){return this.options.stringifyTags(t)},r.prototype.updateField=function(t,e){var n;return n="",e.tags&&(n=this.stringifyTags(e.tags)),this.input.val(n)},r.prototype.setAnnotationTags=function(t,e){return e.tags=this.parseTags(this.input.val())},r.prototype.updateViewer=function(n,r){return n=t(n),r.tags&&t.isArray(r.tags)&&r.tags.length?n.addClass("annotator-tags").html(function(){var n;return n=t.map(r.tags,function(t){return'<span class="annotator-tag">'+e.Util.escape(t)+"</span>"}).join(" ")}):n.remove()},r}(e.Plugin),e.Plugin.Tags.filterCallback=function(t,e){var n,r,o,a,i,s,c,l;if(null==e&&(e=[]),o=0,r=[],t)for(r=t.split(/\s+/g),i=0,c=r.length;c>i;i++)if(n=r[i],e.length)for(s=0,l=e.length;l>s;s++)a=e[s],-1!==a.indexOf(n)&&(o+=1);return o===r.length},e.prototype.setupPlugins=function(n,r){var o,a,i,s,c,l,u,p,d;null==n&&(n={}),null==r&&(r={}),l=e.Util.getGlobal(),s=["Unsupported","Auth","Tags","Filter","Store","AnnotateItPermissions"],l.Showdown&&s.push("Markdown"),c=l.location.href.split(/#|\?/).shift()||"",i={Tags:{},Filter:{filters:[{label:e._t("User"),property:"user"},{label:e._t("Tags"),property:"tags"}]},Auth:{tokenUrl:n.tokenUrl||"http://annotateit.org/api/token"},Store:{prefix:n.storeUrl||"http://annotateit.org/api",annotationData:{uri:c},loadFromSearch:{uri:c}}};for(o in r)N.call(r,o)&&(a=r[o],D.call(s,o)<0&&s.push(o));for(t.extend(!0,i,r),d=[],u=0,p=s.length;p>u;u++)o=s[u],o in i&&!i[o]?d.push(void 0):d.push(this.addPlugin(o,i[o]));return d}}).call(this);var __bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},indexOf=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};Annotator.Plugin.AnnotatorEvents=function(t){function e(t,n){this.onAnnotationClicked=__bind(this.onAnnotationClicked,this),this.onAnnotationCreated=__bind(this.onAnnotationCreated,this),this.onAnnotationUpdated=__bind(this.onAnnotationUpdated,this),this.onAnnotationDeleted=__bind(this.onAnnotationDeleted,this),this.annotationsLoaded=__bind(this.annotationsLoaded,this),this.onMouseOverAnnotation=__bind(this.onMouseOverAnnotation,this),e.__super__.constructor.apply(this,arguments)}function n(t){var e="pdf"==contractApp.getView()?"pdf":"text",n=$(t.element),r=n.position(),o=$("."+e+"-annotator"),a=o.find("form.annotator-widget"),i=o.find("div.annotator-editor"),s=a.height()+25;o.width()/2<r.left?(n.addClass("annotator-invert-x"),i.addClass("annotator-invert-x")):(n.removeClass("annotator-invert-x"),i.removeClass("annotator-invert-x"));var c=r.top-o.scrollTop();s>c?(n.addClass("annotator-invert-y"),i.addClass("annotator-invert-y")):(n.removeClass("annotator-invert-y"),i.removeClass("annotator-invert-y"))}function r(t,e){var n=$(t.element),r="pdf"==contractApp.getView()?"pdf":"text",o=n.position(),a=$("."+r+"-annotator"),i=a.find("ul.annotator-widget"),s=i.height()+25;a.width()/2<o.left?(n.addClass("annotator-invert-x"),i.addClass("annotator-invert-x")):(n.removeClass("annotator-invert-x"),i.removeClass("annotator-invert-x"));var c=o.top-a.scrollTop();s>c?(n.addClass("annotator-invert-y"),i.addClass("annotator-invert-y")):(n.removeClass("annotator-invert-y"),i.removeClass("annotator-invert-y"))}return __extends(e,t),e.prototype.events={annotationCreated:"onAnnotationCreated",annotationDeleted:"onAnnotationDeleted",annotationUpdated:"onAnnotationUpdated",annotationsLoaded:"annotationsLoaded","annotorious:annotation-clicked":"onAnnotationClicked","annotorious:mouse-over-annotation":"onMouseOverAnnotation"},e.prototype.field=null,e.prototype.input=null,e.prototype.pluginInit=function(t){var e=this.annotator;Annotator.supported()&&(e.viewer.addField({load:this.updateViewer}),this.annotator.subscribe("annotationEditorShown",n).subscribe("annotationViewerShown",r))},e.prototype.options={AnnotatorEvents:{}},e.prototype.onAnnotationClicked=function(t){this.contractApp.trigger("annotations:highlight",t.annotation)},e.prototype.onAnnotationCreated=function(t){t.page=this.contractApp.getCurrentPage(),t.category=t.category.trim();var e=this;setTimeout(function(n){e.contractApp.trigger("annotationCreated",t)},500)},e.prototype.onAnnotationUpdated=function(t){this.contractApp.trigger("annotationUpdated",t)},e.prototype.onAnnotationDeleted=function(t){this.contractApp.trigger("annotationDeleted",t)},e.prototype.onMouseOverAnnotation=function(t){r(t.mouseEvent)},e.prototype.annotationsLoaded=function(t){var e=contractApp.getSelectedAnnotation(),n=window.location.hash;0===e&&""!=n&&"undefined"!=typeof n.split("annotation/")[1]&&(e=n.split("annotation/")[1]),"pdf"==contractApp.getView()&&setTimeout(function(){contractApp.showPdfAnnotationPopup(e)},600),"text"==contractApp.getView()&&contractApp.showTextAnnotationPopup(e)},e}(Annotator.Plugin),Annotator.Plugin.AnnotatorNRGIViewer=function(t){function e(t,n){e.__super__.constructor.apply(this,arguments)}function n(t){var e="",n=t.text;if("undefined"==typeof n)return!1;""!=n&&(e=n.split(" ").splice(0,10).join(" "),e=nl2br(e),n.split(" ").length>10&&(e+=" ..."));var r="";return"undefined"!=typeof t.article_reference&&""!=t.article_reference&&(r=" - "+t.article_reference),'<div class="annotation-viewer-text">'+e+r+"</div>"}function r(t){return""}function o(t){return'<div class="annotation-viewer-category">'+t.category+"</div>"}function a(t){var e="",n=annotationsCollection.relatedAnnotations(t);if(n.length>0){var r=[];n.sort(function(t,e){return t.get("page_no")-e.get("page_no")});var o=_.groupBy(n,function(t){return t.get("page_no")});o=_.toArray(o),o.map(function(t,e){var n=t[0],o=!1;e<length-1&&(o=!0);var a=[];t.map(function(t,e){var n="",r="";t.get("shapes")?(r="pdf",n="#/"+r+"/page/"+t.get("page_no")+"/annotation/"+t.get("id")):(r="text",n="#/"+r+"/page/"+t.get("page_no")+"/annotation/"+t.get("id"));var o=""!=t.get("article_reference")?t.get("article_reference"):t.get("page_no");a.push('<a style="margin: 0px 3px" data-view="'+r+'" data-annotation="'+t.get("id")+'" class="parent_annotation_link" href="'+n+'">'+o+"</a>")});var i=n.get("page_no");i+=" ("+a.join(", ")+")",r.push(i)}),e+='<p style="padding: 5px 0px">',e+=o.length>1?"Pages: ":"Page: ",e+=r.join(", "),e+="</p>"}return e}return __extends(e,t),e.prototype.field=null,e.prototype.input=null,e.prototype.pluginInit=function(t){var e=this.annotator;Annotator.supported()&&e.viewer.addField({load:this.updateViewer})},e.prototype.updateViewer=function(t,e){var i=$(t.parentNode).find("div:first-of-type")[0],s=n(e);s+=r(e),s+=o(e),s+=a(e),$(i).html(s),$(t).remove(),$(i).on("click","a.annotation-viewer-more",function(t){t.preventDefault(),contractApp.trigger("annotations:highlight",e)}),$(".annotation-viewer-category").html(_lc(e.category_key,e.category)),$(document).on("click",".parent_annotation_link",function(){var t=$(this);"text"==t.data("view")&&setTimeout(function(){contractApp.showTextAnnotationPopup(t.data("annotation")),contractApp.trigger("annotations:highlight",{id:t.data("annotation")})},300),"pdf"==t.data("view")&&setTimeout(function(){contractApp.showPdfAnnotationPopup(t.data("annotation")),contractApp.trigger("annotations:highlight",{id:t.data("annotation")})},300)})},e}(Annotator.Plugin),Annotator.Plugin.PdfAnnotator=function(t){function e(t,n){e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.events={},e.prototype.field=null,e.prototype.notification=null,e.prototype.pluginInit=function(t){var e=this.annotator;if(Annotator.supported()){var n=e.element,r=this;e.subscribe("annotationsLoaded",function(t){$(".annotator-pdf-hl").remove(),t.map(function(t){return void 0===t.shapes?"":void r.annotationLoader(t)})}),n.on("mouseover","div",function(){var t=$(this).data("annotator");if(t){var n={};n.top=parseInt($(this).css("top"))+parseInt($(this).height()),n.left=parseInt($(this).css("left"))+parseInt($(this).width()/2),e.showViewer([t],n)}})}},e.prototype.annotationLoader=function(t){var e=t.shapes[0].geometry;e=this.getShape(e);$("<div></div>").appendTo(this.annotator.element.find(".annotator-wrapper")).data("annotator",t).addClass("annotator-hl").addClass("annotator-pdf-hl").css({position:"absolute",left:e.x,top:e.y,height:e.height,width:e.width})},e.prototype.options={PdfAnnotator:{}},e.prototype.getShape=function(t){var e=this.annotator.element.find("canvas"),n={};return n.x=t.x*e.width(),n.y=t.y*e.height(),n.height=t.height*e.height(),n.width=t.width*e.width(),n},e}(Annotator.Plugin);var AnnotatorjsView=Backbone.View.extend({initialize:function(t){var e=this;return this.options=t,this.api=t.api,this.content=$(this.options.el).annotator({readOnly:!0}),this.content.data("annotator").setupAnnotation=function(t){return void 0!==t.ranges||$.isEmptyObject(t)?e.content.data("annotator").__proto__.setupAnnotation.call(e.content.data("annotator"),t):void 0},this.contractApp=t.contractApp,this.content.annotator("addPlugin","AnnotatorEvents"),this.content.annotator("addPlugin","AnnotatorNRGIViewer"),this.content.data("annotator").plugins.AnnotatorEvents.contractApp=t.contractApp,this.content.data("annotator").plugins.AnnotatorNRGIViewer.contractApp=t.contractApp,this.setupStore(),this},changePage:function(){var t=this.contractApp.getCurrentPage(),e=this.contractApp.getContractId(),n=this.content.data("annotator").plugins.Store;n.options.annotationData={url:this.api,contract:e,page:t,document_page_no:t}},populateCategories:function(){this.content.annotator("addPlugin","Categories",{category:this.annotationCategories.pluck("name")})},setupStore:function(){var t=this,e=this.contractApp.getCurrentPage(),n=this.contractApp.getContractId();return this.content.annotator("addPlugin","Store",{prefix:t.api,loadFromSearch:{url:t.api,contract:n,page:e,document_page_no:e},annotationData:{url:t.api,contract:n,page:e,document_page_no:e}}),this},reload:function(){var t=this,e=this.contractApp.getCurrentPage(),n=this.contractApp.getContractId(),r=this.content.data("annotator").plugins.Store;r.annotations&&(r.annotations=[]),r.options.loadFromSearch={url:t.api,contract:n,page:e,document_page_no:e},r.options.annotationData={url:t.api,contract:n,page:e,document_page_no:e},r.loadAnnotationsFromSearch(r.options.loadFromSearch)}}),PdfAnnotatorjsView=AnnotatorjsView.extend({initialize:function(t){AnnotatorjsView.prototype.initialize(t),_.extend(this,AnnotatorjsView),t.enablePdfAnnotation&&this.content.annotator("addPlugin","PdfAnnotator")},pageUpdated:function(){var t=this,e=this.contractApp.getCurrentPage(),n=this.contractApp.getContractId();if(this.content.data("annotator").plugins.Store){var r=this.content.data("annotator").plugins.Store;r.annotations&&(r.annotations=[]),r.options.loadFromSearch={url:t.api,contract:n,page:e,document_page_no:e},r.options.annotationData={url:t.api,contract:n,page:e,document_page_no:e},r.loadAnnotationsFromSearch(r.options.loadFromSearch)}else this.setupStore()}});!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.React=t()}}(function(){return function t(e,n,r){function o(i,s){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!s&&c)return c(i,!0);if(a)return a(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[i]={exports:{}};e[i][0].call(u.exports,function(t){var n=e[i][1][t];return o(n?n:t)},u,u.exports,t,e,n,r)}return n[i].exports}for(var a="function"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(t,e,n){"use strict";var r=t(25),o=t(31),a=t(42),i=t(34),s=t(69),c=t(98),l=t(100),u=t(127),p=t(122),d=t(170);o.addons={CSSTransitionGroup:i,LinkedStateMixin:r,PureRenderMixin:a,TransitionGroup:c,batchedUpdates:l.batchedUpdates,classSet:u,cloneWithProps:p,createFragment:s.create,update:d},o.addons.Perf=t(61),o.addons.TestUtils=t(95),e.exports=o},{100:100,122:122,127:127,170:170,25:25,31:31,34:34,42:42,61:61,69:69,95:95,98:98}],2:[function(t,e,n){"use strict";var r=t(134),o={componentDidMount:function(){this.props.autoFocus&&r(this.getDOMNode())}};e.exports=o},{134:134}],3:[function(t,e,n){"use strict";function r(){var t=window.opera;return"object"==typeof t&&"function"==typeof t.version&&parseInt(t.version(),10)<=12}function o(t){return(t.ctrlKey||t.altKey||t.metaKey)&&!(t.ctrlKey&&t.altKey)}function a(t){switch(t){case P.topCompositionStart:return N.compositionStart;case P.topCompositionEnd:return N.compositionEnd;case P.topCompositionUpdate:return N.compositionUpdate}}function i(t,e){return t===P.topKeyDown&&e.keyCode===b}function s(t,e){switch(t){case P.topKeyUp:return-1!==w.indexOf(e.keyCode);case P.topKeyDown:return e.keyCode!==b;case P.topKeyPress:case P.topMouseDown:case P.topBlur:return!0;default:return!1}}function c(t){var e=t.detail;return"object"==typeof e&&"data"in e?e.data:null}function l(t,e,n,r){var o,l;if(C?o=a(t):k?s(t,r)&&(o=N.compositionEnd):i(t,r)&&(o=N.compositionStart),!o)return null;R&&(k||o!==N.compositionStart?o===N.compositionEnd&&k&&(l=k.getData()):k=g.getPooled(e));var u=v.getPooled(o,n,r);if(l)u.data=l;else{var p=c(r);null!==p&&(u.data=p)}return f.accumulateTwoPhaseDispatches(u),u}function u(t,e){switch(t){case P.topCompositionEnd:return c(e);case P.topKeyPress:var n=e.which;return n!==A?null:(S=!0,T);case P.topTextInput:var r=e.data;return r===T&&S?null:r;default:return null}}function p(t,e){if(k){if(t===P.topCompositionEnd||s(t,e)){var n=k.getData();return g.release(k),k=null,n}return null}switch(t){case P.topPaste:return null;case P.topKeyPress:return e.which&&!o(e)?String.fromCharCode(e.which):null;case P.topCompositionEnd:return R?null:e.data;default:return null}}function d(t,e,n,r){var o;if(o=x?u(t,r):p(t,r),!o)return null;var a=y.getPooled(N.beforeInput,n,r);return a.data=o,f.accumulateTwoPhaseDispatches(a),a}var h=t(16),f=t(21),m=t(22),g=t(23),v=t(106),y=t(110),_=t(157),w=[9,13,27,32],b=229,C=m.canUseDOM&&"CompositionEvent"in window,E=null;m.canUseDOM&&"documentMode"in document&&(E=document.documentMode);var x=m.canUseDOM&&"TextEvent"in window&&!E&&!r(),R=m.canUseDOM&&(!C||E&&E>8&&11>=E),A=32,T=String.fromCharCode(A),P=h.topLevelTypes,N={beforeInput:{phasedRegistrationNames:{bubbled:_({onBeforeInput:null}),captured:_({onBeforeInputCapture:null})},dependencies:[P.topCompositionEnd,P.topKeyPress,P.topTextInput,P.topPaste]},compositionEnd:{phasedRegistrationNames:{bubbled:_({onCompositionEnd:null}),captured:_({onCompositionEndCapture:null})},dependencies:[P.topBlur,P.topCompositionEnd,P.topKeyDown,P.topKeyPress,P.topKeyUp,P.topMouseDown]},compositionStart:{phasedRegistrationNames:{bubbled:_({onCompositionStart:null}),captured:_({onCompositionStartCapture:null})},dependencies:[P.topBlur,P.topCompositionStart,P.topKeyDown,P.topKeyPress,P.topKeyUp,P.topMouseDown]},compositionUpdate:{phasedRegistrationNames:{bubbled:_({onCompositionUpdate:null}),captured:_({onCompositionUpdateCapture:null})},dependencies:[P.topBlur,P.topCompositionUpdate,P.topKeyDown,P.topKeyPress,P.topKeyUp,P.topMouseDown]}},S=!1,k=null,D={eventTypes:N,extractEvents:function(t,e,n,r){return[l(t,e,n,r),d(t,e,n,r)]}};e.exports=D},{106:106,110:110,157:157,16:16,21:21,22:22,23:23}],4:[function(t,e,n){var r=t(150),o={addClass:function(t,e){return r(!/\s/.test(e),'CSSCore.addClass takes only a single class name. "%s" contains multiple classes.',e),e&&(t.classList?t.classList.add(e):o.hasClass(t,e)||(t.className=t.className+" "+e)),t},removeClass:function(t,e){return r(!/\s/.test(e),'CSSCore.removeClass takes only a single class name. "%s" contains multiple classes.',e),e&&(t.classList?t.classList.remove(e):o.hasClass(t,e)&&(t.className=t.className.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,""))),t},conditionClass:function(t,e,n){return(n?o.addClass:o.removeClass)(t,e)},hasClass:function(t,e){return r(!/\s/.test(e),"CSS.hasClass takes only a single class name."),t.classList?!!e&&t.classList.contains(e):(" "+t.className+" ").indexOf(" "+e+" ")>-1;
}};e.exports=o},{150:150}],5:[function(t,e,n){"use strict";function r(t,e){return t+e.charAt(0).toUpperCase()+e.substring(1)}var o={boxFlex:!0,boxFlexGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0},a=["Webkit","ms","Moz","O"];Object.keys(o).forEach(function(t){a.forEach(function(e){o[r(e,t)]=o[t]})});var i={background:{backgroundImage:!0,backgroundPosition:!0,backgroundRepeat:!0,backgroundColor:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0}},s={isUnitlessNumber:o,shorthandPropertyExpansions:i};e.exports=s},{}],6:[function(t,e,n){"use strict";var r=t(5),o=t(22),a=t(121),i=t(128),s=t(148),c=t(159),l=t(171),u=c(function(t){return s(t)}),p="cssFloat";o.canUseDOM&&void 0===document.documentElement.style.cssFloat&&(p="styleFloat");var d=/^(?:webkit|moz|o)[A-Z]/,h=/;\s*$/,f={},m={},g=function(t){f.hasOwnProperty(t)&&f[t]||(f[t]=!0,l(!1,"Unsupported style property %s. Did you mean %s?",t,a(t)))},v=function(t){f.hasOwnProperty(t)&&f[t]||(f[t]=!0,l(!1,"Unsupported vendor-prefixed style property %s. Did you mean %s?",t,t.charAt(0).toUpperCase()+t.slice(1)))},y=function(t,e){m.hasOwnProperty(e)&&m[e]||(m[e]=!0,l(!1,'Style property values shouldn\'t contain a semicolon. Try "%s: %s" instead.',t,e.replace(h,"")))},_=function(t,e){t.indexOf("-")>-1?g(t):d.test(t)?v(t):h.test(e)&&y(t,e)},w={createMarkupForStyles:function(t){var e="";for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];_(n,r),null!=r&&(e+=u(n)+":",e+=i(n,r)+";")}return e||null},setValueForStyles:function(t,e){var n=t.style;for(var o in e)if(e.hasOwnProperty(o)){_(o,e[o]);var a=i(o,e[o]);if("float"===o&&(o=p),a)n[o]=a;else{var s=r.shorthandPropertyExpansions[o];if(s)for(var c in s)n[c]="";else n[o]=""}}}};e.exports=w},{121:121,128:128,148:148,159:159,171:171,22:22,5:5}],7:[function(t,e,n){"use strict";function r(){this._callbacks=null,this._contexts=null}var o=t(30),a=t(29),i=t(150);a(r.prototype,{enqueue:function(t,e){this._callbacks=this._callbacks||[],this._contexts=this._contexts||[],this._callbacks.push(t),this._contexts.push(e)},notifyAll:function(){var t=this._callbacks,e=this._contexts;if(t){i(t.length===e.length,"Mismatched list of contexts in callback queue"),this._callbacks=null,this._contexts=null;for(var n=0,r=t.length;r>n;n++)t[n].call(e[n]);t.length=0,e.length=0}},reset:function(){this._callbacks=null,this._contexts=null},destructor:function(){this.reset()}}),o.addPoolingTo(r),e.exports=r},{150:150,29:29,30:30}],8:[function(t,e,n){"use strict";function r(t){return"SELECT"===t.nodeName||"INPUT"===t.nodeName&&"file"===t.type}function o(t){var e=E.getPooled(P.change,S,t);w.accumulateTwoPhaseDispatches(e),C.batchedUpdates(a,e)}function a(t){_.enqueueEvents(t),_.processEventQueue()}function i(t,e){N=t,S=e,N.attachEvent("onchange",o)}function s(){N&&(N.detachEvent("onchange",o),N=null,S=null)}function c(t,e,n){return t===T.topChange?n:void 0}function l(t,e,n){t===T.topFocus?(s(),i(e,n)):t===T.topBlur&&s()}function u(t,e){N=t,S=e,k=t.value,D=Object.getOwnPropertyDescriptor(t.constructor.prototype,"value"),Object.defineProperty(N,"value",O),N.attachEvent("onpropertychange",d)}function p(){N&&(delete N.value,N.detachEvent("onpropertychange",d),N=null,S=null,k=null,D=null)}function d(t){if("value"===t.propertyName){var e=t.srcElement.value;e!==k&&(k=e,o(t))}}function h(t,e,n){return t===T.topInput?n:void 0}function f(t,e,n){t===T.topFocus?(p(),u(e,n)):t===T.topBlur&&p()}function m(t,e,n){return t!==T.topSelectionChange&&t!==T.topKeyUp&&t!==T.topKeyDown||!N||N.value===k?void 0:(k=N.value,S)}function g(t){return"INPUT"===t.nodeName&&("checkbox"===t.type||"radio"===t.type)}function v(t,e,n){return t===T.topClick?n:void 0}var y=t(16),_=t(18),w=t(21),b=t(22),C=t(100),E=t(108),x=t(151),R=t(153),A=t(157),T=y.topLevelTypes,P={change:{phasedRegistrationNames:{bubbled:A({onChange:null}),captured:A({onChangeCapture:null})},dependencies:[T.topBlur,T.topChange,T.topClick,T.topFocus,T.topInput,T.topKeyDown,T.topKeyUp,T.topSelectionChange]}},N=null,S=null,k=null,D=null,M=!1;b.canUseDOM&&(M=x("change")&&(!("documentMode"in document)||document.documentMode>8));var I=!1;b.canUseDOM&&(I=x("input")&&(!("documentMode"in document)||document.documentMode>9));var O={get:function(){return D.get.call(this)},set:function(t){k=""+t,D.set.call(this,t)}},U={eventTypes:P,extractEvents:function(t,e,n,o){var a,i;if(r(e)?M?a=c:i=l:R(e)?I?a=h:(a=m,i=f):g(e)&&(a=v),a){var s=a(t,e,n);if(s){var u=E.getPooled(P.change,s,o);return w.accumulateTwoPhaseDispatches(u),u}}i&&i(t,e,n)}};e.exports=U},{100:100,108:108,151:151,153:153,157:157,16:16,18:18,21:21,22:22}],9:[function(t,e,n){"use strict";var r=0,o={createReactRootIndex:function(){return r++}};e.exports=o},{}],10:[function(t,e,n){"use strict";function r(t,e,n){t.insertBefore(e,t.childNodes[n]||null)}var o=t(13),a=t(79),i=t(165),s=t(150),c={dangerouslyReplaceNodeWithMarkup:o.dangerouslyReplaceNodeWithMarkup,updateTextContent:i,processUpdates:function(t,e){for(var n,c=null,l=null,u=0;u<t.length;u++)if(n=t[u],n.type===a.MOVE_EXISTING||n.type===a.REMOVE_NODE){var p=n.fromIndex,d=n.parentNode.childNodes[p],h=n.parentID;s(d,"processUpdates(): Unable to find child %s of element. This probably means the DOM was unexpectedly mutated (e.g., by the browser), usually due to forgetting a <tbody> when using tables, nesting tags like <form>, <p>, or <a>, or using non-SVG elements in an <svg> parent. Try inspecting the child nodes of the element with React ID `%s`.",p,h),c=c||{},c[h]=c[h]||[],c[h][p]=d,l=l||[],l.push(d)}var f=o.dangerouslyRenderMarkup(e);if(l)for(var m=0;m<l.length;m++)l[m].parentNode.removeChild(l[m]);for(var g=0;g<t.length;g++)switch(n=t[g],n.type){case a.INSERT_MARKUP:r(n.parentNode,f[n.markupIndex],n.toIndex);break;case a.MOVE_EXISTING:r(n.parentNode,c[n.parentID][n.fromIndex],n.toIndex);break;case a.TEXT_CONTENT:i(n.parentNode,n.textContent);break;case a.REMOVE_NODE:}}};e.exports=c},{13:13,150:150,165:165,79:79}],11:[function(t,e,n){"use strict";function r(t,e){return(t&e)===e}var o=t(150),a={MUST_USE_ATTRIBUTE:1,MUST_USE_PROPERTY:2,HAS_SIDE_EFFECTS:4,HAS_BOOLEAN_VALUE:8,HAS_NUMERIC_VALUE:16,HAS_POSITIVE_NUMERIC_VALUE:48,HAS_OVERLOADED_BOOLEAN_VALUE:64,injectDOMPropertyConfig:function(t){var e=t.Properties||{},n=t.DOMAttributeNames||{},i=t.DOMPropertyNames||{},c=t.DOMMutationMethods||{};t.isCustomAttribute&&s._isCustomAttributeFunctions.push(t.isCustomAttribute);for(var l in e){o(!s.isStandardName.hasOwnProperty(l),"injectDOMPropertyConfig(...): You're trying to inject DOM property '%s' which has already been injected. You may be accidentally injecting the same DOM property config twice, or you may be injecting two configs that have conflicting property names.",l),s.isStandardName[l]=!0;var u=l.toLowerCase();if(s.getPossibleStandardName[u]=l,n.hasOwnProperty(l)){var p=n[l];s.getPossibleStandardName[p]=l,s.getAttributeName[l]=p}else s.getAttributeName[l]=u;s.getPropertyName[l]=i.hasOwnProperty(l)?i[l]:l,c.hasOwnProperty(l)?s.getMutationMethod[l]=c[l]:s.getMutationMethod[l]=null;var d=e[l];s.mustUseAttribute[l]=r(d,a.MUST_USE_ATTRIBUTE),s.mustUseProperty[l]=r(d,a.MUST_USE_PROPERTY),s.hasSideEffects[l]=r(d,a.HAS_SIDE_EFFECTS),s.hasBooleanValue[l]=r(d,a.HAS_BOOLEAN_VALUE),s.hasNumericValue[l]=r(d,a.HAS_NUMERIC_VALUE),s.hasPositiveNumericValue[l]=r(d,a.HAS_POSITIVE_NUMERIC_VALUE),s.hasOverloadedBooleanValue[l]=r(d,a.HAS_OVERLOADED_BOOLEAN_VALUE),o(!s.mustUseAttribute[l]||!s.mustUseProperty[l],"DOMProperty: Cannot require using both attribute and property: %s",l),o(s.mustUseProperty[l]||!s.hasSideEffects[l],"DOMProperty: Properties that have side effects must use property: %s",l),o(!!s.hasBooleanValue[l]+!!s.hasNumericValue[l]+!!s.hasOverloadedBooleanValue[l]<=1,"DOMProperty: Value can be one of boolean, overloaded boolean, or numeric value, but not a combination: %s",l)}}},i={},s={ID_ATTRIBUTE_NAME:"data-reactid",isStandardName:{},getPossibleStandardName:{},getAttributeName:{},getPropertyName:{},getMutationMethod:{},mustUseAttribute:{},mustUseProperty:{},hasSideEffects:{},hasBooleanValue:{},hasNumericValue:{},hasPositiveNumericValue:{},hasOverloadedBooleanValue:{},_isCustomAttributeFunctions:[],isCustomAttribute:function(t){for(var e=0;e<s._isCustomAttributeFunctions.length;e++){var n=s._isCustomAttributeFunctions[e];if(n(t))return!0}return!1},getDefaultValueForProperty:function(t,e){var n,r=i[t];return r||(i[t]=r={}),e in r||(n=document.createElement(t),r[e]=n[e]),r[e]},injection:a};e.exports=s},{150:150}],12:[function(t,e,n){"use strict";function r(t,e){return null==e||o.hasBooleanValue[t]&&!e||o.hasNumericValue[t]&&isNaN(e)||o.hasPositiveNumericValue[t]&&1>e||o.hasOverloadedBooleanValue[t]&&e===!1}var o=t(11),a=t(163),i=t(171),s={children:!0,dangerouslySetInnerHTML:!0,key:!0,ref:!0},c={},l=function(t){if(!(s.hasOwnProperty(t)&&s[t]||c.hasOwnProperty(t)&&c[t])){c[t]=!0;var e=t.toLowerCase(),n=o.isCustomAttribute(e)?e:o.getPossibleStandardName.hasOwnProperty(e)?o.getPossibleStandardName[e]:null;i(null==n,"Unknown DOM property %s. Did you mean %s?",t,n)}},u={createMarkupForID:function(t){return o.ID_ATTRIBUTE_NAME+"="+a(t)},createMarkupForProperty:function(t,e){if(o.isStandardName.hasOwnProperty(t)&&o.isStandardName[t]){if(r(t,e))return"";var n=o.getAttributeName[t];return o.hasBooleanValue[t]||o.hasOverloadedBooleanValue[t]&&e===!0?n:n+"="+a(e)}return o.isCustomAttribute(t)?null==e?"":t+"="+a(e):(l(t),null)},setValueForProperty:function(t,e,n){if(o.isStandardName.hasOwnProperty(e)&&o.isStandardName[e]){var a=o.getMutationMethod[e];if(a)a(t,n);else if(r(e,n))this.deleteValueForProperty(t,e);else if(o.mustUseAttribute[e])t.setAttribute(o.getAttributeName[e],""+n);else{var i=o.getPropertyName[e];o.hasSideEffects[e]&&""+t[i]==""+n||(t[i]=n)}}else o.isCustomAttribute(e)?null==n?t.removeAttribute(e):t.setAttribute(e,""+n):l(e)},deleteValueForProperty:function(t,e){if(o.isStandardName.hasOwnProperty(e)&&o.isStandardName[e]){var n=o.getMutationMethod[e];if(n)n(t,void 0);else if(o.mustUseAttribute[e])t.removeAttribute(o.getAttributeName[e]);else{var r=o.getPropertyName[e],a=o.getDefaultValueForProperty(t.nodeName,r);o.hasSideEffects[e]&&""+t[r]===a||(t[r]=a)}}else o.isCustomAttribute(e)?t.removeAttribute(e):l(e)}};e.exports=u},{11:11,163:163,171:171}],13:[function(t,e,n){"use strict";function r(t){return t.substring(1,t.indexOf(" "))}var o=t(22),a=t(126),i=t(129),s=t(142),c=t(150),l=/^(<[^ \/>]+)/,u="data-danger-index",p={dangerouslyRenderMarkup:function(t){c(o.canUseDOM,"dangerouslyRenderMarkup(...): Cannot render markup in a worker thread. Make sure `window` and `document` are available globally before requiring React when unit testing or use React.renderToString for server rendering.");for(var e,n={},p=0;p<t.length;p++)c(t[p],"dangerouslyRenderMarkup(...): Missing markup."),e=r(t[p]),e=s(e)?e:"*",n[e]=n[e]||[],n[e][p]=t[p];var d=[],h=0;for(e in n)if(n.hasOwnProperty(e)){var f,m=n[e];for(f in m)if(m.hasOwnProperty(f)){var g=m[f];m[f]=g.replace(l,"$1 "+u+'="'+f+'" ')}for(var v=a(m.join(""),i),y=0;y<v.length;++y){var _=v[y];_.hasAttribute&&_.hasAttribute(u)?(f=+_.getAttribute(u),_.removeAttribute(u),c(!d.hasOwnProperty(f),"Danger: Assigning to an already-occupied result index."),d[f]=_,h+=1):console.error("Danger: Discarding unexpected node:",_)}}return c(h===d.length,"Danger: Did not assign to every index of resultList."),c(d.length===t.length,"Danger: Expected markup to render %s nodes, but rendered %s.",t.length,d.length),d},dangerouslyReplaceNodeWithMarkup:function(t,e){c(o.canUseDOM,"dangerouslyReplaceNodeWithMarkup(...): Cannot render markup in a worker thread. Make sure `window` and `document` are available globally before requiring React when unit testing or use React.renderToString for server rendering."),c(e,"dangerouslyReplaceNodeWithMarkup(...): Missing markup."),c("html"!==t.tagName.toLowerCase(),"dangerouslyReplaceNodeWithMarkup(...): Cannot replace markup of the <html> node. This is because browser quirks make this unreliable and/or slow. If you want to render to the root you must use server rendering. See React.renderToString().");var n=a(e,i)[0];t.parentNode.replaceChild(n,t)}};e.exports=p},{126:126,129:129,142:142,150:150,22:22}],14:[function(t,e,n){"use strict";var r=t(157),o=[r({ResponderEventPlugin:null}),r({SimpleEventPlugin:null}),r({TapEventPlugin:null}),r({EnterLeaveEventPlugin:null}),r({ChangeEventPlugin:null}),r({SelectEventPlugin:null}),r({BeforeInputEventPlugin:null}),r({AnalyticsEventPlugin:null}),r({MobileSafariClickEventPlugin:null})];e.exports=o},{157:157}],15:[function(t,e,n){"use strict";var r=t(16),o=t(21),a=t(112),i=t(77),s=t(157),c=r.topLevelTypes,l=i.getFirstReactDOM,u={mouseEnter:{registrationName:s({onMouseEnter:null}),dependencies:[c.topMouseOut,c.topMouseOver]},mouseLeave:{registrationName:s({onMouseLeave:null}),dependencies:[c.topMouseOut,c.topMouseOver]}},p=[null,null],d={eventTypes:u,extractEvents:function(t,e,n,r){if(t===c.topMouseOver&&(r.relatedTarget||r.fromElement))return null;if(t!==c.topMouseOut&&t!==c.topMouseOver)return null;var s;if(e.window===e)s=e;else{var d=e.ownerDocument;s=d?d.defaultView||d.parentWindow:window}var h,f;if(t===c.topMouseOut?(h=e,f=l(r.relatedTarget||r.toElement)||s):(h=s,f=e),h===f)return null;var m=h?i.getID(h):"",g=f?i.getID(f):"",v=a.getPooled(u.mouseLeave,m,r);v.type="mouseleave",v.target=h,v.relatedTarget=f;var y=a.getPooled(u.mouseEnter,g,r);return y.type="mouseenter",y.target=f,y.relatedTarget=h,o.accumulateEnterLeaveDispatches(v,y,m,g),p[0]=v,p[1]=y,p}};e.exports=d},{112:112,157:157,16:16,21:21,77:77}],16:[function(t,e,n){"use strict";var r=t(156),o=r({bubbled:null,captured:null}),a=r({topBlur:null,topChange:null,topClick:null,topCompositionEnd:null,topCompositionStart:null,topCompositionUpdate:null,topContextMenu:null,topCopy:null,topCut:null,topDoubleClick:null,topDrag:null,topDragEnd:null,topDragEnter:null,topDragExit:null,topDragLeave:null,topDragOver:null,topDragStart:null,topDrop:null,topError:null,topFocus:null,topInput:null,topKeyDown:null,topKeyPress:null,topKeyUp:null,topLoad:null,topMouseDown:null,topMouseMove:null,topMouseOut:null,topMouseOver:null,topMouseUp:null,topPaste:null,topReset:null,topScroll:null,topSelectionChange:null,topSubmit:null,topTextInput:null,topTouchCancel:null,topTouchEnd:null,topTouchMove:null,topTouchStart:null,topWheel:null}),i={topLevelTypes:a,PropagationPhases:o};e.exports=i},{156:156}],17:[function(t,e,n){var r=t(129),o={listen:function(t,e,n){return t.addEventListener?(t.addEventListener(e,n,!1),{remove:function(){t.removeEventListener(e,n,!1)}}):t.attachEvent?(t.attachEvent("on"+e,n),{remove:function(){t.detachEvent("on"+e,n)}}):void 0},capture:function(t,e,n){return t.addEventListener?(t.addEventListener(e,n,!0),{remove:function(){t.removeEventListener(e,n,!0)}}):(console.error("Attempted to listen to events during the capture phase on a browser that does not support the capture phase. Your application will not receive some events."),{remove:r})},registerDefault:function(){}};e.exports=o},{129:129}],18:[function(t,e,n){"use strict";function r(){var t=d&&d.traverseTwoPhase&&d.traverseEnterLeave;c(t,"InstanceHandle not injected before use!")}var o=t(19),a=t(20),i=t(118),s=t(135),c=t(150),l={},u=null,p=function(t){if(t){var e=a.executeDispatch,n=o.getPluginModuleForEvent(t);n&&n.executeDispatch&&(e=n.executeDispatch),a.executeDispatchesInOrder(t,e),t.isPersistent()||t.constructor.release(t)}},d=null,h={injection:{injectMount:a.injection.injectMount,injectInstanceHandle:function(t){d=t,r()},getInstanceHandle:function(){return r(),d},injectEventPluginOrder:o.injectEventPluginOrder,injectEventPluginsByName:o.injectEventPluginsByName},eventNameDispatchConfigs:o.eventNameDispatchConfigs,registrationNameModules:o.registrationNameModules,putListener:function(t,e,n){c(!n||"function"==typeof n,"Expected %s listener to be a function, instead got type %s",e,typeof n);var r=l[e]||(l[e]={});r[t]=n},getListener:function(t,e){var n=l[e];return n&&n[t]},deleteListener:function(t,e){var n=l[e];n&&delete n[t]},deleteAllListeners:function(t){for(var e in l)delete l[e][t]},extractEvents:function(t,e,n,r){for(var a,s=o.plugins,c=0,l=s.length;l>c;c++){var u=s[c];if(u){var p=u.extractEvents(t,e,n,r);p&&(a=i(a,p))}}return a},enqueueEvents:function(t){t&&(u=i(u,t))},processEventQueue:function(){var t=u;u=null,s(t,p),c(!u,"processEventQueue(): Additional events were enqueued while processing an event queue. Support for this has not yet been implemented.")},__purge:function(){l={}},__getListenerBank:function(){return l}};e.exports=h},{118:118,135:135,150:150,19:19,20:20}],19:[function(t,e,n){"use strict";function r(){if(s)for(var t in c){var e=c[t],n=s.indexOf(t);if(i(n>-1,"EventPluginRegistry: Cannot inject event plugins that do not exist in the plugin ordering, `%s`.",t),!l.plugins[n]){i(e.extractEvents,"EventPluginRegistry: Event plugins must implement an `extractEvents` method, but `%s` does not.",t),l.plugins[n]=e;var r=e.eventTypes;for(var a in r)i(o(r[a],e,a),"EventPluginRegistry: Failed to publish event `%s` for plugin `%s`.",a,t)}}}function o(t,e,n){i(!l.eventNameDispatchConfigs.hasOwnProperty(n),"EventPluginHub: More than one plugin attempted to publish the same event name, `%s`.",n),l.eventNameDispatchConfigs[n]=t;var r=t.phasedRegistrationNames;if(r){for(var o in r)if(r.hasOwnProperty(o)){var s=r[o];a(s,e,n)}return!0}return t.registrationName?(a(t.registrationName,e,n),!0):!1}function a(t,e,n){i(!l.registrationNameModules[t],"EventPluginHub: More than one plugin attempted to publish the same registration name, `%s`.",t),l.registrationNameModules[t]=e,l.registrationNameDependencies[t]=e.eventTypes[n].dependencies}var i=t(150),s=null,c={},l={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},injectEventPluginOrder:function(t){i(!s,"EventPluginRegistry: Cannot inject event plugin ordering more than once. You are likely trying to load more than one copy of React."),s=Array.prototype.slice.call(t),r()},injectEventPluginsByName:function(t){var e=!1;for(var n in t)if(t.hasOwnProperty(n)){var o=t[n];c.hasOwnProperty(n)&&c[n]===o||(i(!c[n],"EventPluginRegistry: Cannot inject two different event plugins using the same name, `%s`.",n),c[n]=o,e=!0)}e&&r()},getPluginModuleForEvent:function(t){var e=t.dispatchConfig;if(e.registrationName)return l.registrationNameModules[e.registrationName]||null;for(var n in e.phasedRegistrationNames)if(e.phasedRegistrationNames.hasOwnProperty(n)){var r=l.registrationNameModules[e.phasedRegistrationNames[n]];if(r)return r}return null},_resetEventPlugins:function(){s=null;for(var t in c)c.hasOwnProperty(t)&&delete c[t];l.plugins.length=0;var e=l.eventNameDispatchConfigs;for(var n in e)e.hasOwnProperty(n)&&delete e[n];var r=l.registrationNameModules;for(var o in r)r.hasOwnProperty(o)&&delete r[o]}};e.exports=l},{150:150}],20:[function(t,e,n){"use strict";function r(t){return t===v.topMouseUp||t===v.topTouchEnd||t===v.topTouchCancel}function o(t){return t===v.topMouseMove||t===v.topTouchMove}function a(t){return t===v.topMouseDown||t===v.topTouchStart}function i(t,e){var n=t._dispatchListeners,r=t._dispatchIDs;if(h(t),Array.isArray(n))for(var o=0;o<n.length&&!t.isPropagationStopped();o++)e(t,n[o],r[o]);else n&&e(t,n,r)}function s(t,e,n){t.currentTarget=g.Mount.getNode(n);var r=e(t,n);return t.currentTarget=null,r}function c(t,e){i(t,e),t._dispatchListeners=null,t._dispatchIDs=null}function l(t){var e=t._dispatchListeners,n=t._dispatchIDs;if(h(t),Array.isArray(e)){for(var r=0;r<e.length&&!t.isPropagationStopped();r++)if(e[r](t,n[r]))return n[r]}else if(e&&e(t,n))return n;return null}function u(t){var e=l(t);return t._dispatchIDs=null,t._dispatchListeners=null,e}function p(t){h(t);var e=t._dispatchListeners,n=t._dispatchIDs;m(!Array.isArray(e),"executeDirectDispatch(...): Invalid `event`.");var r=e?e(t,n):null;return t._dispatchListeners=null,t._dispatchIDs=null,r}function d(t){return!!t._dispatchListeners}var h,f=t(16),m=t(150),g={Mount:null,injectMount:function(t){g.Mount=t,m(t&&t.getNode,"EventPluginUtils.injection.injectMount(...): Injected Mount module is missing getNode.")}},v=f.topLevelTypes;h=function(t){var e=t._dispatchListeners,n=t._dispatchIDs,r=Array.isArray(e),o=Array.isArray(n),a=o?n.length:n?1:0,i=r?e.length:e?1:0;m(o===r&&a===i,"EventPluginUtils: Invalid `event`.")};var y={isEndish:r,isMoveish:o,isStartish:a,executeDirectDispatch:p,executeDispatch:s,executeDispatchesInOrder:c,executeDispatchesInOrderStopAtTrue:u,hasDispatches:d,injection:g,useTouchEvents:!1};e.exports=y},{150:150,16:16}],21:[function(t,e,n){"use strict";function r(t,e,n){var r=e.dispatchConfig.phasedRegistrationNames[n];return g(t,r)}function o(t,e,n){if(!t)throw new Error("Dispatching id must not be null");var o=e?m.bubbled:m.captured,a=r(t,n,o);a&&(n._dispatchListeners=h(n._dispatchListeners,a),n._dispatchIDs=h(n._dispatchIDs,t))}function a(t){t&&t.dispatchConfig.phasedRegistrationNames&&d.injection.getInstanceHandle().traverseTwoPhase(t.dispatchMarker,o,t)}function i(t,e,n){if(n&&n.dispatchConfig.registrationName){var r=n.dispatchConfig.registrationName,o=g(t,r);o&&(n._dispatchListeners=h(n._dispatchListeners,o),n._dispatchIDs=h(n._dispatchIDs,t))}}function s(t){t&&t.dispatchConfig.registrationName&&i(t.dispatchMarker,null,t)}function c(t){f(t,a)}function l(t,e,n,r){d.injection.getInstanceHandle().traverseEnterLeave(n,r,i,t,e)}function u(t){f(t,s)}var p=t(16),d=t(18),h=t(118),f=t(135),m=p.PropagationPhases,g=d.getListener,v={accumulateTwoPhaseDispatches:c,accumulateDirectDispatches:u,accumulateEnterLeaveDispatches:l};e.exports=v},{118:118,135:135,16:16,18:18}],22:[function(t,e,n){"use strict";var r=!("undefined"==typeof window||!window.document||!window.document.createElement),o={canUseDOM:r,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:r&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};e.exports=o},{}],23:[function(t,e,n){"use strict";function r(t){this._root=t,this._startText=this.getText(),this._fallbackText=null}var o=t(30),a=t(29),i=t(145);a(r.prototype,{getText:function(){return"value"in this._root?this._root.value:this._root[i()]},getData:function(){if(this._fallbackText)return this._fallbackText;var t,e,n=this._startText,r=n.length,o=this.getText(),a=o.length;for(t=0;r>t&&n[t]===o[t];t++);var i=r-t;for(e=1;i>=e&&n[r-e]===o[a-e];e++);var s=e>1?1-e:void 0;return this._fallbackText=o.slice(t,s),this._fallbackText}}),o.addPoolingTo(r),e.exports=r},{145:145,29:29,30:30}],24:[function(t,e,n){"use strict";var r,o=t(11),a=t(22),i=o.injection.MUST_USE_ATTRIBUTE,s=o.injection.MUST_USE_PROPERTY,c=o.injection.HAS_BOOLEAN_VALUE,l=o.injection.HAS_SIDE_EFFECTS,u=o.injection.HAS_NUMERIC_VALUE,p=o.injection.HAS_POSITIVE_NUMERIC_VALUE,d=o.injection.HAS_OVERLOADED_BOOLEAN_VALUE;if(a.canUseDOM){var h=document.implementation;r=h&&h.hasFeature&&h.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}var f={isCustomAttribute:RegExp.prototype.test.bind(/^(data|aria)-[a-z_][a-z\d_.\-]*$/),Properties:{accept:null,acceptCharset:null,accessKey:null,action:null,allowFullScreen:i|c,allowTransparency:i,alt:null,async:c,autoComplete:null,autoPlay:c,cellPadding:null,cellSpacing:null,charSet:i,checked:s|c,classID:i,className:r?i:s,cols:i|p,colSpan:null,content:null,contentEditable:null,contextMenu:i,controls:s|c,coords:null,crossOrigin:null,data:null,dateTime:i,defer:c,dir:null,disabled:i|c,download:d,draggable:null,encType:null,form:i,formAction:i,formEncType:i,formMethod:i,formNoValidate:c,formTarget:i,frameBorder:i,headers:null,height:i,hidden:i|c,high:null,href:null,hrefLang:null,htmlFor:null,httpEquiv:null,icon:null,id:s,label:null,lang:null,list:i,loop:s|c,low:null,manifest:i,marginHeight:null,marginWidth:null,max:null,maxLength:i,media:i,mediaGroup:null,method:null,min:null,multiple:s|c,muted:s|c,name:null,noValidate:c,open:c,optimum:null,pattern:null,placeholder:null,poster:null,preload:null,radioGroup:null,readOnly:s|c,rel:null,required:c,role:i,rows:i|p,rowSpan:null,sandbox:null,scope:null,scoped:c,scrolling:null,seamless:i|c,selected:s|c,shape:null,size:i|p,sizes:i,span:p,spellCheck:null,src:null,srcDoc:s,srcSet:i,start:u,step:null,style:null,tabIndex:null,target:null,title:null,type:null,useMap:null,value:s|l,width:i,wmode:i,autoCapitalize:null,autoCorrect:null,itemProp:i,itemScope:i|c,itemType:i,itemID:i,itemRef:i,property:null,unselectable:i},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{autoCapitalize:"autocapitalize",autoComplete:"autocomplete",autoCorrect:"autocorrect",autoFocus:"autofocus",autoPlay:"autoplay",encType:"encoding",hrefLang:"hreflang",radioGroup:"radiogroup",spellCheck:"spellcheck",srcDoc:"srcdoc",srcSet:"srcset"}};e.exports=f},{11:11,22:22}],25:[function(t,e,n){"use strict";var r=t(75),o=t(94),a={linkState:function(t){return new r(this.state[t],o.createStateKeySetter(this,t))}};e.exports=a},{75:75,94:94}],26:[function(t,e,n){"use strict";function r(t){l(null==t.props.checkedLink||null==t.props.valueLink,"Cannot provide a checkedLink and a valueLink. If you want to use checkedLink, you probably don't want to use valueLink and vice versa.")}function o(t){r(t),l(null==t.props.value&&null==t.props.onChange,"Cannot provide a valueLink and a value or onChange event. If you want to use value or onChange, you probably don't want to use valueLink.")}function a(t){r(t),l(null==t.props.checked&&null==t.props.onChange,"Cannot provide a checkedLink and a checked property or onChange event. If you want to use checked or onChange, you probably don't want to use checkedLink")}function i(t){this.props.valueLink.requestChange(t.target.value)}function s(t){this.props.checkedLink.requestChange(t.target.checked)}var c=t(86),l=t(150),u={button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0},p={Mixin:{propTypes:{value:function(t,e,n){return!t[e]||u[t.type]||t.onChange||t.readOnly||t.disabled?null:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(t,e,n){return!t[e]||t.onChange||t.readOnly||t.disabled?null:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:c.func}},getValue:function(t){return t.props.valueLink?(o(t),t.props.valueLink.value):t.props.value},getChecked:function(t){return t.props.checkedLink?(a(t),t.props.checkedLink.value):t.props.checked},getOnChange:function(t){return t.props.valueLink?(o(t),i):t.props.checkedLink?(a(t),s):t.props.onChange}};e.exports=p},{150:150,86:86}],27:[function(t,e,n){"use strict";function r(t){t.remove()}var o=t(33),a=t(118),i=t(135),s=t(150),c={trapBubbledEvent:function(t,e){s(this.isMounted(),"Must be mounted to trap events");var n=this.getDOMNode();s(n,"LocalEventTrapMixin.trapBubbledEvent(...): Requires node to be rendered.");var r=o.trapBubbledEvent(t,e,n);this._localEventListeners=a(this._localEventListeners,r)},componentWillUnmount:function(){this._localEventListeners&&i(this._localEventListeners,r)}};e.exports=c},{118:118,135:135,150:150,33:33}],28:[function(t,e,n){"use strict";var r=t(16),o=t(129),a=r.topLevelTypes,i={eventTypes:null,extractEvents:function(t,e,n,r){if(t===a.topTouchStart){var i=r.target;i&&!i.onclick&&(i.onclick=o)}}};e.exports=i},{129:129,16:16}],29:[function(t,e,n){"use strict";function r(t,e){if(null==t)throw new TypeError("Object.assign target cannot be null or undefined");for(var n=Object(t),r=Object.prototype.hasOwnProperty,o=1;o<arguments.length;o++){var a=arguments[o];if(null!=a){var i=Object(a);for(var s in i)r.call(i,s)&&(n[s]=i[s])}}return n}e.exports=r},{}],30:[function(t,e,n){"use strict";var r=t(150),o=function(t){var e=this;if(e.instancePool.length){var n=e.instancePool.pop();return e.call(n,t),n}return new e(t)},a=function(t,e){var n=this;if(n.instancePool.length){var r=n.instancePool.pop();return n.call(r,t,e),r}return new n(t,e)},i=function(t,e,n){var r=this;if(r.instancePool.length){var o=r.instancePool.pop();return r.call(o,t,e,n),o}return new r(t,e,n)},s=function(t,e,n,r,o){var a=this;if(a.instancePool.length){var i=a.instancePool.pop();return a.call(i,t,e,n,r,o),i}return new a(t,e,n,r,o)},c=function(t){var e=this;r(t instanceof e,"Trying to release an instance into a pool of a different type."),t.destructor&&t.destructor(),e.instancePool.length<e.poolSize&&e.instancePool.push(t)},l=10,u=o,p=function(t,e){var n=t;return n.instancePool=[],n.getPooled=e||u,n.poolSize||(n.poolSize=l),n.release=c,n},d={addPoolingTo:p,oneArgumentPooler:o,twoArgumentPooler:a,threeArgumentPooler:i,fiveArgumentPooler:s};e.exports=d},{150:150}],31:[function(t,e,n){"use strict";var r=t(20),o=t(37),a=t(39),i=t(38),s=t(44),c=t(45),l=t(63),u=t(64),p=t(46),d=t(57),h=t(60),f=t(72),m=t(77),g=t(82),v=t(86),y=t(89),_=t(92),w=t(29),b=t(132),C=t(160);h.inject();var E=l.createElement,x=l.createFactory,R=l.cloneElement;E=u.createElement,x=u.createFactory,R=u.cloneElement;var A=g.measure("React","render",m.render),T={Children:{map:o.map,forEach:o.forEach,count:o.count,only:C},Component:a,DOM:p,PropTypes:v,initializeTouchEvents:function(t){r.useTouchEvents=t},createClass:i.createClass,createElement:E,cloneElement:R,createFactory:x,createMixin:function(t){return t},constructAndRenderComponent:m.constructAndRenderComponent,constructAndRenderComponentByID:m.constructAndRenderComponentByID,findDOMNode:b,render:A,renderToString:_.renderToString,renderToStaticMarkup:_.renderToStaticMarkup,unmountComponentAtNode:m.unmountComponentAtNode,isValidElement:l.isValidElement,withContext:s.withContext,__spread:w};"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject&&__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({CurrentOwner:c,InstanceHandles:f,Mount:m,Reconciler:y,TextComponent:d});var P=t(22);if(P.canUseDOM&&window.top===window.self){navigator.userAgent.indexOf("Chrome")>-1&&"undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&console.debug("Download the React DevTools for a better development experience: https://fb.me/react-devtools");for(var N=[Array.isArray,Array.prototype.every,Array.prototype.forEach,Array.prototype.indexOf,Array.prototype.map,Date.now,Function.prototype.bind,Object.keys,String.prototype.split,String.prototype.trim,Object.create,Object.freeze],S=0;S<N.length;S++)if(!N[S]){console.error("One or more ES5 shim/shams expected by React are not available: https://fb.me/react-warning-polyfills");break}}T.version="0.13.3",e.exports=T},{132:132,160:160,20:20,22:22,29:29,37:37,38:38,39:39,44:44,45:45,46:46,57:57,60:60,63:63,64:64,72:72,77:77,82:82,86:86,89:89,92:92}],32:[function(t,e,n){"use strict";var r=t(132),o={getDOMNode:function(){return r(this)}};e.exports=o},{132:132}],33:[function(t,e,n){"use strict";function r(t){return Object.prototype.hasOwnProperty.call(t,m)||(t[m]=h++,p[t[m]]={}),p[t[m]]}var o=t(16),a=t(18),i=t(19),s=t(67),c=t(117),l=t(29),u=t(151),p={},d=!1,h=0,f={topBlur:"blur",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",
topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topScroll:"scroll",topSelectionChange:"selectionchange",topTextInput:"textInput",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topWheel:"wheel"},m="_reactListenersID"+String(Math.random()).slice(2),g=l({},s,{ReactEventListener:null,injection:{injectReactEventListener:function(t){t.setHandleTopLevel(g.handleTopLevel),g.ReactEventListener=t}},setEnabled:function(t){g.ReactEventListener&&g.ReactEventListener.setEnabled(t)},isEnabled:function(){return!(!g.ReactEventListener||!g.ReactEventListener.isEnabled())},listenTo:function(t,e){for(var n=e,a=r(n),s=i.registrationNameDependencies[t],c=o.topLevelTypes,l=0,p=s.length;p>l;l++){var d=s[l];a.hasOwnProperty(d)&&a[d]||(d===c.topWheel?u("wheel")?g.ReactEventListener.trapBubbledEvent(c.topWheel,"wheel",n):u("mousewheel")?g.ReactEventListener.trapBubbledEvent(c.topWheel,"mousewheel",n):g.ReactEventListener.trapBubbledEvent(c.topWheel,"DOMMouseScroll",n):d===c.topScroll?u("scroll",!0)?g.ReactEventListener.trapCapturedEvent(c.topScroll,"scroll",n):g.ReactEventListener.trapBubbledEvent(c.topScroll,"scroll",g.ReactEventListener.WINDOW_HANDLE):d===c.topFocus||d===c.topBlur?(u("focus",!0)?(g.ReactEventListener.trapCapturedEvent(c.topFocus,"focus",n),g.ReactEventListener.trapCapturedEvent(c.topBlur,"blur",n)):u("focusin")&&(g.ReactEventListener.trapBubbledEvent(c.topFocus,"focusin",n),g.ReactEventListener.trapBubbledEvent(c.topBlur,"focusout",n)),a[c.topBlur]=!0,a[c.topFocus]=!0):f.hasOwnProperty(d)&&g.ReactEventListener.trapBubbledEvent(d,f[d],n),a[d]=!0)}},trapBubbledEvent:function(t,e,n){return g.ReactEventListener.trapBubbledEvent(t,e,n)},trapCapturedEvent:function(t,e,n){return g.ReactEventListener.trapCapturedEvent(t,e,n)},ensureScrollValueMonitoring:function(){if(!d){var t=c.refreshScrollValues;g.ReactEventListener.monitorScrollValue(t),d=!0}},eventNameDispatchConfigs:a.eventNameDispatchConfigs,registrationNameModules:a.registrationNameModules,putListener:a.putListener,getListener:a.getListener,deleteListener:a.deleteListener,deleteAllListeners:a.deleteAllListeners});e.exports=g},{117:117,151:151,16:16,18:18,19:19,29:29,67:67}],34:[function(t,e,n){"use strict";var r=t(31),o=t(29),a=r.createFactory(t(98)),i=r.createFactory(t(35)),s=r.createClass({displayName:"ReactCSSTransitionGroup",propTypes:{transitionName:r.PropTypes.string.isRequired,transitionAppear:r.PropTypes.bool,transitionEnter:r.PropTypes.bool,transitionLeave:r.PropTypes.bool},getDefaultProps:function(){return{transitionAppear:!1,transitionEnter:!0,transitionLeave:!0}},_wrapChild:function(t){return i({name:this.props.transitionName,appear:this.props.transitionAppear,enter:this.props.transitionEnter,leave:this.props.transitionLeave},t)},render:function(){return a(o({},this.props,{childFactory:this._wrapChild}))}});e.exports=s},{29:29,31:31,35:35,98:98}],35:[function(t,e,n){"use strict";var r=t(31),o=t(4),a=t(97),i=t(160),s=t(171),c=17,l=5e3,u=null;u=function(){s(!1,"transition(): tried to perform an animation without an animationend or transitionend event after timeout (%sms). You should either disable this transition in JS or add a CSS animation/transition.",l)};var p=r.createClass({displayName:"ReactCSSTransitionGroupChild",transition:function(t,e){var n=this.getDOMNode(),r=this.props.name+"-"+t,i=r+"-active",s=null,c=function(t){t&&t.target!==n||(clearTimeout(s),o.removeClass(n,r),o.removeClass(n,i),a.removeEndEventListener(n,c),e&&e())};a.addEndEventListener(n,c),o.addClass(n,r),this.queueClass(i),s=setTimeout(u,l)},queueClass:function(t){this.classNameQueue.push(t),this.timeout||(this.timeout=setTimeout(this.flushClassNameQueue,c))},flushClassNameQueue:function(){this.isMounted()&&this.classNameQueue.forEach(o.addClass.bind(o,this.getDOMNode())),this.classNameQueue.length=0,this.timeout=null},componentWillMount:function(){this.classNameQueue=[]},componentWillUnmount:function(){this.timeout&&clearTimeout(this.timeout)},componentWillAppear:function(t){this.props.appear?this.transition("appear",t):t()},componentWillEnter:function(t){this.props.enter?this.transition("enter",t):t()},componentWillLeave:function(t){this.props.leave?this.transition("leave",t):t()},render:function(){return i(this.props.children)}});e.exports=p},{160:160,171:171,31:31,4:4,97:97}],36:[function(t,e,n){"use strict";var r=t(89),o=t(133),a=t(149),i=t(167),s={instantiateChildren:function(t,e,n){var r=o(t);for(var i in r)if(r.hasOwnProperty(i)){var s=r[i],c=a(s,null);r[i]=c}return r},updateChildren:function(t,e,n,s){var c=o(e);if(!c&&!t)return null;var l;for(l in c)if(c.hasOwnProperty(l)){var u=t&&t[l],p=u&&u._currentElement,d=c[l];if(i(p,d))r.receiveComponent(u,d,n,s),c[l]=u;else{u&&r.unmountComponent(u,l);var h=a(d,null);c[l]=h}}for(l in t)!t.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||r.unmountComponent(t[l]);return c},unmountChildren:function(t){for(var e in t){var n=t[e];r.unmountComponent(n)}}};e.exports=s},{133:133,149:149,167:167,89:89}],37:[function(t,e,n){"use strict";function r(t,e){this.forEachFunction=t,this.forEachContext=e}function o(t,e,n,r){var o=t;o.forEachFunction.call(o.forEachContext,e,r)}function a(t,e,n){if(null==t)return t;var a=r.getPooled(e,n);h(t,o,a),r.release(a)}function i(t,e,n){this.mapResult=t,this.mapFunction=e,this.mapContext=n}function s(t,e,n,r){var o=t,a=o.mapResult,i=!a.hasOwnProperty(n);if(f(i,"ReactChildren.map(...): Encountered two children with the same key, `%s`. Child keys must be unique; when two children share a key, only the first child will be used.",n),i){var s=o.mapFunction.call(o.mapContext,e,r);a[n]=s}}function c(t,e,n){if(null==t)return t;var r={},o=i.getPooled(r,e,n);return h(t,s,o),i.release(o),d.create(r)}function l(t,e,n,r){return null}function u(t,e){return h(t,l,null)}var p=t(30),d=t(69),h=t(169),f=t(171),m=p.twoArgumentPooler,g=p.threeArgumentPooler;p.addPoolingTo(r,m),p.addPoolingTo(i,g);var v={forEach:a,map:c,count:u};e.exports=v},{169:169,171:171,30:30,69:69}],38:[function(t,e,n){"use strict";function r(t,e,n){for(var r in e)e.hasOwnProperty(r)&&R("function"==typeof e[r],"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",t.displayName||"ReactClass",_[n],r)}function o(t,e){var n=N.hasOwnProperty(e)?N[e]:null;D.hasOwnProperty(e)&&C(n===T.OVERRIDE_BASE,"ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",e),t.hasOwnProperty(e)&&C(n===T.DEFINE_MANY||n===T.DEFINE_MANY_MERGED,"ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",e)}function a(t,e){if(e){C("function"!=typeof e,"ReactClass: You're attempting to use a component class as a mixin. Instead, just use a regular object."),C(!f.isValidElement(e),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var n=t.prototype;e.hasOwnProperty(A)&&S.mixins(t,e.mixins);for(var r in e)if(e.hasOwnProperty(r)&&r!==A){var a=e[r];if(o(n,r),S.hasOwnProperty(r))S[r](t,a);else{var i=N.hasOwnProperty(r),s=n.hasOwnProperty(r),u=a&&a.__reactDontBind,p="function"==typeof a,d=p&&!i&&!s&&!u;if(d)n.__reactAutoBindMap||(n.__reactAutoBindMap={}),n.__reactAutoBindMap[r]=a,n[r]=a;else if(s){var h=N[r];C(i&&(h===T.DEFINE_MANY_MERGED||h===T.DEFINE_MANY),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",h,r),h===T.DEFINE_MANY_MERGED?n[r]=c(n[r],a):h===T.DEFINE_MANY&&(n[r]=l(n[r],a))}else n[r]=a,"function"==typeof a&&e.displayName&&(n[r].displayName=e.displayName+"_"+r)}}}}function i(t,e){if(e)for(var n in e){var r=e[n];if(e.hasOwnProperty(n)){var o=n in S;C(!o,'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',n);var a=n in t;C(!a,"ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",n),t[n]=r}}}function s(t,e){C(t&&e&&"object"==typeof t&&"object"==typeof e,"mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects.");for(var n in e)e.hasOwnProperty(n)&&(C(void 0===t[n],"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",n),t[n]=e[n]);return t}function c(t,e){return function(){var n=t.apply(this,arguments),r=e.apply(this,arguments);if(null==n)return r;if(null==r)return n;var o={};return s(o,n),s(o,r),o}}function l(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function u(t,e){var n=e.bind(t);n.__reactBoundContext=t,n.__reactBoundMethod=e,n.__reactBoundArguments=null;var r=t.constructor.displayName,o=n.bind;return n.bind=function(a){for(var i=[],s=1,c=arguments.length;c>s;s++)i.push(arguments[s]);if(a!==t&&null!==a)R(!1,"bind(): React component methods may only be bound to the component instance. See %s",r);else if(!i.length)return R(!1,"bind(): You are binding a component method to the component. React does this for you automatically in a high-performance way, so you can safely remove this call. See %s",r),n;var l=o.apply(n,arguments);return l.__reactBoundContext=t,l.__reactBoundMethod=e,l.__reactBoundArguments=i,l},n}function p(t){for(var e in t.__reactAutoBindMap)if(t.__reactAutoBindMap.hasOwnProperty(e)){var n=t.__reactAutoBindMap[e];t[e]=u(t,m.guard(n,t.constructor.displayName+"."+e))}}var d=t(39),h=t(45),f=t(63),m=t(66),g=t(73),v=t(74),y=t(85),_=t(84),w=t(99),b=t(29),C=t(150),E=t(156),x=t(157),R=t(171),A=x({mixins:null}),T=E({DEFINE_ONCE:null,DEFINE_MANY:null,OVERRIDE_BASE:null,DEFINE_MANY_MERGED:null}),P=[],N={mixins:T.DEFINE_MANY,statics:T.DEFINE_MANY,propTypes:T.DEFINE_MANY,contextTypes:T.DEFINE_MANY,childContextTypes:T.DEFINE_MANY,getDefaultProps:T.DEFINE_MANY_MERGED,getInitialState:T.DEFINE_MANY_MERGED,getChildContext:T.DEFINE_MANY_MERGED,render:T.DEFINE_ONCE,componentWillMount:T.DEFINE_MANY,componentDidMount:T.DEFINE_MANY,componentWillReceiveProps:T.DEFINE_MANY,shouldComponentUpdate:T.DEFINE_ONCE,componentWillUpdate:T.DEFINE_MANY,componentDidUpdate:T.DEFINE_MANY,componentWillUnmount:T.DEFINE_MANY,updateComponent:T.OVERRIDE_BASE},S={displayName:function(t,e){t.displayName=e},mixins:function(t,e){if(e)for(var n=0;n<e.length;n++)a(t,e[n])},childContextTypes:function(t,e){r(t,e,y.childContext),t.childContextTypes=b({},t.childContextTypes,e)},contextTypes:function(t,e){r(t,e,y.context),t.contextTypes=b({},t.contextTypes,e)},getDefaultProps:function(t,e){t.getDefaultProps?t.getDefaultProps=c(t.getDefaultProps,e):t.getDefaultProps=e},propTypes:function(t,e){r(t,e,y.prop),t.propTypes=b({},t.propTypes,e)},statics:function(t,e){i(t,e)}},k={enumerable:!1,get:function(){var t=this.displayName||this.name||"Component";return R(!1,"%s.type is deprecated. Use %s directly to access the class.",t,t),Object.defineProperty(this,"type",{value:this}),this}},D={replaceState:function(t,e){w.enqueueReplaceState(this,t),e&&w.enqueueCallback(this,e)},isMounted:function(){var t=h.current;null!==t&&(R(t._warnedAboutRefsInRender,"%s is accessing isMounted inside its render() function. render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",t.getName()||"A component"),t._warnedAboutRefsInRender=!0);var e=g.get(this);return e&&e!==v.currentlyMountingInstance},setProps:function(t,e){w.enqueueSetProps(this,t),e&&w.enqueueCallback(this,e)},replaceProps:function(t,e){w.enqueueReplaceProps(this,t),e&&w.enqueueCallback(this,e)}},M=function(){};b(M.prototype,d.prototype,D);var I={createClass:function(t){var e=function(t,n){R(this instanceof e,"Something is calling a React component directly. Use a factory or JSX instead. See: https://fb.me/react-legacyfactory"),this.__reactAutoBindMap&&p(this),this.props=t,this.context=n,this.state=null;var r=this.getInitialState?this.getInitialState():null;"undefined"==typeof r&&this.getInitialState._isMockFunction&&(r=null),C("object"==typeof r&&!Array.isArray(r),"%s.getInitialState(): must return an object or null",e.displayName||"ReactCompositeComponent"),this.state=r};e.prototype=new M,e.prototype.constructor=e,P.forEach(a.bind(null,e)),a(e,t),e.getDefaultProps&&(e.defaultProps=e.getDefaultProps()),e.getDefaultProps&&(e.getDefaultProps.isReactClassApproved={}),e.prototype.getInitialState&&(e.prototype.getInitialState.isReactClassApproved={}),C(e.prototype.render,"createClass(...): Class specification must implement a `render` method."),R(!e.prototype.componentShouldUpdate,"%s has a method called componentShouldUpdate(). Did you mean shouldComponentUpdate()? The name is phrased as a question because the function is expected to return a value.",t.displayName||"A component");for(var n in N)e.prototype[n]||(e.prototype[n]=null);e.type=e;try{Object.defineProperty(e,"type",k)}catch(r){}return e},injection:{injectMixin:function(t){P.push(t)}}};e.exports=I},{150:150,156:156,157:157,171:171,29:29,39:39,45:45,63:63,66:66,73:73,74:74,84:84,85:85,99:99}],39:[function(t,e,n){"use strict";function r(t,e){this.props=t,this.context=e}var o=t(99),a=t(150),i=t(171);r.prototype.setState=function(t,e){a("object"==typeof t||"function"==typeof t||null==t,"setState(...): takes an object of state variables to update or a function which returns an object of state variables."),i(null!=t,"setState(...): You passed an undefined or null state object; instead, use forceUpdate()."),o.enqueueSetState(this,t),e&&o.enqueueCallback(this,e)},r.prototype.forceUpdate=function(t){o.enqueueForceUpdate(this),t&&o.enqueueCallback(this,t)};var s={getDOMNode:["getDOMNode","Use React.findDOMNode(component) instead."],isMounted:["isMounted","Instead, make sure to clean up subscriptions and pending requests in componentWillUnmount to prevent memory leaks."],replaceProps:["replaceProps","Instead call React.render again at the top level."],replaceState:["replaceState","Refactor your code to use setState instead (see https://github.com/facebook/react/issues/3236)."],setProps:["setProps","Instead call React.render again at the top level."]},c=function(t,e){try{Object.defineProperty(r.prototype,t,{get:function(){return void i(!1,"%s(...) is deprecated in plain JavaScript React classes. %s",e[0],e[1])}})}catch(n){}};for(var l in s)s.hasOwnProperty(l)&&c(l,s[l]);e.exports=r},{150:150,171:171,99:99}],40:[function(t,e,n){"use strict";var r=t(50),o=t(77),a={processChildrenUpdates:r.dangerouslyProcessChildrenUpdates,replaceNodeWithMarkupByID:r.dangerouslyReplaceNodeWithMarkupByID,unmountIDFromEnvironment:function(t){o.purgeID(t)}};e.exports=a},{50:50,77:77}],41:[function(t,e,n){"use strict";var r=t(150),o=!1,a={unmountIDFromEnvironment:null,replaceNodeWithMarkupByID:null,processChildrenUpdates:null,injection:{injectEnvironment:function(t){r(!o,"ReactCompositeComponent: injectEnvironment() can only be called once."),a.unmountIDFromEnvironment=t.unmountIDFromEnvironment,a.replaceNodeWithMarkupByID=t.replaceNodeWithMarkupByID,a.processChildrenUpdates=t.processChildrenUpdates,o=!0}}};e.exports=a},{150:150}],42:[function(t,e,n){"use strict";var r=t(166),o={shouldComponentUpdate:function(t,e){return!r(this.props,t)||!r(this.state,e)}};e.exports=o},{166:166}],43:[function(t,e,n){"use strict";function r(t){var e=t._currentElement._owner||null;if(e){var n=e.getName();if(n)return" Check the render method of `"+n+"`."}return""}var o=t(41),a=t(44),i=t(45),s=t(63),c=t(64),l=t(73),u=t(74),p=t(80),d=t(82),h=t(85),f=t(84),m=t(89),g=t(100),v=t(29),y=t(130),_=t(150),w=t(167),b=t(171),C=1,E={construct:function(t){this._currentElement=t,this._rootNodeID=null,this._instance=null,this._pendingElement=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._renderedComponent=null,this._context=null,this._mountOrder=0,this._isTopLevel=!1,this._pendingCallbacks=null},mountComponent:function(t,e,n){this._context=n,this._mountOrder=C++,this._rootNodeID=t;var r=this._processProps(this._currentElement.props),o=this._processContext(this._currentElement._context),a=p.getComponentClassForElement(this._currentElement),i=new a(r,o);b(null!=i.render,"%s(...): No `render` method found on the returned component instance: you may have forgotten to define `render` in your component or you may have accidentally tried to render an element whose type is a function that isn't a React component.",a.displayName||a.name||"Component"),i.props=r,i.context=o,i.refs=y,this._instance=i,l.set(i,this),this._warnIfContextsDiffer(this._currentElement._context,n),b(!i.getInitialState||i.getInitialState.isReactClassApproved,"getInitialState was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Did you mean to define a state property instead?",this.getName()||"a component"),b(!i.getDefaultProps||i.getDefaultProps.isReactClassApproved,"getDefaultProps was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Use a static property to define defaultProps instead.",this.getName()||"a component"),b(!i.propTypes,"propTypes was defined as an instance property on %s. Use a static property to define propTypes instead.",this.getName()||"a component"),b(!i.contextTypes,"contextTypes was defined as an instance property on %s. Use a static property to define contextTypes instead.",this.getName()||"a component"),b("function"!=typeof i.componentShouldUpdate,"%s has a method called componentShouldUpdate(). Did you mean shouldComponentUpdate()? The name is phrased as a question because the function is expected to return a value.",this.getName()||"A component");var s=i.state;void 0===s&&(i.state=s=null),_("object"==typeof s&&!Array.isArray(s),"%s.state: must be set to an object or null",this.getName()||"ReactCompositeComponent"),this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1;var c,d,h=u.currentlyMountingInstance;u.currentlyMountingInstance=this;try{i.componentWillMount&&(i.componentWillMount(),this._pendingStateQueue&&(i.state=this._processPendingState(i.props,i.context))),c=this._getValidatedChildContext(n),d=this._renderValidatedComponent(c)}finally{u.currentlyMountingInstance=h}this._renderedComponent=this._instantiateReactComponent(d,this._currentElement.type);var f=m.mountComponent(this._renderedComponent,t,e,this._mergeChildContext(n,c));return i.componentDidMount&&e.getReactMountReady().enqueue(i.componentDidMount,i),f},unmountComponent:function(){var t=this._instance;if(t.componentWillUnmount){var e=u.currentlyUnmountingInstance;u.currentlyUnmountingInstance=this;try{t.componentWillUnmount()}finally{u.currentlyUnmountingInstance=e}}m.unmountComponent(this._renderedComponent),this._renderedComponent=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._pendingCallbacks=null,this._pendingElement=null,this._context=null,this._rootNodeID=null,l.remove(t)},_setPropsInternal:function(t,e){var n=this._pendingElement||this._currentElement;this._pendingElement=s.cloneAndReplaceProps(n,v({},n.props,t)),g.enqueueUpdate(this,e)},_maskContext:function(t){var e=null;if("string"==typeof this._currentElement.type)return y;var n=this._currentElement.type.contextTypes;if(!n)return y;e={};for(var r in n)e[r]=t[r];return e},_processContext:function(t){var e=this._maskContext(t),n=p.getComponentClassForElement(this._currentElement);return n.contextTypes&&this._checkPropTypes(n.contextTypes,e,h.context),e},_getValidatedChildContext:function(t){var e=this._instance,n=e.getChildContext&&e.getChildContext();if(n){_("object"==typeof e.constructor.childContextTypes,"%s.getChildContext(): childContextTypes must be defined in order to use getChildContext().",this.getName()||"ReactCompositeComponent"),this._checkPropTypes(e.constructor.childContextTypes,n,h.childContext);for(var r in n)_(r in e.constructor.childContextTypes,'%s.getChildContext(): key "%s" is not defined in childContextTypes.',this.getName()||"ReactCompositeComponent",r);return n}return null},_mergeChildContext:function(t,e){return e?v({},t,e):t},_processProps:function(t){var e=p.getComponentClassForElement(this._currentElement);return e.propTypes&&this._checkPropTypes(e.propTypes,t,h.prop),t},_checkPropTypes:function(t,e,n){var o=this.getName();for(var a in t)if(t.hasOwnProperty(a)){var i;try{_("function"==typeof t[a],"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",o||"React class",f[n],a),i=t[a](e,a,o,n)}catch(s){i=s}if(i instanceof Error){var c=r(this);n===h.prop?b(!1,"Failed Composite propType: %s%s",i.message,c):b(!1,"Failed Context Types: %s%s",i.message,c)}}},receiveComponent:function(t,e,n){var r=this._currentElement,o=this._context;this._pendingElement=null,this.updateComponent(e,r,t,o,n)},performUpdateIfNecessary:function(t){null!=this._pendingElement&&m.receiveComponent(this,this._pendingElement||this._currentElement,t,this._context),(null!==this._pendingStateQueue||this._pendingForceUpdate)&&(c.checkAndWarnForMutatedProps(this._currentElement),this.updateComponent(t,this._currentElement,this._currentElement,this._context,this._context))},_warnIfContextsDiffer:function(t,e){t=this._maskContext(t),e=this._maskContext(e);for(var n=Object.keys(e).sort(),r=this.getName()||"ReactCompositeComponent",o=0;o<n.length;o++){var a=n[o];b(t[a]===e[a],"owner-based and parent-based contexts differ (values: `%s` vs `%s`) for key (%s) while mounting %s (see: http://fb.me/react-context-by-parent)",t[a],e[a],a,r)}},updateComponent:function(t,e,n,r,o){var a=this._instance,i=a.context,s=a.props;e!==n&&(i=this._processContext(n._context),s=this._processProps(n.props),null!=o&&this._warnIfContextsDiffer(n._context,o),a.componentWillReceiveProps&&a.componentWillReceiveProps(s,i));var c=this._processPendingState(s,i),l=this._pendingForceUpdate||!a.shouldComponentUpdate||a.shouldComponentUpdate(s,c,i);b("undefined"!=typeof l,"%s.shouldComponentUpdate(): Returned undefined instead of a boolean value. Make sure to return true or false.",this.getName()||"ReactCompositeComponent"),l?(this._pendingForceUpdate=!1,this._performComponentUpdate(n,s,c,i,t,o)):(this._currentElement=n,this._context=o,a.props=s,a.state=c,a.context=i)},_processPendingState:function(t,e){var n=this._instance,r=this._pendingStateQueue,o=this._pendingReplaceState;if(this._pendingReplaceState=!1,this._pendingStateQueue=null,!r)return n.state;if(o&&1===r.length)return r[0];for(var a=v({},o?r[0]:n.state),i=o?1:0;i<r.length;i++){var s=r[i];v(a,"function"==typeof s?s.call(n,a,t,e):s)}return a},_performComponentUpdate:function(t,e,n,r,o,a){var i=this._instance,s=i.props,c=i.state,l=i.context;i.componentWillUpdate&&i.componentWillUpdate(e,n,r),this._currentElement=t,this._context=a,i.props=e,i.state=n,i.context=r,this._updateRenderedComponent(o,a),i.componentDidUpdate&&o.getReactMountReady().enqueue(i.componentDidUpdate.bind(i,s,c,l),i)},_updateRenderedComponent:function(t,e){var n=this._renderedComponent,r=n._currentElement,o=this._getValidatedChildContext(),a=this._renderValidatedComponent(o);if(w(r,a))m.receiveComponent(n,a,t,this._mergeChildContext(e,o));else{var i=this._rootNodeID,s=n._rootNodeID;m.unmountComponent(n),this._renderedComponent=this._instantiateReactComponent(a,this._currentElement.type);var c=m.mountComponent(this._renderedComponent,i,t,this._mergeChildContext(e,o));this._replaceNodeWithMarkupByID(s,c)}},_replaceNodeWithMarkupByID:function(t,e){o.replaceNodeWithMarkupByID(t,e)},_renderValidatedComponentWithoutOwnerOrContext:function(){var t=this._instance,e=t.render();return"undefined"==typeof e&&t.render._isMockFunction&&(e=null),e},_renderValidatedComponent:function(t){var e,n=a.current;a.current=this._mergeChildContext(this._currentElement._context,t),i.current=this;try{e=this._renderValidatedComponentWithoutOwnerOrContext()}finally{a.current=n,i.current=null}return _(null===e||e===!1||s.isValidElement(e),"%s.render(): A valid ReactComponent must be returned. You may have returned undefined, an array or some other invalid object.",this.getName()||"ReactCompositeComponent"),e},attachRef:function(t,e){var n=this.getPublicInstance(),r=n.refs===y?n.refs={}:n.refs;r[t]=e.getPublicInstance()},detachRef:function(t){var e=this.getPublicInstance().refs;delete e[t]},getName:function(){var t=this._currentElement.type,e=this._instance&&this._instance.constructor;return t.displayName||e&&e.displayName||t.name||e&&e.name||null},getPublicInstance:function(){return this._instance},_instantiateReactComponent:null};d.measureMethods(E,"ReactCompositeComponent",{mountComponent:"mountComponent",updateComponent:"updateComponent",_renderValidatedComponent:"_renderValidatedComponent"});var x={Mixin:E};e.exports=x},{100:100,130:130,150:150,167:167,171:171,29:29,41:41,44:44,45:45,63:63,64:64,73:73,74:74,80:80,82:82,84:84,85:85,89:89}],44:[function(t,e,n){"use strict";var r=t(29),o=t(130),a=t(171),i=!1,s={current:o,withContext:function(t,e){a(i,"withContext is deprecated and will be removed in a future version. Use a wrapper component with getChildContext instead."),i=!0;var n,o=s.current;s.current=r({},o,t);try{n=e()}finally{s.current=o}return n}};e.exports=s},{130:130,171:171,29:29}],45:[function(t,e,n){"use strict";var r={current:null};e.exports=r},{}],46:[function(t,e,n){"use strict";function r(t){return o.createFactory(t)}var o=(t(63),t(64)),a=t(158),i=a({a:"a",abbr:"abbr",address:"address",area:"area",article:"article",aside:"aside",audio:"audio",b:"b",base:"base",bdi:"bdi",bdo:"bdo",big:"big",blockquote:"blockquote",body:"body",br:"br",button:"button",canvas:"canvas",caption:"caption",cite:"cite",code:"code",col:"col",colgroup:"colgroup",data:"data",datalist:"datalist",dd:"dd",del:"del",details:"details",dfn:"dfn",dialog:"dialog",div:"div",dl:"dl",dt:"dt",em:"em",embed:"embed",fieldset:"fieldset",figcaption:"figcaption",figure:"figure",footer:"footer",form:"form",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",head:"head",header:"header",hr:"hr",html:"html",i:"i",iframe:"iframe",img:"img",input:"input",ins:"ins",kbd:"kbd",keygen:"keygen",label:"label",legend:"legend",li:"li",link:"link",main:"main",map:"map",mark:"mark",menu:"menu",menuitem:"menuitem",meta:"meta",meter:"meter",nav:"nav",noscript:"noscript",object:"object",ol:"ol",optgroup:"optgroup",option:"option",output:"output",p:"p",param:"param",picture:"picture",pre:"pre",progress:"progress",q:"q",rp:"rp",rt:"rt",ruby:"ruby",s:"s",samp:"samp",script:"script",section:"section",select:"select",small:"small",source:"source",span:"span",strong:"strong",style:"style",sub:"sub",summary:"summary",sup:"sup",table:"table",tbody:"tbody",td:"td",textarea:"textarea",tfoot:"tfoot",th:"th",thead:"thead",time:"time",title:"title",tr:"tr",track:"track",u:"u",ul:"ul","var":"var",video:"video",wbr:"wbr",circle:"circle",clipPath:"clipPath",defs:"defs",ellipse:"ellipse",g:"g",line:"line",linearGradient:"linearGradient",mask:"mask",path:"path",pattern:"pattern",polygon:"polygon",polyline:"polyline",radialGradient:"radialGradient",rect:"rect",stop:"stop",svg:"svg",text:"text",tspan:"tspan"},r);e.exports=i},{158:158,63:63,64:64}],47:[function(t,e,n){"use strict";var r=t(2),o=t(32),a=t(38),i=t(63),s=t(156),c=i.createFactory("button"),l=s({onClick:!0,onDoubleClick:!0,onMouseDown:!0,onMouseMove:!0,onMouseUp:!0,onClickCapture:!0,onDoubleClickCapture:!0,onMouseDownCapture:!0,onMouseMoveCapture:!0,onMouseUpCapture:!0}),u=a.createClass({displayName:"ReactDOMButton",tagName:"BUTTON",mixins:[r,o],render:function(){var t={};for(var e in this.props)!this.props.hasOwnProperty(e)||this.props.disabled&&l[e]||(t[e]=this.props[e]);return c(t,this.props.children)}});e.exports=u},{156:156,2:2,32:32,38:38,63:63}],48:[function(t,e,n){"use strict";function r(t){t&&(null!=t.dangerouslySetInnerHTML&&(v(null==t.children,"Can only set one of `children` or `props.dangerouslySetInnerHTML`."),v("object"==typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML,"`props.dangerouslySetInnerHTML` must be in the form `{__html: ...}`. Please visit https://fb.me/react-invariant-dangerously-set-inner-html for more information.")),w(null==t.innerHTML,"Directly setting property `innerHTML` is not permitted. For more information, lookup documentation on `dangerouslySetInnerHTML`."),w(!t.contentEditable||null==t.children,"A component is `contentEditable` and contains `children` managed by React. It is now your responsibility to guarantee that none of those nodes are unexpectedly modified or duplicated. This is probably not intentional."),v(null==t.style||"object"==typeof t.style,"The `style` prop expects a mapping from style properties to values, not a string. For example, style={{marginRight: spacing + 'em'}} when using JSX."))}function o(t,e,n,r){w("onScroll"!==e||y("scroll",!0),"This browser doesn't support the `onScroll` event");var o=d.findReactContainerForID(t);if(o){var a=o.nodeType===A?o.ownerDocument:o;C(e,a)}r.getPutListenerQueue().enqueuePutListener(t,e,n)}function a(t){k.call(S,t)||(v(N.test(t),"Invalid tag: %s",t),S[t]=!0)}function i(t){a(t),this._tag=t,this._renderedChildren=null,this._previousStyleCopy=null,this._rootNodeID=null}var s=t(6),c=t(11),l=t(12),u=t(33),p=t(40),d=t(77),h=t(78),f=t(82),m=t(29),g=t(131),v=t(150),y=t(151),_=t(157),w=t(171),b=u.deleteListener,C=u.listenTo,E=u.registrationNameModules,x={string:!0,number:!0},R=_({style:null}),A=1,T=null,P={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},N=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,S={},k={}.hasOwnProperty;i.displayName="ReactDOMComponent",i.Mixin={construct:function(t){this._currentElement=t},mountComponent:function(t,e,n){this._rootNodeID=t,r(this._currentElement.props);var o=P[this._tag]?"":"</"+this._tag+">";return this._createOpenTagMarkupAndPutListeners(e)+this._createContentMarkup(e,n)+o},_createOpenTagMarkupAndPutListeners:function(t){var e=this._currentElement.props,n="<"+this._tag;for(var r in e)if(e.hasOwnProperty(r)){var a=e[r];if(null!=a)if(E.hasOwnProperty(r))o(this._rootNodeID,r,a,t);else{r===R&&(a&&(a=this._previousStyleCopy=m({},e.style)),a=s.createMarkupForStyles(a));var i=l.createMarkupForProperty(r,a);i&&(n+=" "+i)}}if(t.renderToStaticMarkup)return n+">";var c=l.createMarkupForID(this._rootNodeID);return n+" "+c+">"},_createContentMarkup:function(t,e){var n="";("listing"===this._tag||"pre"===this._tag||"textarea"===this._tag)&&(n="\n");var r=this._currentElement.props,o=r.dangerouslySetInnerHTML;if(null!=o){if(null!=o.__html)return n+o.__html}else{var a=x[typeof r.children]?r.children:null,i=null!=a?null:r.children;if(null!=a)return n+g(a);if(null!=i){var s=this.mountChildren(i,t,e);return n+s.join("")}}return n},receiveComponent:function(t,e,n){var r=this._currentElement;this._currentElement=t,this.updateComponent(e,r,t,n)},updateComponent:function(t,e,n,o){r(this._currentElement.props),this._updateDOMProperties(e.props,t),this._updateDOMChildren(e.props,t,o)},_updateDOMProperties:function(t,e){var n,r,a,i=this._currentElement.props;for(n in t)if(!i.hasOwnProperty(n)&&t.hasOwnProperty(n))if(n===R){var s=this._previousStyleCopy;for(r in s)s.hasOwnProperty(r)&&(a=a||{},a[r]="");this._previousStyleCopy=null}else E.hasOwnProperty(n)?b(this._rootNodeID,n):(c.isStandardName[n]||c.isCustomAttribute(n))&&T.deletePropertyByID(this._rootNodeID,n);
for(n in i){var l=i[n],u=n===R?this._previousStyleCopy:t[n];if(i.hasOwnProperty(n)&&l!==u)if(n===R)if(l?l=this._previousStyleCopy=m({},l):this._previousStyleCopy=null,u){for(r in u)!u.hasOwnProperty(r)||l&&l.hasOwnProperty(r)||(a=a||{},a[r]="");for(r in l)l.hasOwnProperty(r)&&u[r]!==l[r]&&(a=a||{},a[r]=l[r])}else a=l;else E.hasOwnProperty(n)?o(this._rootNodeID,n,l,e):(c.isStandardName[n]||c.isCustomAttribute(n))&&T.updatePropertyByID(this._rootNodeID,n,l)}a&&T.updateStylesByID(this._rootNodeID,a)},_updateDOMChildren:function(t,e,n){var r=this._currentElement.props,o=x[typeof t.children]?t.children:null,a=x[typeof r.children]?r.children:null,i=t.dangerouslySetInnerHTML&&t.dangerouslySetInnerHTML.__html,s=r.dangerouslySetInnerHTML&&r.dangerouslySetInnerHTML.__html,c=null!=o?null:t.children,l=null!=a?null:r.children,u=null!=o||null!=i,p=null!=a||null!=s;null!=c&&null==l?this.updateChildren(null,e,n):u&&!p&&this.updateTextContent(""),null!=a?o!==a&&this.updateTextContent(""+a):null!=s?i!==s&&T.updateInnerHTMLByID(this._rootNodeID,s):null!=l&&this.updateChildren(l,e,n)},unmountComponent:function(){this.unmountChildren(),u.deleteAllListeners(this._rootNodeID),p.unmountIDFromEnvironment(this._rootNodeID),this._rootNodeID=null}},f.measureMethods(i,"ReactDOMComponent",{mountComponent:"mountComponent",updateComponent:"updateComponent"}),m(i.prototype,i.Mixin,h.Mixin),i.injection={injectIDOperations:function(t){i.BackendIDOperations=T=t}},e.exports=i},{11:11,12:12,131:131,150:150,151:151,157:157,171:171,29:29,33:33,40:40,6:6,77:77,78:78,82:82}],49:[function(t,e,n){"use strict";var r=t(16),o=t(27),a=t(32),i=t(38),s=t(63),c=s.createFactory("form"),l=i.createClass({displayName:"ReactDOMForm",tagName:"FORM",mixins:[a,o],render:function(){return c(this.props)},componentDidMount:function(){this.trapBubbledEvent(r.topLevelTypes.topReset,"reset"),this.trapBubbledEvent(r.topLevelTypes.topSubmit,"submit")}});e.exports=l},{16:16,27:27,32:32,38:38,63:63}],50:[function(t,e,n){"use strict";var r=t(6),o=t(10),a=t(12),i=t(77),s=t(82),c=t(150),l=t(164),u={dangerouslySetInnerHTML:"`dangerouslySetInnerHTML` must be set using `updateInnerHTMLByID()`.",style:"`style` must be set using `updateStylesByID()`."},p={updatePropertyByID:function(t,e,n){var r=i.getNode(t);c(!u.hasOwnProperty(e),"updatePropertyByID(...): %s",u[e]),null!=n?a.setValueForProperty(r,e,n):a.deleteValueForProperty(r,e)},deletePropertyByID:function(t,e,n){var r=i.getNode(t);c(!u.hasOwnProperty(e),"updatePropertyByID(...): %s",u[e]),a.deleteValueForProperty(r,e,n)},updateStylesByID:function(t,e){var n=i.getNode(t);r.setValueForStyles(n,e)},updateInnerHTMLByID:function(t,e){var n=i.getNode(t);l(n,e)},updateTextContentByID:function(t,e){var n=i.getNode(t);o.updateTextContent(n,e)},dangerouslyReplaceNodeWithMarkupByID:function(t,e){var n=i.getNode(t);o.dangerouslyReplaceNodeWithMarkup(n,e)},dangerouslyProcessChildrenUpdates:function(t,e){for(var n=0;n<t.length;n++)t[n].parentNode=i.getNode(t[n].parentID);o.processUpdates(t,e)}};s.measureMethods(p,"ReactDOMIDOperations",{updatePropertyByID:"updatePropertyByID",deletePropertyByID:"deletePropertyByID",updateStylesByID:"updateStylesByID",updateInnerHTMLByID:"updateInnerHTMLByID",updateTextContentByID:"updateTextContentByID",dangerouslyReplaceNodeWithMarkupByID:"dangerouslyReplaceNodeWithMarkupByID",dangerouslyProcessChildrenUpdates:"dangerouslyProcessChildrenUpdates"}),e.exports=p},{10:10,12:12,150:150,164:164,6:6,77:77,82:82}],51:[function(t,e,n){"use strict";var r=t(16),o=t(27),a=t(32),i=t(38),s=t(63),c=s.createFactory("iframe"),l=i.createClass({displayName:"ReactDOMIframe",tagName:"IFRAME",mixins:[a,o],render:function(){return c(this.props)},componentDidMount:function(){this.trapBubbledEvent(r.topLevelTypes.topLoad,"load")}});e.exports=l},{16:16,27:27,32:32,38:38,63:63}],52:[function(t,e,n){"use strict";var r=t(16),o=t(27),a=t(32),i=t(38),s=t(63),c=s.createFactory("img"),l=i.createClass({displayName:"ReactDOMImg",tagName:"IMG",mixins:[a,o],render:function(){return c(this.props)},componentDidMount:function(){this.trapBubbledEvent(r.topLevelTypes.topLoad,"load"),this.trapBubbledEvent(r.topLevelTypes.topError,"error")}});e.exports=l},{16:16,27:27,32:32,38:38,63:63}],53:[function(t,e,n){"use strict";function r(){this.isMounted()&&this.forceUpdate()}var o=t(2),a=t(12),i=t(26),s=t(32),c=t(38),l=t(63),u=t(77),p=t(100),d=t(29),h=t(150),f=l.createFactory("input"),m={},g=c.createClass({displayName:"ReactDOMInput",tagName:"INPUT",mixins:[o,i.Mixin,s],getInitialState:function(){var t=this.props.defaultValue;return{initialChecked:this.props.defaultChecked||!1,initialValue:null!=t?t:null}},render:function(){var t=d({},this.props);t.defaultChecked=null,t.defaultValue=null;var e=i.getValue(this);t.value=null!=e?e:this.state.initialValue;var n=i.getChecked(this);return t.checked=null!=n?n:this.state.initialChecked,t.onChange=this._handleChange,f(t,this.props.children)},componentDidMount:function(){var t=u.getID(this.getDOMNode());m[t]=this},componentWillUnmount:function(){var t=this.getDOMNode(),e=u.getID(t);delete m[e]},componentDidUpdate:function(t,e,n){var r=this.getDOMNode();null!=this.props.checked&&a.setValueForProperty(r,"checked",this.props.checked||!1);var o=i.getValue(this);null!=o&&a.setValueForProperty(r,"value",""+o)},_handleChange:function(t){var e,n=i.getOnChange(this);n&&(e=n.call(this,t)),p.asap(r,this);var o=this.props.name;if("radio"===this.props.type&&null!=o){for(var a=this.getDOMNode(),s=a;s.parentNode;)s=s.parentNode;for(var c=s.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),l=0,d=c.length;d>l;l++){var f=c[l];if(f!==a&&f.form===a.form){var g=u.getID(f);h(g,"ReactDOMInput: Mixing React and non-React radio inputs with the same `name` is not supported.");var v=m[g];h(v,"ReactDOMInput: Unknown radio button ID %s.",g),p.asap(r,v)}}}return e}});e.exports=g},{100:100,12:12,150:150,2:2,26:26,29:29,32:32,38:38,63:63,77:77}],54:[function(t,e,n){"use strict";var r=t(32),o=t(38),a=t(63),i=t(171),s=a.createFactory("option"),c=o.createClass({displayName:"ReactDOMOption",tagName:"OPTION",mixins:[r],componentWillMount:function(){i(null==this.props.selected,"Use the `defaultValue` or `value` props on <select> instead of setting `selected` on <option>.")},render:function(){return s(this.props,this.props.children)}});e.exports=c},{171:171,32:32,38:38,63:63}],55:[function(t,e,n){"use strict";function r(){if(this._pendingUpdate){this._pendingUpdate=!1;var t=s.getValue(this);null!=t&&this.isMounted()&&a(this,t)}}function o(t,e,n){if(null==t[e])return null;if(t.multiple){if(!Array.isArray(t[e]))return new Error("The `"+e+"` prop supplied to <select> must be an array if `multiple` is true.")}else if(Array.isArray(t[e]))return new Error("The `"+e+"` prop supplied to <select> must be a scalar value if `multiple` is false.")}function a(t,e){var n,r,o,a=t.getDOMNode().options;if(t.props.multiple){for(n={},r=0,o=e.length;o>r;r++)n[""+e[r]]=!0;for(r=0,o=a.length;o>r;r++){var i=n.hasOwnProperty(a[r].value);a[r].selected!==i&&(a[r].selected=i)}}else{for(n=""+e,r=0,o=a.length;o>r;r++)if(a[r].value===n)return void(a[r].selected=!0);a.length&&(a[0].selected=!0)}}var i=t(2),s=t(26),c=t(32),l=t(38),u=t(63),p=t(100),d=t(29),h=u.createFactory("select"),f=l.createClass({displayName:"ReactDOMSelect",tagName:"SELECT",mixins:[i,s.Mixin,c],propTypes:{defaultValue:o,value:o},render:function(){var t=d({},this.props);return t.onChange=this._handleChange,t.value=null,h(t,this.props.children)},componentWillMount:function(){this._pendingUpdate=!1},componentDidMount:function(){var t=s.getValue(this);null!=t?a(this,t):null!=this.props.defaultValue&&a(this,this.props.defaultValue)},componentDidUpdate:function(t){var e=s.getValue(this);null!=e?(this._pendingUpdate=!1,a(this,e)):!t.multiple!=!this.props.multiple&&(null!=this.props.defaultValue?a(this,this.props.defaultValue):a(this,this.props.multiple?[]:""))},_handleChange:function(t){var e,n=s.getOnChange(this);return n&&(e=n.call(this,t)),this._pendingUpdate=!0,p.asap(r,this),e}});e.exports=f},{100:100,2:2,26:26,29:29,32:32,38:38,63:63}],56:[function(t,e,n){"use strict";function r(t,e,n,r){return t===n&&e===r}function o(t){var e=document.selection,n=e.createRange(),r=n.text.length,o=n.duplicate();o.moveToElementText(t),o.setEndPoint("EndToStart",n);var a=o.text.length,i=a+r;return{start:a,end:i}}function a(t){var e=window.getSelection&&window.getSelection();if(!e||0===e.rangeCount)return null;var n=e.anchorNode,o=e.anchorOffset,a=e.focusNode,i=e.focusOffset,s=e.getRangeAt(0),c=r(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset),l=c?0:s.toString().length,u=s.cloneRange();u.selectNodeContents(t),u.setEnd(s.startContainer,s.startOffset);var p=r(u.startContainer,u.startOffset,u.endContainer,u.endOffset),d=p?0:u.toString().length,h=d+l,f=document.createRange();f.setStart(n,o),f.setEnd(a,i);var m=f.collapsed;return{start:m?h:d,end:m?d:h}}function i(t,e){var n,r,o=document.selection.createRange().duplicate();"undefined"==typeof e.end?(n=e.start,r=n):e.start>e.end?(n=e.end,r=e.start):(n=e.start,r=e.end),o.moveToElementText(t),o.moveStart("character",n),o.setEndPoint("EndToStart",o),o.moveEnd("character",r-n),o.select()}function s(t,e){if(window.getSelection){var n=window.getSelection(),r=t[u()].length,o=Math.min(e.start,r),a="undefined"==typeof e.end?o:Math.min(e.end,r);if(!n.extend&&o>a){var i=a;a=o,o=i}var s=l(t,o),c=l(t,a);if(s&&c){var p=document.createRange();p.setStart(s.node,s.offset),n.removeAllRanges(),o>a?(n.addRange(p),n.extend(c.node,c.offset)):(p.setEnd(c.node,c.offset),n.addRange(p))}}}var c=t(22),l=t(143),u=t(145),p=c.canUseDOM&&"selection"in document&&!("getSelection"in window),d={getOffsets:p?o:a,setOffsets:p?i:s};e.exports=d},{143:143,145:145,22:22}],57:[function(t,e,n){"use strict";var r=t(12),o=t(40),a=t(48),i=t(29),s=t(131),c=function(t){};i(c.prototype,{construct:function(t){this._currentElement=t,this._stringText=""+t,this._rootNodeID=null,this._mountIndex=0},mountComponent:function(t,e,n){this._rootNodeID=t;var o=s(this._stringText);return e.renderToStaticMarkup?o:"<span "+r.createMarkupForID(t)+">"+o+"</span>"},receiveComponent:function(t,e){if(t!==this._currentElement){this._currentElement=t;var n=""+t;n!==this._stringText&&(this._stringText=n,a.BackendIDOperations.updateTextContentByID(this._rootNodeID,n))}},unmountComponent:function(){o.unmountIDFromEnvironment(this._rootNodeID)}}),e.exports=c},{12:12,131:131,29:29,40:40,48:48}],58:[function(t,e,n){"use strict";function r(){this.isMounted()&&this.forceUpdate()}var o=t(2),a=t(12),i=t(26),s=t(32),c=t(38),l=t(63),u=t(100),p=t(29),d=t(150),h=t(171),f=l.createFactory("textarea"),m=c.createClass({displayName:"ReactDOMTextarea",tagName:"TEXTAREA",mixins:[o,i.Mixin,s],getInitialState:function(){var t=this.props.defaultValue,e=this.props.children;null!=e&&(h(!1,"Use the `defaultValue` or `value` props instead of setting children on <textarea>."),d(null==t,"If you supply `defaultValue` on a <textarea>, do not pass children."),Array.isArray(e)&&(d(e.length<=1,"<textarea> can only have at most one child."),e=e[0]),t=""+e),null==t&&(t="");var n=i.getValue(this);return{initialValue:""+(null!=n?n:t)}},render:function(){var t=p({},this.props);return d(null==t.dangerouslySetInnerHTML,"`dangerouslySetInnerHTML` does not make sense on <textarea>."),t.defaultValue=null,t.value=null,t.onChange=this._handleChange,f(t,this.state.initialValue)},componentDidUpdate:function(t,e,n){var r=i.getValue(this);if(null!=r){var o=this.getDOMNode();a.setValueForProperty(o,"value",""+r)}},_handleChange:function(t){var e,n=i.getOnChange(this);return n&&(e=n.call(this,t)),u.asap(r,this),e}});e.exports=m},{100:100,12:12,150:150,171:171,2:2,26:26,29:29,32:32,38:38,63:63}],59:[function(t,e,n){"use strict";function r(){this.reinitializeTransaction()}var o=t(100),a=t(116),i=t(29),s=t(129),c={initialize:s,close:function(){d.isBatchingUpdates=!1}},l={initialize:s,close:o.flushBatchedUpdates.bind(o)},u=[l,c];i(r.prototype,a.Mixin,{getTransactionWrappers:function(){return u}});var p=new r,d={isBatchingUpdates:!1,batchedUpdates:function(t,e,n,r,o){var a=d.isBatchingUpdates;d.isBatchingUpdates=!0,a?t(e,n,r,o):p.perform(t,null,e,n,r,o)}};e.exports=d},{100:100,116:116,129:129,29:29}],60:[function(t,e,n){"use strict";function r(t){return f.createClass({tagName:t.toUpperCase(),render:function(){return new P(t,null,null,null,null,this.props)}})}function o(){S.EventEmitter.injectReactEventListener(N),S.EventPluginHub.injectEventPluginOrder(c),S.EventPluginHub.injectInstanceHandle(k),S.EventPluginHub.injectMount(D),S.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:U,EnterLeaveEventPlugin:l,ChangeEventPlugin:i,MobileSafariClickEventPlugin:d,SelectEventPlugin:I,BeforeInputEventPlugin:a}),S.NativeComponent.injectGenericComponentClass(v),S.NativeComponent.injectTextComponentClass(T),S.NativeComponent.injectAutoWrapper(r),S.Class.injectMixin(h),S.NativeComponent.injectComponentClasses({button:y,form:_,iframe:C,img:w,input:E,option:x,select:R,textarea:A,html:F("html"),head:F("head"),body:F("body")}),S.DOMProperty.injectDOMPropertyConfig(p),S.DOMProperty.injectDOMPropertyConfig(L),S.EmptyComponent.injectEmptyComponent("noscript"),S.Updates.injectReconcileTransaction(M),S.Updates.injectBatchingStrategy(g),S.RootIndex.injectCreateReactRootIndex(u.canUseDOM?s.createReactRootIndex:O.createReactRootIndex),S.Component.injectEnvironment(m),S.DOMComponent.injectIDOperations(b);var e=u.canUseDOM&&window.location.href||"";if(/[?&]react_perf\b/.test(e)){var n=t(61);n.start()}}var a=t(3),i=t(8),s=t(9),c=t(14),l=t(15),u=t(22),p=t(24),d=t(28),h=t(32),f=t(38),m=t(40),g=t(59),v=t(48),y=t(47),_=t(49),w=t(52),b=t(50),C=t(51),E=t(53),x=t(54),R=t(55),A=t(58),T=t(57),P=t(63),N=t(68),S=t(70),k=t(72),D=t(77),M=t(88),I=t(102),O=t(103),U=t(104),L=t(101),F=t(125);e.exports={inject:o}},{101:101,102:102,103:103,104:104,125:125,14:14,15:15,22:22,24:24,28:28,3:3,32:32,38:38,40:40,47:47,48:48,49:49,50:50,51:51,52:52,53:53,54:54,55:55,57:57,58:58,59:59,61:61,63:63,68:68,70:70,72:72,77:77,8:8,88:88,9:9}],61:[function(t,e,n){"use strict";function r(t){return Math.floor(100*t)/100}function o(t,e,n){t[e]=(t[e]||0)+n}var a=t(11),i=t(62),s=t(77),c=t(82),l=t(162),u={_allMeasurements:[],_mountStack:[0],_injected:!1,start:function(){u._injected||c.injection.injectMeasure(u.measure),u._allMeasurements.length=0,c.enableMeasure=!0},stop:function(){c.enableMeasure=!1},getLastMeasurements:function(){return u._allMeasurements},printExclusive:function(t){t=t||u._allMeasurements;var e=i.getExclusiveSummary(t);console.table(e.map(function(t){return{"Component class name":t.componentName,"Total inclusive time (ms)":r(t.inclusive),"Exclusive mount time (ms)":r(t.exclusive),"Exclusive render time (ms)":r(t.render),"Mount time per instance (ms)":r(t.exclusive/t.count),"Render time per instance (ms)":r(t.render/t.count),Instances:t.count}}))},printInclusive:function(t){t=t||u._allMeasurements;var e=i.getInclusiveSummary(t);console.table(e.map(function(t){return{"Owner > component":t.componentName,"Inclusive time (ms)":r(t.time),Instances:t.count}})),console.log("Total time:",i.getTotalTime(t).toFixed(2)+" ms")},getMeasurementsSummaryMap:function(t){var e=i.getInclusiveSummary(t,!0);return e.map(function(t){return{"Owner > component":t.componentName,"Wasted time (ms)":t.time,Instances:t.count}})},printWasted:function(t){t=t||u._allMeasurements,console.table(u.getMeasurementsSummaryMap(t)),console.log("Total time:",i.getTotalTime(t).toFixed(2)+" ms")},printDOM:function(t){t=t||u._allMeasurements;var e=i.getDOMSummary(t);console.table(e.map(function(t){var e={};return e[a.ID_ATTRIBUTE_NAME]=t.id,e.type=t.type,e.args=JSON.stringify(t.args),e})),console.log("Total time:",i.getTotalTime(t).toFixed(2)+" ms")},_recordWrite:function(t,e,n,r){var o=u._allMeasurements[u._allMeasurements.length-1].writes;o[t]=o[t]||[],o[t].push({type:e,time:n,args:r})},measure:function(t,e,n){return function(){for(var r=[],a=0,i=arguments.length;i>a;a++)r.push(arguments[a]);var c,p,d;if("_renderNewRootComponent"===e||"flushBatchedUpdates"===e)return u._allMeasurements.push({exclusive:{},inclusive:{},render:{},counts:{},writes:{},displayNames:{},totalTime:0}),d=l(),p=n.apply(this,r),u._allMeasurements[u._allMeasurements.length-1].totalTime=l()-d,p;if("_mountImageIntoNode"===e||"ReactDOMIDOperations"===t){if(d=l(),p=n.apply(this,r),c=l()-d,"_mountImageIntoNode"===e){var h=s.getID(r[1]);u._recordWrite(h,e,c,r[0])}else"dangerouslyProcessChildrenUpdates"===e?r[0].forEach(function(t){var e={};null!==t.fromIndex&&(e.fromIndex=t.fromIndex),null!==t.toIndex&&(e.toIndex=t.toIndex),null!==t.textContent&&(e.textContent=t.textContent),null!==t.markupIndex&&(e.markup=r[1][t.markupIndex]),u._recordWrite(t.parentID,t.type,c,e)}):u._recordWrite(r[0],e,c,Array.prototype.slice.call(r,1));return p}if("ReactCompositeComponent"!==t||"mountComponent"!==e&&"updateComponent"!==e&&"_renderValidatedComponent"!==e)return n.apply(this,r);if("string"==typeof this._currentElement.type)return n.apply(this,r);var f="mountComponent"===e?r[0]:this._rootNodeID,m="_renderValidatedComponent"===e,g="mountComponent"===e,v=u._mountStack,y=u._allMeasurements[u._allMeasurements.length-1];if(m?o(y.counts,f,1):g&&v.push(0),d=l(),p=n.apply(this,r),c=l()-d,m)o(y.render,f,c);else if(g){var _=v.pop();v[v.length-1]+=c,o(y.exclusive,f,c-_),o(y.inclusive,f,c)}else o(y.inclusive,f,c);return y.displayNames[f]={current:this.getName(),owner:this._currentElement._owner?this._currentElement._owner.getName():"<root>"},p}}};e.exports=u},{11:11,162:162,62:62,77:77,82:82}],62:[function(t,e,n){function r(t){for(var e=0,n=0;n<t.length;n++){var r=t[n];e+=r.totalTime}return e}function o(t){for(var e=[],n=0;n<t.length;n++){var r,o=t[n];for(r in o.writes)o.writes[r].forEach(function(t){e.push({id:r,type:u[t.type]||t.type,args:t.args})})}return e}function a(t){for(var e,n={},r=0;r<t.length;r++){var o=t[r],a=c({},o.exclusive,o.inclusive);for(var i in a)e=o.displayNames[i].current,n[e]=n[e]||{componentName:e,inclusive:0,exclusive:0,render:0,count:0},o.render[i]&&(n[e].render+=o.render[i]),o.exclusive[i]&&(n[e].exclusive+=o.exclusive[i]),o.inclusive[i]&&(n[e].inclusive+=o.inclusive[i]),o.counts[i]&&(n[e].count+=o.counts[i])}var s=[];for(e in n)n[e].exclusive>=l&&s.push(n[e]);return s.sort(function(t,e){return e.exclusive-t.exclusive}),s}function i(t,e){for(var n,r={},o=0;o<t.length;o++){var a,i=t[o],u=c({},i.exclusive,i.inclusive);e&&(a=s(i));for(var p in u)if(!e||a[p]){var d=i.displayNames[p];n=d.owner+" > "+d.current,r[n]=r[n]||{componentName:n,time:0,count:0},i.inclusive[p]&&(r[n].time+=i.inclusive[p]),i.counts[p]&&(r[n].count+=i.counts[p])}}var h=[];for(n in r)r[n].time>=l&&h.push(r[n]);return h.sort(function(t,e){return e.time-t.time}),h}function s(t){var e={},n=Object.keys(t.writes),r=c({},t.exclusive,t.inclusive);for(var o in r){for(var a=!1,i=0;i<n.length;i++)if(0===n[i].indexOf(o)){a=!0;break}!a&&t.counts[o]>0&&(e[o]=!0)}return e}var c=t(29),l=1.2,u={_mountImageIntoNode:"set innerHTML",INSERT_MARKUP:"set innerHTML",MOVE_EXISTING:"move",REMOVE_NODE:"remove",TEXT_CONTENT:"set textContent",updatePropertyByID:"update attribute",deletePropertyByID:"delete attribute",updateStylesByID:"update styles",updateInnerHTMLByID:"set innerHTML",dangerouslyReplaceNodeWithMarkupByID:"replace"},p={getExclusiveSummary:a,getInclusiveSummary:i,getDOMSummary:o,getTotalTime:r};e.exports=p},{29:29}],63:[function(t,e,n){"use strict";function r(t,e){Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:function(){return this._store?this._store[e]:null},set:function(t){c(!1,"Don't set the %s property of the React element. Instead, specify the correct value when initially creating the element.",e),this._store[e]=t}})}function o(t){try{var e={props:!0};for(var n in e)r(t,n);u=!0}catch(o){}}var a=t(44),i=t(45),s=t(29),c=t(171),l={key:!0,ref:!0},u=!1,p=function(t,e,n,r,o,a){this.type=t,this.key=e,this.ref=n,this._owner=r,this._context=o,this._store={props:a,originalProps:s({},a)};try{Object.defineProperty(this._store,"validated",{configurable:!1,enumerable:!1,writable:!0})}catch(i){}return this._store.validated=!1,u?void Object.freeze(this):void(this.props=a)};p.prototype={_isReactElement:!0},o(p.prototype),p.createElement=function(t,e,n){var r,o={},s=null,c=null;if(null!=e){c=void 0===e.ref?null:e.ref,s=void 0===e.key?null:""+e.key;for(r in e)e.hasOwnProperty(r)&&!l.hasOwnProperty(r)&&(o[r]=e[r])}var u=arguments.length-2;if(1===u)o.children=n;else if(u>1){for(var d=Array(u),h=0;u>h;h++)d[h]=arguments[h+2];o.children=d}if(t&&t.defaultProps){var f=t.defaultProps;for(r in f)"undefined"==typeof o[r]&&(o[r]=f[r])}return new p(t,s,c,i.current,a.current,o)},p.createFactory=function(t){var e=p.createElement.bind(null,t);return e.type=t,e},p.cloneAndReplaceProps=function(t,e){var n=new p(t.type,t.key,t.ref,t._owner,t._context,e);return n._store.validated=t._store.validated,n},p.cloneElement=function(t,e,n){var r,o=s({},t.props),a=t.key,c=t.ref,u=t._owner;if(null!=e){void 0!==e.ref&&(c=e.ref,u=i.current),void 0!==e.key&&(a=""+e.key);for(r in e)e.hasOwnProperty(r)&&!l.hasOwnProperty(r)&&(o[r]=e[r])}var d=arguments.length-2;if(1===d)o.children=n;else if(d>1){for(var h=Array(d),f=0;d>f;f++)h[f]=arguments[f+2];o.children=h}return new p(t.type,a,c,u,t._context,o)},p.isValidElement=function(t){var e=!(!t||!t._isReactElement);return e},e.exports=p},{171:171,29:29,44:44,45:45}],64:[function(t,e,n){"use strict";function r(){if(_.current){var t=_.current.getName();if(t)return" Check the render method of `"+t+"`."}return""}function o(t){var e=t&&t.getPublicInstance();if(!e)return void 0;var n=e.constructor;return n?n.displayName||n.name||void 0:void 0}function a(){var t=_.current;return t&&o(t)||void 0}function i(t,e){t._store.validated||null!=t.key||(t._store.validated=!0,c('Each child in an array or iterator should have a unique "key" prop.',t,e))}function s(t,e,n){A.test(t)&&c("Child objects should have non-numeric keys so ordering is preserved.",e,n)}function c(t,e,n){var r=a(),i="string"==typeof n?n:n.displayName||n.name,s=r||i,c=x[t]||(x[t]={});if(!c.hasOwnProperty(s)){c[s]=!0;var l=r?" Check the render method of "+r+".":i?" Check the React.render call using <"+i+">.":"",u="";if(e&&e._owner&&e._owner!==_.current){var p=o(e._owner);u=" It was passed a child from "+p+"."}E(!1,t+"%s%s See https://fb.me/react-warning-keys for more information.",l,u)}}function l(t,e){if(Array.isArray(t))for(var n=0;n<t.length;n++){var r=t[n];m.isValidElement(r)&&i(r,e)}else if(m.isValidElement(t))t._store.validated=!0;else if(t){var o=b(t);if(o){if(o!==t.entries)for(var a,c=o.call(t);!(a=c.next()).done;)m.isValidElement(a.value)&&i(a.value,e)}else if("object"==typeof t){var l=g.extractIfFragment(t);for(var u in l)l.hasOwnProperty(u)&&s(u,l[u],e)}}}function u(t,e,n,o){for(var a in e)if(e.hasOwnProperty(a)){var i;try{C("function"==typeof e[a],"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",t||"React class",y[o],a),i=e[a](n,a,t,o)}catch(s){i=s}if(i instanceof Error&&!(i.message in R)){R[i.message]=!0;var c=r(this);E(!1,"Failed propType: %s%s",i.message,c)}}}function p(t,e){var n=e.type,r="string"==typeof n?n:n.displayName,o=e._owner?e._owner.getPublicInstance().constructor.displayName:null,a=t+"|"+r+"|"+o;if(!T.hasOwnProperty(a)){T[a]=!0;var i="";r&&(i=" <"+r+" />");var s="";o&&(s=" The element was created by "+o+"."),E(!1,"Don't set .props.%s of the React component%s. Instead, specify the correct value when initially creating the element or use React.cloneElement to make a new element with updated props.%s",t,i,s)}}function d(t,e){return t!==t?e!==e:0===t&&0===e?1/t===1/e:t===e}function h(t){if(t._store){var e=t._store.originalProps,n=t.props;for(var r in n)n.hasOwnProperty(r)&&(e.hasOwnProperty(r)&&d(e[r],n[r])||(p(r,t),e[r]=n[r]))}}function f(t){if(null!=t.type){var e=w.getComponentClassForElement(t),n=e.displayName||e.name;e.propTypes&&u(n,e.propTypes,t.props,v.prop),"function"==typeof e.getDefaultProps&&E(e.getDefaultProps.isReactClassApproved,"getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}var m=t(63),g=t(69),v=t(85),y=t(84),_=t(45),w=t(80),b=t(141),C=t(150),E=t(171),x={},R={},A=/^\d+$/,T={},P={checkAndWarnForMutatedProps:h,createElement:function(t,e,n){E(null!=t,"React.createElement: type should not be null or undefined. It should be a string (for DOM elements) or a ReactClass (for composite components).");var r=m.createElement.apply(this,arguments);if(null==r)return r;for(var o=2;o<arguments.length;o++)l(arguments[o],t);return f(r),r},createFactory:function(t){var e=P.createElement.bind(null,t);e.type=t;try{Object.defineProperty(e,"type",{enumerable:!1,get:function(){return E(!1,"Factory.type is deprecated. Access the class directly before passing it to createFactory."),Object.defineProperty(this,"type",{value:t}),t}})}catch(n){}return e},cloneElement:function(t,e,n){for(var r=m.cloneElement.apply(this,arguments),o=2;o<arguments.length;o++)l(arguments[o],r.type);return f(r),r}};e.exports=P},{141:141,150:150,171:171,45:45,63:63,69:69,80:80,84:84,85:85}],65:[function(t,e,n){"use strict";function r(t){u[t]=!0}function o(t){delete u[t]}function a(t){return!!u[t]}var i,s=t(63),c=t(73),l=t(150),u={},p={injectEmptyComponent:function(t){i=s.createFactory(t)}},d=function(){};d.prototype.componentDidMount=function(){var t=c.get(this);t&&r(t._rootNodeID)},d.prototype.componentWillUnmount=function(){var t=c.get(this);t&&o(t._rootNodeID)},d.prototype.render=function(){return l(i,"Trying to return null from a render, but no null placeholder component was injected."),i()};var h=s.createElement(d),f={emptyElement:h,injection:p,isNullComponentID:a};e.exports=f},{150:150,63:63,73:73}],66:[function(t,e,n){"use strict";var r={guard:function(t,e){return t}};e.exports=r},{}],67:[function(t,e,n){"use strict";function r(t){o.enqueueEvents(t),o.processEventQueue()}var o=t(18),a={handleTopLevel:function(t,e,n,a){var i=o.extractEvents(t,e,n,a);r(i)}};e.exports=a},{18:18}],68:[function(t,e,n){"use strict";function r(t){var e=p.getID(t),n=u.getReactRootIDFromNodeID(e),r=p.findReactContainerForID(n),o=p.getFirstReactDOM(r);return o}function o(t,e){this.topLevelType=t,this.nativeEvent=e,this.ancestors=[]}function a(t){for(var e=p.getFirstReactDOM(f(t.nativeEvent))||window,n=e;n;)t.ancestors.push(n),n=r(n);for(var o=0,a=t.ancestors.length;a>o;o++){e=t.ancestors[o];var i=p.getID(e)||"";g._handleTopLevel(t.topLevelType,e,i,t.nativeEvent)}}function i(t){var e=m(window);t(e)}var s=t(17),c=t(22),l=t(30),u=t(72),p=t(77),d=t(100),h=t(29),f=t(140),m=t(146);h(o.prototype,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),l.addPoolingTo(o,l.twoArgumentPooler);var g={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:c.canUseDOM?window:null,setHandleTopLevel:function(t){g._handleTopLevel=t},setEnabled:function(t){g._enabled=!!t},isEnabled:function(){return g._enabled},trapBubbledEvent:function(t,e,n){var r=n;return r?s.listen(r,e,g.dispatchEvent.bind(null,t)):null},trapCapturedEvent:function(t,e,n){var r=n;return r?s.capture(r,e,g.dispatchEvent.bind(null,t)):null},monitorScrollValue:function(t){var e=i.bind(null,t);s.listen(window,"scroll",e)},dispatchEvent:function(t,e){if(g._enabled){var n=o.getPooled(t,e);try{d.batchedUpdates(a,n)}finally{o.release(n)}}}};e.exports=g},{100:100,140:140,146:146,17:17,22:22,29:29,30:30,72:72,77:77}],69:[function(t,e,n){"use strict";var r=t(63),o=t(171),a="_reactFragment",i="_reactDidWarn",s=!1;try{var c=function(){return 1};Object.defineProperty({},a,{enumerable:!1,value:!0}),Object.defineProperty({},"key",{enumerable:!0,get:c}),s=!0}catch(l){}var u=function(t,e){Object.defineProperty(t,e,{enumerable:!0,get:function(){return o(this[i],"A ReactFragment is an opaque type. Accessing any of its properties is deprecated. Pass it to one of the React.Children helpers."),this[i]=!0,this[a][e]},set:function(t){o(this[i],"A ReactFragment is an immutable opaque type. Mutating its properties is deprecated."),this[i]=!0,this[a][e]=t}})},p={},d=function(t){var e="";for(var n in t)e+=n+":"+typeof t[n]+",";var r=!!p[e];return p[e]=!0,r},h={create:function(t){if("object"!=typeof t||!t||Array.isArray(t))return o(!1,"React.addons.createFragment only accepts a single object.",t),t;if(r.isValidElement(t))return o(!1,"React.addons.createFragment does not accept a ReactElement without a wrapper object."),t;if(s){var e={};Object.defineProperty(e,a,{enumerable:!1,value:t}),Object.defineProperty(e,i,{writable:!0,enumerable:!1,value:!1});for(var n in t)u(e,n);return Object.preventExtensions(e),e}return t},extract:function(t){return s?t[a]?t[a]:(o(d(t),"Any use of a keyed object should be wrapped in React.addons.createFragment(object) before being passed as a child."),t):t},extractIfFragment:function(t){if(s){if(t[a])return t[a];for(var e in t)if(t.hasOwnProperty(e)&&r.isValidElement(t[e]))return h.extract(t)}return t}};e.exports=h},{171:171,63:63}],70:[function(t,e,n){"use strict";var r=t(11),o=t(18),a=t(41),i=t(38),s=t(65),c=t(33),l=t(80),u=t(48),p=t(82),d=t(91),h=t(100),f={Component:a.injection,Class:i.injection,DOMComponent:u.injection,DOMProperty:r.injection,EmptyComponent:s.injection,EventPluginHub:o.injection,EventEmitter:c.injection,NativeComponent:l.injection,Perf:p.injection,RootIndex:d.injection,Updates:h.injection};e.exports=f},{100:100,11:11,18:18,33:33,38:38,41:41,48:48,65:65,80:80,82:82,91:91}],71:[function(t,e,n){"use strict";function r(t){return a(document.documentElement,t)}var o=t(56),a=t(123),i=t(134),s=t(136),c={hasSelectionCapabilities:function(t){return t&&("INPUT"===t.nodeName&&"text"===t.type||"TEXTAREA"===t.nodeName||"true"===t.contentEditable)},getSelectionInformation:function(){var t=s();return{focusedElem:t,selectionRange:c.hasSelectionCapabilities(t)?c.getSelection(t):null}},restoreSelection:function(t){var e=s(),n=t.focusedElem,o=t.selectionRange;e!==n&&r(n)&&(c.hasSelectionCapabilities(n)&&c.setSelection(n,o),i(n))},getSelection:function(t){var e;if("selectionStart"in t)e={start:t.selectionStart,end:t.selectionEnd};else if(document.selection&&"INPUT"===t.nodeName){var n=document.selection.createRange();n.parentElement()===t&&(e={start:-n.moveStart("character",-t.value.length),end:-n.moveEnd("character",-t.value.length)})}else e=o.getOffsets(t);return e||{start:0,end:0}},setSelection:function(t,e){var n=e.start,r=e.end;if("undefined"==typeof r&&(r=n),"selectionStart"in t)t.selectionStart=n,t.selectionEnd=Math.min(r,t.value.length);else if(document.selection&&"INPUT"===t.nodeName){var a=t.createTextRange();a.collapse(!0),a.moveStart("character",n),a.moveEnd("character",r-n),a.select()}else o.setOffsets(t,e)}};e.exports=c},{123:123,134:134,136:136,56:56}],72:[function(t,e,n){"use strict";function r(t){return h+t.toString(36)}function o(t,e){return t.charAt(e)===h||e===t.length}function a(t){return""===t||t.charAt(0)===h&&t.charAt(t.length-1)!==h}function i(t,e){return 0===e.indexOf(t)&&o(e,t.length)}function s(t){return t?t.substr(0,t.lastIndexOf(h)):""}function c(t,e){if(d(a(t)&&a(e),"getNextDescendantID(%s, %s): Received an invalid React DOM ID.",t,e),d(i(t,e),"getNextDescendantID(...): React has made an invalid assumption about the DOM hierarchy. Expected `%s` to be an ancestor of `%s`.",t,e),t===e)return t;var n,r=t.length+f;for(n=r;n<e.length&&!o(e,n);n++);return e.substr(0,n)}function l(t,e){var n=Math.min(t.length,e.length);if(0===n)return"";for(var r=0,i=0;n>=i;i++)if(o(t,i)&&o(e,i))r=i;else if(t.charAt(i)!==e.charAt(i))break;var s=t.substr(0,r);return d(a(s),"getFirstCommonAncestorID(%s, %s): Expected a valid React DOM ID: %s",t,e,s),s}function u(t,e,n,r,o,a){t=t||"",e=e||"",d(t!==e,"traverseParentPath(...): Cannot traverse from and to the same ID, `%s`.",t);var l=i(e,t);d(l||i(t,e),"traverseParentPath(%s, %s, ...): Cannot traverse from two IDs that do not have a parent path.",t,e);for(var u=0,p=l?s:c,h=t;;h=p(h,e)){
var f;if(o&&h===t||a&&h===e||(f=n(h,l,r)),f===!1||h===e)break;d(u++<m,"traverseParentPath(%s, %s, ...): Detected an infinite loop while traversing the React DOM ID tree. This may be due to malformed IDs: %s",t,e)}}var p=t(91),d=t(150),h=".",f=h.length,m=100,g={createReactRootID:function(){return r(p.createReactRootIndex())},createReactID:function(t,e){return t+e},getReactRootIDFromNodeID:function(t){if(t&&t.charAt(0)===h&&t.length>1){var e=t.indexOf(h,1);return e>-1?t.substr(0,e):t}return null},traverseEnterLeave:function(t,e,n,r,o){var a=l(t,e);a!==t&&u(t,a,n,r,!1,!0),a!==e&&u(a,e,n,o,!0,!1)},traverseTwoPhase:function(t,e,n){t&&(u("",t,e,n,!0,!1),u(t,"",e,n,!1,!0))},traverseAncestors:function(t,e,n){u("",t,e,n,!0,!1)},_getFirstCommonAncestorID:l,_getNextDescendantID:c,isAncestorIDOf:i,SEPARATOR:h};e.exports=g},{150:150,91:91}],73:[function(t,e,n){"use strict";var r={remove:function(t){t._reactInternalInstance=void 0},get:function(t){return t._reactInternalInstance},has:function(t){return void 0!==t._reactInternalInstance},set:function(t,e){t._reactInternalInstance=e}};e.exports=r},{}],74:[function(t,e,n){"use strict";var r={currentlyMountingInstance:null,currentlyUnmountingInstance:null};e.exports=r},{}],75:[function(t,e,n){"use strict";function r(t,e){this.value=t,this.requestChange=e}function o(t){var e={value:"undefined"==typeof t?a.PropTypes.any.isRequired:t.isRequired,requestChange:a.PropTypes.func.isRequired};return a.PropTypes.shape(e)}var a=t(31);r.PropTypes={link:o},e.exports=r},{31:31}],76:[function(t,e,n){"use strict";var r=t(119),o={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(t){var e=r(t);return t.replace(">"," "+o.CHECKSUM_ATTR_NAME+'="'+e+'">')},canReuseMarkup:function(t,e){var n=e.getAttribute(o.CHECKSUM_ATTR_NAME);n=n&&parseInt(n,10);var a=r(t);return a===n}};e.exports=o},{119:119}],77:[function(t,e,n){"use strict";function r(t,e){for(var n=Math.min(t.length,e.length),r=0;n>r;r++)if(t.charAt(r)!==e.charAt(r))return r;return t.length===e.length?-1:n}function o(t){var e=k(t);return e&&K.getID(e)}function a(t){var e=i(t);if(e)if(j.hasOwnProperty(e)){var n=j[e];n!==t&&(M(!u(n,e),"ReactMount: Two valid but unequal nodes with the same `%s`: %s",F,e),j[e]=t)}else j[e]=t;return e}function i(t){return t&&t.getAttribute&&t.getAttribute(F)||""}function s(t,e){var n=i(t);n!==e&&delete j[n],t.setAttribute(F,e),j[e]=t}function c(t){return j.hasOwnProperty(t)&&u(j[t],t)||(j[t]=K.findReactNodeByID(t)),j[t]}function l(t){var e=E.get(t)._rootNodeID;return b.isNullComponentID(e)?null:(j.hasOwnProperty(e)&&u(j[e],e)||(j[e]=K.findReactNodeByID(e)),j[e])}function u(t,e){if(t){M(i(t)===e,"ReactMount: Unexpected modification of `%s`",F);var n=K.findReactContainerForID(e);if(n&&S(n,t))return!0}return!1}function p(t){delete j[t]}function d(t){var e=j[t];return e&&u(e,t)?void($=e):!1}function h(t){$=null,C.traverseAncestors(t,d);var e=$;return $=null,e}function f(t,e,n,r,o){var a=A.mountComponent(t,e,r,N);t._isTopLevel=!0,K._mountImageIntoNode(a,n,o)}function m(t,e,n,r){var o=P.ReactReconcileTransaction.getPooled();o.perform(f,null,t,e,n,o,r),P.ReactReconcileTransaction.release(o)}var g=t(11),v=t(33),y=t(45),_=t(63),w=t(64),b=t(65),C=t(72),E=t(73),x=t(76),R=t(82),A=t(89),T=t(99),P=t(100),N=t(130),S=t(123),k=t(144),D=t(149),M=t(150),I=t(164),O=t(167),U=t(171),L=C.SEPARATOR,F=g.ID_ATTRIBUTE_NAME,j={},V=1,B=9,H={},W={},q={},z=[],$=null,K={_instancesByReactRootID:H,scrollMonitor:function(t,e){e()},_updateRootComponent:function(t,e,n,r){return w.checkAndWarnForMutatedProps(e),K.scrollMonitor(n,function(){T.enqueueElementInternal(t,e),r&&T.enqueueCallbackInternal(t,r)}),q[o(n)]=k(n),t},_registerComponent:function(t,e){M(e&&(e.nodeType===V||e.nodeType===B),"_registerComponent(...): Target container is not a DOM element."),v.ensureScrollValueMonitoring();var n=K.registerContainer(e);return H[n]=t,n},_renderNewRootComponent:function(t,e,n){U(null==y.current,"_renderNewRootComponent(): Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate.");var r=D(t,null),o=K._registerComponent(r,e);return P.batchedUpdates(m,r,o,e,n),q[o]=k(e),r},render:function(t,e,n){M(_.isValidElement(t),"React.render(): Invalid component element.%s","string"==typeof t?" Instead of passing an element string, make sure to instantiate it by passing it to React.createElement.":"function"==typeof t?" Instead of passing a component class, make sure to instantiate it by passing it to React.createElement.":null!=t&&void 0!==t.props?" This may be caused by unintentionally loading two independent copies of React.":"");var r=H[o(e)];if(r){var a=r._currentElement;if(O(a,t))return K._updateRootComponent(r,t,e,n).getPublicInstance();K.unmountComponentAtNode(e)}var i=k(e),s=i&&K.isRenderedByReact(i);if(!s||i.nextSibling)for(var c=i;c;){if(K.isRenderedByReact(c)){U(!1,"render(): Target node has markup rendered by React, but there are unrelated nodes as well. This is most commonly caused by white-space inserted around server-rendered markup.");break}c=c.nextSibling}var l=s&&!r,u=K._renderNewRootComponent(t,e,l).getPublicInstance();return n&&n.call(u),u},constructAndRenderComponent:function(t,e,n){var r=_.createElement(t,e);return K.render(r,n)},constructAndRenderComponentByID:function(t,e,n){var r=document.getElementById(n);return M(r,'Tried to get element with id of "%s" but it is not present on the page.',n),K.constructAndRenderComponent(t,e,r)},registerContainer:function(t){var e=o(t);return e&&(e=C.getReactRootIDFromNodeID(e)),e||(e=C.createReactRootID()),W[e]=t,e},unmountComponentAtNode:function(t){U(null==y.current,"unmountComponentAtNode(): Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate."),M(t&&(t.nodeType===V||t.nodeType===B),"unmountComponentAtNode(...): Target container is not a DOM element.");var e=o(t),n=H[e];return n?(K.unmountComponentFromNode(n,t),delete H[e],delete W[e],delete q[e],!0):!1},unmountComponentFromNode:function(t,e){for(A.unmountComponent(t),e.nodeType===B&&(e=e.documentElement);e.lastChild;)e.removeChild(e.lastChild)},findReactContainerForID:function(t){var e=C.getReactRootIDFromNodeID(t),n=W[e],r=q[e];if(r&&r.parentNode!==n){M(i(r)===e,"ReactMount: Root element ID differed from reactRootID.");var o=n.firstChild;o&&e===i(o)?q[e]=o:U(!1,"ReactMount: Root element has been removed from its original container. New container:",r.parentNode)}return n},findReactNodeByID:function(t){var e=K.findReactContainerForID(t);return K.findComponentRoot(e,t)},isRenderedByReact:function(t){if(1!==t.nodeType)return!1;var e=K.getID(t);return e?e.charAt(0)===L:!1},getFirstReactDOM:function(t){for(var e=t;e&&e.parentNode!==e;){if(K.isRenderedByReact(e))return e;e=e.parentNode}return null},findComponentRoot:function(t,e){var n=z,r=0,o=h(e)||t;for(n[0]=o.firstChild,n.length=1;r<n.length;){for(var a,i=n[r++];i;){var s=K.getID(i);s?e===s?a=i:C.isAncestorIDOf(s,e)&&(n.length=r=0,n.push(i.firstChild)):n.push(i.firstChild),i=i.nextSibling}if(a)return n.length=0,a}n.length=0,M(!1,"findComponentRoot(..., %s): Unable to find element. This probably means the DOM was unexpectedly mutated (e.g., by the browser), usually due to forgetting a <tbody> when using tables, nesting tags like <form>, <p>, or <a>, or using non-SVG elements in an <svg> parent. Try inspecting the child nodes of the element with React ID `%s`.",e,K.getID(t))},_mountImageIntoNode:function(t,e,n){if(M(e&&(e.nodeType===V||e.nodeType===B),"mountComponentIntoNode(...): Target container is not valid."),n){var o=k(e);if(x.canReuseMarkup(t,o))return;var a=o.getAttribute(x.CHECKSUM_ATTR_NAME);o.removeAttribute(x.CHECKSUM_ATTR_NAME);var i=o.outerHTML;o.setAttribute(x.CHECKSUM_ATTR_NAME,a);var s=r(t,i),c=" (client) "+t.substring(s-20,s+20)+"\n (server) "+i.substring(s-20,s+20);M(e.nodeType!==B,"You're trying to render a component to the document using server rendering but the checksum was invalid. This usually means you rendered a different component type or props on the client from the one on the server, or your render() methods are impure. React cannot handle this case due to cross-browser quirks by rendering at the document root. You should look for environment dependent code in your components and ensure the props are the same client and server side:\n%s",c),U(!1,"React attempted to reuse markup in a container but the checksum was invalid. This generally means that you are using server rendering and the markup generated on the server was not what the client was expecting. React injected new markup to compensate which works but you have lost many of the benefits of server rendering. Instead, figure out why the markup being generated is different on the client or server:\n%s",c)}M(e.nodeType!==B,"You're trying to render a component to the document but you didn't use server rendering. We can't do this without using server rendering due to cross-browser quirks. See React.renderToString() for server rendering."),I(e,t)},getReactRootID:o,getID:a,setID:s,getNode:c,getNodeFromInstance:l,purgeID:p};R.measureMethods(K,"ReactMount",{_renderNewRootComponent:"_renderNewRootComponent",_mountImageIntoNode:"_mountImageIntoNode"}),e.exports=K},{100:100,11:11,123:123,130:130,144:144,149:149,150:150,164:164,167:167,171:171,33:33,45:45,63:63,64:64,65:65,72:72,73:73,76:76,82:82,89:89,99:99}],78:[function(t,e,n){"use strict";function r(t,e,n){f.push({parentID:t,parentNode:null,type:u.INSERT_MARKUP,markupIndex:m.push(e)-1,textContent:null,fromIndex:null,toIndex:n})}function o(t,e,n){f.push({parentID:t,parentNode:null,type:u.MOVE_EXISTING,markupIndex:null,textContent:null,fromIndex:e,toIndex:n})}function a(t,e){f.push({parentID:t,parentNode:null,type:u.REMOVE_NODE,markupIndex:null,textContent:null,fromIndex:e,toIndex:null})}function i(t,e){f.push({parentID:t,parentNode:null,type:u.TEXT_CONTENT,markupIndex:null,textContent:e,fromIndex:null,toIndex:null})}function s(){f.length&&(l.processChildrenUpdates(f,m),c())}function c(){f.length=0,m.length=0}var l=t(41),u=t(79),p=t(89),d=t(36),h=0,f=[],m=[],g={Mixin:{mountChildren:function(t,e,n){var r=d.instantiateChildren(t,e,n);this._renderedChildren=r;var o=[],a=0;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i],c=this._rootNodeID+i,l=p.mountComponent(s,c,e,n);s._mountIndex=a,o.push(l),a++}return o},updateTextContent:function(t){h++;var e=!0;try{var n=this._renderedChildren;d.unmountChildren(n);for(var r in n)n.hasOwnProperty(r)&&this._unmountChildByName(n[r],r);this.setTextContent(t),e=!1}finally{h--,h||(e?c():s())}},updateChildren:function(t,e,n){h++;var r=!0;try{this._updateChildren(t,e,n),r=!1}finally{h--,h||(r?c():s())}},_updateChildren:function(t,e,n){var r=this._renderedChildren,o=d.updateChildren(r,t,e,n);if(this._renderedChildren=o,o||r){var a,i=0,s=0;for(a in o)if(o.hasOwnProperty(a)){var c=r&&r[a],l=o[a];c===l?(this.moveChild(c,s,i),i=Math.max(c._mountIndex,i),c._mountIndex=s):(c&&(i=Math.max(c._mountIndex,i),this._unmountChildByName(c,a)),this._mountChildByNameAtIndex(l,a,s,e,n)),s++}for(a in r)!r.hasOwnProperty(a)||o&&o.hasOwnProperty(a)||this._unmountChildByName(r[a],a)}},unmountChildren:function(){var t=this._renderedChildren;d.unmountChildren(t),this._renderedChildren=null},moveChild:function(t,e,n){t._mountIndex<n&&o(this._rootNodeID,t._mountIndex,e)},createChild:function(t,e){r(this._rootNodeID,e,t._mountIndex)},removeChild:function(t){a(this._rootNodeID,t._mountIndex)},setTextContent:function(t){i(this._rootNodeID,t)},_mountChildByNameAtIndex:function(t,e,n,r,o){var a=this._rootNodeID+e,i=p.mountComponent(t,a,r,o);t._mountIndex=n,this.createChild(t,i)},_unmountChildByName:function(t,e){this.removeChild(t),t._mountIndex=null}}};e.exports=g},{36:36,41:41,79:79,89:89}],79:[function(t,e,n){"use strict";var r=t(156),o=r({INSERT_MARKUP:null,MOVE_EXISTING:null,REMOVE_NODE:null,TEXT_CONTENT:null});e.exports=o},{156:156}],80:[function(t,e,n){"use strict";function r(t){if("function"==typeof t.type)return t.type;var e=t.type,n=p[e];return null==n&&(p[e]=n=l(e)),n}function o(t){return c(u,"There is no registered component for the tag %s",t.type),new u(t.type,t.props)}function a(t){return new d(t)}function i(t){return t instanceof d}var s=t(29),c=t(150),l=null,u=null,p={},d=null,h={injectGenericComponentClass:function(t){u=t},injectTextComponentClass:function(t){d=t},injectComponentClasses:function(t){s(p,t)},injectAutoWrapper:function(t){l=t}},f={getComponentClassForElement:r,createInternalComponent:o,createInstanceForText:a,isTextComponent:i,injection:h};e.exports=f},{150:150,29:29}],81:[function(t,e,n){"use strict";var r=t(150),o={isValidOwner:function(t){return!(!t||"function"!=typeof t.attachRef||"function"!=typeof t.detachRef)},addComponentAsRefTo:function(t,e,n){r(o.isValidOwner(n),"addComponentAsRefTo(...): Only a ReactOwner can have refs. This usually means that you're trying to add a ref to a component that doesn't have an owner (that is, was not created inside of another component's `render` method). Try rendering this component inside of a new top-level component which will hold the ref."),n.attachRef(e,t)},removeComponentAsRefFrom:function(t,e,n){r(o.isValidOwner(n),"removeComponentAsRefFrom(...): Only a ReactOwner can have refs. This usually means that you're trying to remove a ref to a component that doesn't have an owner (that is, was not created inside of another component's `render` method). Try rendering this component inside of a new top-level component which will hold the ref."),n.getPublicInstance().refs[e]===t.getPublicInstance()&&n.detachRef(e)}};e.exports=o},{150:150}],82:[function(t,e,n){"use strict";function r(t,e,n){return n}var o={enableMeasure:!1,storedMeasure:r,measureMethods:function(t,e,n){for(var r in n)n.hasOwnProperty(r)&&(t[r]=o.measure(e,n[r],t[r]))},measure:function(t,e,n){var r=null,a=function(){return o.enableMeasure?(r||(r=o.storedMeasure(t,e,n)),r.apply(this,arguments)):n.apply(this,arguments)};return a.displayName=t+"_"+e,a},injection:{injectMeasure:function(t){o.storedMeasure=t}}};e.exports=o},{}],83:[function(t,e,n){"use strict";function r(t){return function(e,n,r){e.hasOwnProperty(n)?e[n]=t(e[n],r):e[n]=r}}function o(t,e){for(var n in e)if(e.hasOwnProperty(n)){var r=l[n];r&&l.hasOwnProperty(n)?r(t,n,e[n]):t.hasOwnProperty(n)||(t[n]=e[n])}return t}var a=t(29),i=t(129),s=t(155),c=r(function(t,e){return a({},e,t)}),l={children:i,className:r(s),style:c},u={mergeProps:function(t,e){return o(a({},t),e)}};e.exports=u},{129:129,155:155,29:29}],84:[function(t,e,n){"use strict";var r={};r={prop:"prop",context:"context",childContext:"child context"},e.exports=r},{}],85:[function(t,e,n){"use strict";var r=t(156),o=r({prop:null,context:null,childContext:null});e.exports=o},{156:156}],86:[function(t,e,n){"use strict";function r(t){function e(e,n,r,o,a){if(o=o||b,null==n[r]){var i=_[a];return e?new Error("Required "+i+" `"+r+"` was not specified in "+("`"+o+"`.")):null}return t(n,r,o,a)}var n=e.bind(null,!1);return n.isRequired=e.bind(null,!0),n}function o(t){function e(e,n,r,o){var a=e[n],i=m(a);if(i!==t){var s=_[o],c=g(a);return new Error("Invalid "+s+" `"+n+"` of type `"+c+"` "+("supplied to `"+r+"`, expected `"+t+"`."))}return null}return r(e)}function a(){return r(w.thatReturns(null))}function i(t){function e(e,n,r,o){var a=e[n];if(!Array.isArray(a)){var i=_[o],s=m(a);return new Error("Invalid "+i+" `"+n+"` of type "+("`"+s+"` supplied to `"+r+"`, expected an array."))}for(var c=0;c<a.length;c++){var l=t(a,c,r,o);if(l instanceof Error)return l}return null}return r(e)}function s(){function t(t,e,n,r){if(!v.isValidElement(t[e])){var o=_[r];return new Error("Invalid "+o+" `"+e+"` supplied to "+("`"+n+"`, expected a ReactElement."))}return null}return r(t)}function c(t){function e(e,n,r,o){if(!(e[n]instanceof t)){var a=_[o],i=t.name||b;return new Error("Invalid "+a+" `"+n+"` supplied to "+("`"+r+"`, expected instance of `"+i+"`."))}return null}return r(e)}function l(t){function e(e,n,r,o){for(var a=e[n],i=0;i<t.length;i++)if(a===t[i])return null;var s=_[o],c=JSON.stringify(t);return new Error("Invalid "+s+" `"+n+"` of value `"+a+"` "+("supplied to `"+r+"`, expected one of "+c+"."))}return r(e)}function u(t){function e(e,n,r,o){var a=e[n],i=m(a);if("object"!==i){var s=_[o];return new Error("Invalid "+s+" `"+n+"` of type "+("`"+i+"` supplied to `"+r+"`, expected an object."))}for(var c in a)if(a.hasOwnProperty(c)){var l=t(a,c,r,o);if(l instanceof Error)return l}return null}return r(e)}function p(t){function e(e,n,r,o){for(var a=0;a<t.length;a++){var i=t[a];if(null==i(e,n,r,o))return null}var s=_[o];return new Error("Invalid "+s+" `"+n+"` supplied to "+("`"+r+"`."))}return r(e)}function d(){function t(t,e,n,r){if(!f(t[e])){var o=_[r];return new Error("Invalid "+o+" `"+e+"` supplied to "+("`"+n+"`, expected a ReactNode."))}return null}return r(t)}function h(t){function e(e,n,r,o){var a=e[n],i=m(a);if("object"!==i){var s=_[o];return new Error("Invalid "+s+" `"+n+"` of type `"+i+"` "+("supplied to `"+r+"`, expected `object`."))}for(var c in t){var l=t[c];if(l){var u=l(a,c,r,o);if(u)return u}}return null}return r(e)}function f(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(f);if(null===t||v.isValidElement(t))return!0;t=y.extractIfFragment(t);for(var e in t)if(!f(t[e]))return!1;return!0;default:return!1}}function m(t){var e=typeof t;return Array.isArray(t)?"array":t instanceof RegExp?"object":e}function g(t){var e=m(t);if("object"===e){if(t instanceof Date)return"date";if(t instanceof RegExp)return"regexp"}return e}var v=t(63),y=t(69),_=t(84),w=t(129),b="<<anonymous>>",C=s(),E=d(),x={array:o("array"),bool:o("boolean"),func:o("function"),number:o("number"),object:o("object"),string:o("string"),any:a(),arrayOf:i,element:C,instanceOf:c,node:E,objectOf:u,oneOf:l,oneOfType:p,shape:h};e.exports=x},{129:129,63:63,69:69,84:84}],87:[function(t,e,n){"use strict";function r(){this.listenersToPut=[]}var o=t(30),a=t(33),i=t(29);i(r.prototype,{enqueuePutListener:function(t,e,n){this.listenersToPut.push({rootNodeID:t,propKey:e,propValue:n})},putListeners:function(){for(var t=0;t<this.listenersToPut.length;t++){var e=this.listenersToPut[t];a.putListener(e.rootNodeID,e.propKey,e.propValue)}},reset:function(){this.listenersToPut.length=0},destructor:function(){this.reset()}}),o.addPoolingTo(r),e.exports=r},{29:29,30:30,33:33}],88:[function(t,e,n){"use strict";function r(){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=o.getPooled(null),this.putListenerQueue=c.getPooled()}var o=t(7),a=t(30),i=t(33),s=t(71),c=t(87),l=t(116),u=t(29),p={initialize:s.getSelectionInformation,close:s.restoreSelection},d={initialize:function(){var t=i.isEnabled();return i.setEnabled(!1),t},close:function(t){i.setEnabled(t)}},h={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}},f={initialize:function(){this.putListenerQueue.reset()},close:function(){this.putListenerQueue.putListeners()}},m=[f,p,d,h],g={getTransactionWrappers:function(){return m},getReactMountReady:function(){return this.reactMountReady},getPutListenerQueue:function(){return this.putListenerQueue},destructor:function(){o.release(this.reactMountReady),this.reactMountReady=null,c.release(this.putListenerQueue),this.putListenerQueue=null}};u(r.prototype,l.Mixin,g),a.addPoolingTo(r),e.exports=r},{116:116,29:29,30:30,33:33,7:7,71:71,87:87}],89:[function(t,e,n){"use strict";function r(){o.attachRefs(this,this._currentElement)}var o=t(90),a=t(64),i={mountComponent:function(t,e,n,o){var i=t.mountComponent(e,n,o);return a.checkAndWarnForMutatedProps(t._currentElement),n.getReactMountReady().enqueue(r,t),i},unmountComponent:function(t){o.detachRefs(t,t._currentElement),t.unmountComponent()},receiveComponent:function(t,e,n,i){var s=t._currentElement;if(e!==s||null==e._owner){a.checkAndWarnForMutatedProps(e);var c=o.shouldUpdateRefs(s,e);c&&o.detachRefs(t,s),t.receiveComponent(e,n,i),c&&n.getReactMountReady().enqueue(r,t)}},performUpdateIfNecessary:function(t,e){t.performUpdateIfNecessary(e)}};e.exports=i},{64:64,90:90}],90:[function(t,e,n){"use strict";function r(t,e,n){"function"==typeof t?t(e.getPublicInstance()):a.addComponentAsRefTo(e,t,n)}function o(t,e,n){"function"==typeof t?t(null):a.removeComponentAsRefFrom(e,t,n)}var a=t(81),i={};i.attachRefs=function(t,e){var n=e.ref;null!=n&&r(n,t,e._owner)},i.shouldUpdateRefs=function(t,e){return e._owner!==t._owner||e.ref!==t.ref},i.detachRefs=function(t,e){var n=e.ref;null!=n&&o(n,t,e._owner)},e.exports=i},{81:81}],91:[function(t,e,n){"use strict";var r={injectCreateReactRootIndex:function(t){o.createReactRootIndex=t}},o={createReactRootIndex:null,injection:r};e.exports=o},{}],92:[function(t,e,n){"use strict";function r(t){p(a.isValidElement(t),"renderToString(): You must pass a valid ReactElement.");var e;try{var n=i.createReactRootID();return e=c.getPooled(!1),e.perform(function(){var r=u(t,null),o=r.mountComponent(n,e,l);return s.addChecksumToMarkup(o)},null)}finally{c.release(e)}}function o(t){p(a.isValidElement(t),"renderToStaticMarkup(): You must pass a valid ReactElement.");var e;try{var n=i.createReactRootID();return e=c.getPooled(!0),e.perform(function(){var r=u(t,null);return r.mountComponent(n,e,l)},null)}finally{c.release(e)}}var a=t(63),i=t(72),s=t(76),c=t(93),l=t(130),u=t(149),p=t(150);e.exports={renderToString:r,renderToStaticMarkup:o}},{130:130,149:149,150:150,63:63,72:72,76:76,93:93}],93:[function(t,e,n){"use strict";function r(t){this.reinitializeTransaction(),this.renderToStaticMarkup=t,this.reactMountReady=a.getPooled(null),this.putListenerQueue=i.getPooled()}var o=t(30),a=t(7),i=t(87),s=t(116),c=t(29),l=t(129),u={initialize:function(){this.reactMountReady.reset()},close:l},p={initialize:function(){this.putListenerQueue.reset()},close:l},d=[p,u],h={getTransactionWrappers:function(){return d},getReactMountReady:function(){return this.reactMountReady},getPutListenerQueue:function(){return this.putListenerQueue},destructor:function(){a.release(this.reactMountReady),this.reactMountReady=null,i.release(this.putListenerQueue),this.putListenerQueue=null}};c(r.prototype,s.Mixin,h),o.addPoolingTo(r),e.exports=r},{116:116,129:129,29:29,30:30,7:7,87:87}],94:[function(t,e,n){"use strict";function r(t,e){var n={};return function(r){n[e]=r,t.setState(n)}}var o={createStateSetter:function(t,e){return function(n,r,o,a,i,s){var c=e.call(t,n,r,o,a,i,s);c&&t.setState(c)}},createStateKeySetter:function(t,e){var n=t.__keySetters||(t.__keySetters={});return n[e]||(n[e]=r(t,e))}};o.Mixin={createStateSetter:function(t){return o.createStateSetter(this,t)},createStateKeySetter:function(t){return o.createStateKeySetter(this,t)}},e.exports=o},{}],95:[function(t,e,n){"use strict";function r(t){}function o(t){return function(e,n){var o;E.isDOMComponent(e)?o=e.getDOMNode():e.tagName&&(o=e);var a=new r;a.target=o;var i=new _(h.eventNameDispatchConfigs[t],v.getID(o),a);w(i,n),l.accumulateTwoPhaseDispatches(i),y.batchedUpdates(function(){c.enqueueEvents(i),c.processEventQueue()})}}function a(){E.Simulate={};var t;for(t in h.eventNameDispatchConfigs)E.Simulate[t]=o(t)}function i(t){return function(e,n){var o=new r(t);w(o,n),E.isDOMComponent(e)?E.simulateNativeEventOnDOMComponent(t,e,o):e.tagName&&E.simulateNativeEventOnNode(t,e,o)}}var s=t(16),c=t(18),l=t(21),u=t(31),p=t(63),d=t(65),h=t(33),f=t(43),m=t(72),g=t(73),v=t(77),y=t(100),_=t(108),w=t(29),b=t(130),C=s.topLevelTypes,E={renderIntoDocument:function(t){var e=document.createElement("div");return u.render(t,e)},isElement:function(t){return p.isValidElement(t)},isElementOfType:function(t,e){return p.isValidElement(t)&&t.type===e},isDOMComponent:function(t){return!!(t&&t.tagName&&t.getDOMNode)},isDOMComponentElement:function(t){return!!(t&&p.isValidElement(t)&&t.tagName)},isCompositeComponent:function(t){return"function"==typeof t.render&&"function"==typeof t.setState},isCompositeComponentWithType:function(t,e){return!(!E.isCompositeComponent(t)||t.constructor!==e)},isCompositeComponentElement:function(t){if(!p.isValidElement(t))return!1;var e=t.type.prototype;return"function"==typeof e.render&&"function"==typeof e.setState},isCompositeComponentElementWithType:function(t,e){return!(!E.isCompositeComponentElement(t)||t.constructor!==e)},getRenderedChildOfCompositeComponent:function(t){if(!E.isCompositeComponent(t))return null;var e=g.get(t);return e._renderedComponent.getPublicInstance()},findAllInRenderedTree:function(t,e){if(!t)return[];var n=e(t)?[t]:[];if(E.isDOMComponent(t)){var r,o=g.get(t),a=o._renderedComponent._renderedChildren;for(r in a)a.hasOwnProperty(r)&&a[r].getPublicInstance&&(n=n.concat(E.findAllInRenderedTree(a[r].getPublicInstance(),e)))}else E.isCompositeComponent(t)&&(n=n.concat(E.findAllInRenderedTree(E.getRenderedChildOfCompositeComponent(t),e)));return n},scryRenderedDOMComponentsWithClass:function(t,e){return E.findAllInRenderedTree(t,function(t){var n=t.props.className;return E.isDOMComponent(t)&&n&&-1!==(" "+n+" ").indexOf(" "+e+" ")})},findRenderedDOMComponentWithClass:function(t,e){var n=E.scryRenderedDOMComponentsWithClass(t,e);if(1!==n.length)throw new Error("Did not find exactly one match (found: "+n.length+") for class:"+e);return n[0]},scryRenderedDOMComponentsWithTag:function(t,e){return E.findAllInRenderedTree(t,function(t){return E.isDOMComponent(t)&&t.tagName===e.toUpperCase()})},findRenderedDOMComponentWithTag:function(t,e){var n=E.scryRenderedDOMComponentsWithTag(t,e);if(1!==n.length)throw new Error("Did not find exactly one match for tag:"+e);return n[0]},scryRenderedComponentsWithType:function(t,e){return E.findAllInRenderedTree(t,function(t){return E.isCompositeComponentWithType(t,e)})},findRenderedComponentWithType:function(t,e){var n=E.scryRenderedComponentsWithType(t,e);if(1!==n.length)throw new Error("Did not find exactly one match for componentType:"+e);return n[0]},mockComponent:function(t,e){return e=e||t.mockTagName||"div",t.prototype.render.mockImplementation(function(){return u.createElement(e,null,this.props.children)}),this},simulateNativeEventOnNode:function(t,e,n){n.target=e,h.ReactEventListener.dispatchEvent(t,n)},simulateNativeEventOnDOMComponent:function(t,e,n){E.simulateNativeEventOnNode(t,e.getDOMNode(),n)},nativeTouchData:function(t,e){return{touches:[{pageX:t,pageY:e}]}},createRenderer:function(){return new x},Simulate:null,SimulateNative:{}},x=function(){this._instance=null};x.prototype.getRenderOutput=function(){return this._instance&&this._instance._renderedComponent&&this._instance._renderedComponent._renderedOutput||null};var R=function(t){this._renderedOutput=t,this._currentElement=null===t||t===!1?d.emptyElement:t};R.prototype={mountComponent:function(){},receiveComponent:function(t){this._renderedOutput=t,this._currentElement=null===t||t===!1?d.emptyElement:t},unmountComponent:function(){}};var A=function(){};w(A.prototype,f.Mixin,{_instantiateReactComponent:function(t){return new R(t)},_replaceNodeWithMarkupByID:function(){},_renderValidatedComponent:f.Mixin._renderValidatedComponentWithoutOwnerOrContext}),x.prototype.render=function(t,e){e||(e=b);var n=y.ReactReconcileTransaction.getPooled();this._render(t,n,e),y.ReactReconcileTransaction.release(n)},x.prototype.unmount=function(){this._instance&&this._instance.unmountComponent()},x.prototype._render=function(t,e,n){if(this._instance)this._instance.receiveComponent(t,e,n);else{var r=m.createReactRootID(),o=new A(t.type);o.construct(t),o.mountComponent(r,e,n),this._instance=o}};var T=c.injection.injectEventPluginOrder;c.injection.injectEventPluginOrder=function(){T.apply(this,arguments),a()};var P=c.injection.injectEventPluginsByName;c.injection.injectEventPluginsByName=function(){P.apply(this,arguments),a()},a();var N;for(N in C){var S=0===N.indexOf("top")?N.charAt(3).toLowerCase()+N.substr(4):N;E.SimulateNative[S]=i(N)}e.exports=E},{100:100,108:108,130:130,16:16,18:18,21:21,29:29,31:31,33:33,43:43,63:63,65:65,72:72,73:73,77:77}],96:[function(t,e,n){"use strict";var r=t(37),o=t(69),a={getChildMapping:function(t){return t?o.extract(r.map(t,function(t){return t})):t},mergeChildMappings:function(t,e){function n(n){return e.hasOwnProperty(n)?e[n]:t[n]}t=t||{},e=e||{};var r={},o=[];for(var a in t)e.hasOwnProperty(a)?o.length&&(r[a]=o,o=[]):o.push(a);var i,s={};for(var c in e){if(r.hasOwnProperty(c))for(i=0;i<r[c].length;i++){var l=r[c][i];s[r[c][i]]=n(l)}s[c]=n(c)}for(i=0;i<o.length;i++)s[o[i]]=n(o[i]);return s}};e.exports=a},{37:37,69:69}],97:[function(t,e,n){"use strict";function r(){var t=document.createElement("div"),e=t.style;"AnimationEvent"in window||delete s.animationend.animation,"TransitionEvent"in window||delete s.transitionend.transition;for(var n in s){var r=s[n];for(var o in r)if(o in e){c.push(r[o]);break}}}function o(t,e,n){t.addEventListener(e,n,!1)}function a(t,e,n){t.removeEventListener(e,n,!1)}var i=t(22),s={transitionend:{transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd"},animationend:{animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd"}},c=[];i.canUseDOM&&r();var l={addEndEventListener:function(t,e){return 0===c.length?void window.setTimeout(e,0):void c.forEach(function(n){o(t,n,e)})},removeEndEventListener:function(t,e){0!==c.length&&c.forEach(function(n){a(t,n,e)})}};e.exports=l},{22:22}],98:[function(t,e,n){"use strict";var r=t(31),o=t(96),a=t(29),i=t(122),s=t(129),c=r.createClass({displayName:"ReactTransitionGroup",propTypes:{component:r.PropTypes.any,childFactory:r.PropTypes.func},getDefaultProps:function(){return{component:"span",childFactory:s.thatReturnsArgument}},getInitialState:function(){return{children:o.getChildMapping(this.props.children)}},componentWillMount:function(){this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[]},componentDidMount:function(){var t=this.state.children;for(var e in t)t[e]&&this.performAppear(e)},componentWillReceiveProps:function(t){var e=o.getChildMapping(t.children),n=this.state.children;this.setState({children:o.mergeChildMappings(n,e)});var r;for(r in e){var a=n&&n.hasOwnProperty(r);!e[r]||a||this.currentlyTransitioningKeys[r]||this.keysToEnter.push(r)}for(r in n){var i=e&&e.hasOwnProperty(r);!n[r]||i||this.currentlyTransitioningKeys[r]||this.keysToLeave.push(r)}},componentDidUpdate:function(){var t=this.keysToEnter;this.keysToEnter=[],t.forEach(this.performEnter);var e=this.keysToLeave;this.keysToLeave=[],e.forEach(this.performLeave)},performAppear:function(t){this.currentlyTransitioningKeys[t]=!0;var e=this.refs[t];e.componentWillAppear?e.componentWillAppear(this._handleDoneAppearing.bind(this,t)):this._handleDoneAppearing(t)},_handleDoneAppearing:function(t){var e=this.refs[t];e.componentDidAppear&&e.componentDidAppear(),delete this.currentlyTransitioningKeys[t];var n=o.getChildMapping(this.props.children);n&&n.hasOwnProperty(t)||this.performLeave(t)},performEnter:function(t){this.currentlyTransitioningKeys[t]=!0;var e=this.refs[t];e.componentWillEnter?e.componentWillEnter(this._handleDoneEntering.bind(this,t)):this._handleDoneEntering(t)},_handleDoneEntering:function(t){var e=this.refs[t];e.componentDidEnter&&e.componentDidEnter(),delete this.currentlyTransitioningKeys[t];var n=o.getChildMapping(this.props.children);n&&n.hasOwnProperty(t)||this.performLeave(t)},performLeave:function(t){this.currentlyTransitioningKeys[t]=!0;var e=this.refs[t];e.componentWillLeave?e.componentWillLeave(this._handleDoneLeaving.bind(this,t)):this._handleDoneLeaving(t)},_handleDoneLeaving:function(t){var e=this.refs[t];e.componentDidLeave&&e.componentDidLeave(),delete this.currentlyTransitioningKeys[t];
var n=o.getChildMapping(this.props.children);if(n&&n.hasOwnProperty(t))this.performEnter(t);else{var r=a({},this.state.children);delete r[t],this.setState({children:r})}},render:function(){var t=[];for(var e in this.state.children){var n=this.state.children[e];n&&t.push(i(this.props.childFactory(n),{ref:e,key:e}))}return r.createElement(this.props.component,this.props,t)}});e.exports=c},{122:122,129:129,29:29,31:31,96:96}],99:[function(t,e,n){"use strict";function r(t){t!==a.currentlyMountingInstance&&l.enqueueUpdate(t)}function o(t,e){p(null==i.current,"%s(...): Cannot update during an existing state transition (such as within `render`). Render methods should be a pure function of props and state.",e);var n=c.get(t);return n?n===a.currentlyUnmountingInstance?null:n:(d(!e,"%s(...): Can only update a mounted or mounting component. This usually means you called %s() on an unmounted component. This is a no-op.",e,e),null)}var a=t(74),i=t(45),s=t(63),c=t(73),l=t(100),u=t(29),p=t(150),d=t(171),h={enqueueCallback:function(t,e){p("function"==typeof e,"enqueueCallback(...): You called `setProps`, `replaceProps`, `setState`, `replaceState`, or `forceUpdate` with a callback that isn't callable.");var n=o(t);return n&&n!==a.currentlyMountingInstance?(n._pendingCallbacks?n._pendingCallbacks.push(e):n._pendingCallbacks=[e],void r(n)):null},enqueueCallbackInternal:function(t,e){p("function"==typeof e,"enqueueCallback(...): You called `setProps`, `replaceProps`, `setState`, `replaceState`, or `forceUpdate` with a callback that isn't callable."),t._pendingCallbacks?t._pendingCallbacks.push(e):t._pendingCallbacks=[e],r(t)},enqueueForceUpdate:function(t){var e=o(t,"forceUpdate");e&&(e._pendingForceUpdate=!0,r(e))},enqueueReplaceState:function(t,e){var n=o(t,"replaceState");n&&(n._pendingStateQueue=[e],n._pendingReplaceState=!0,r(n))},enqueueSetState:function(t,e){var n=o(t,"setState");if(n){var a=n._pendingStateQueue||(n._pendingStateQueue=[]);a.push(e),r(n)}},enqueueSetProps:function(t,e){var n=o(t,"setProps");if(n){p(n._isTopLevel,"setProps(...): You called `setProps` on a component with a parent. This is an anti-pattern since props will get reactively updated when rendered. Instead, change the owner's `render` method to pass the correct value as props to the component where it is created.");var a=n._pendingElement||n._currentElement,i=u({},a.props,e);n._pendingElement=s.cloneAndReplaceProps(a,i),r(n)}},enqueueReplaceProps:function(t,e){var n=o(t,"replaceProps");if(n){p(n._isTopLevel,"replaceProps(...): You called `replaceProps` on a component with a parent. This is an anti-pattern since props will get reactively updated when rendered. Instead, change the owner's `render` method to pass the correct value as props to the component where it is created.");var a=n._pendingElement||n._currentElement;n._pendingElement=s.cloneAndReplaceProps(a,e),r(n)}},enqueueElementInternal:function(t,e){t._pendingElement=e,r(t)}};e.exports=h},{100:100,150:150,171:171,29:29,45:45,63:63,73:73,74:74}],100:[function(t,e,n){"use strict";function r(){v(P.ReactReconcileTransaction&&C,"ReactUpdates: must inject a reconcile transaction class and batching strategy")}function o(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,this.callbackQueue=u.getPooled(),this.reconcileTransaction=P.ReactReconcileTransaction.getPooled()}function a(t,e,n,o,a){r(),C.batchedUpdates(t,e,n,o,a)}function i(t,e){return t._mountOrder-e._mountOrder}function s(t){var e=t.dirtyComponentsLength;v(e===_.length,"Expected flush transaction's stored dirty-components length (%s) to match dirty-components array length (%s).",e,_.length),_.sort(i);for(var n=0;e>n;n++){var r=_[n],o=r._pendingCallbacks;if(r._pendingCallbacks=null,f.performUpdateIfNecessary(r,t.reconcileTransaction),o)for(var a=0;a<o.length;a++)t.callbackQueue.enqueue(o[a],r.getPublicInstance())}}function c(t){return r(),y(null==d.current,"enqueueUpdate(): Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate."),C.isBatchingUpdates?void _.push(t):void C.batchedUpdates(c,t)}function l(t,e){v(C.isBatchingUpdates,"ReactUpdates.asap: Can't enqueue an asap callback in a context whereupdates are not being batched."),w.enqueue(t,e),b=!0}var u=t(7),p=t(30),d=t(45),h=t(82),f=t(89),m=t(116),g=t(29),v=t(150),y=t(171),_=[],w=u.getPooled(),b=!1,C=null,E={initialize:function(){this.dirtyComponentsLength=_.length},close:function(){this.dirtyComponentsLength!==_.length?(_.splice(0,this.dirtyComponentsLength),A()):_.length=0}},x={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}},R=[E,x];g(o.prototype,m.Mixin,{getTransactionWrappers:function(){return R},destructor:function(){this.dirtyComponentsLength=null,u.release(this.callbackQueue),this.callbackQueue=null,P.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(t,e,n){return m.Mixin.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,t,e,n)}}),p.addPoolingTo(o);var A=function(){for(;_.length||b;){if(_.length){var t=o.getPooled();t.perform(s,null,t),o.release(t)}if(b){b=!1;var e=w;w=u.getPooled(),e.notifyAll(),u.release(e)}}};A=h.measure("ReactUpdates","flushBatchedUpdates",A);var T={injectReconcileTransaction:function(t){v(t,"ReactUpdates: must provide a reconcile transaction class"),P.ReactReconcileTransaction=t},injectBatchingStrategy:function(t){v(t,"ReactUpdates: must provide a batching strategy"),v("function"==typeof t.batchedUpdates,"ReactUpdates: must provide a batchedUpdates() function"),v("boolean"==typeof t.isBatchingUpdates,"ReactUpdates: must provide an isBatchingUpdates boolean attribute"),C=t}},P={ReactReconcileTransaction:null,batchedUpdates:a,enqueueUpdate:c,flushBatchedUpdates:A,injection:T,asap:l};e.exports=P},{116:116,150:150,171:171,29:29,30:30,45:45,7:7,82:82,89:89}],101:[function(t,e,n){"use strict";var r=t(11),o=r.injection.MUST_USE_ATTRIBUTE,a={Properties:{clipPath:o,cx:o,cy:o,d:o,dx:o,dy:o,fill:o,fillOpacity:o,fontFamily:o,fontSize:o,fx:o,fy:o,gradientTransform:o,gradientUnits:o,markerEnd:o,markerMid:o,markerStart:o,offset:o,opacity:o,patternContentUnits:o,patternUnits:o,points:o,preserveAspectRatio:o,r:o,rx:o,ry:o,spreadMethod:o,stopColor:o,stopOpacity:o,stroke:o,strokeDasharray:o,strokeLinecap:o,strokeOpacity:o,strokeWidth:o,textAnchor:o,transform:o,version:o,viewBox:o,x1:o,x2:o,x:o,y1:o,y2:o,y:o},DOMAttributeNames:{clipPath:"clip-path",fillOpacity:"fill-opacity",fontFamily:"font-family",fontSize:"font-size",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",patternContentUnits:"patternContentUnits",patternUnits:"patternUnits",preserveAspectRatio:"preserveAspectRatio",spreadMethod:"spreadMethod",stopColor:"stop-color",stopOpacity:"stop-opacity",strokeDasharray:"stroke-dasharray",strokeLinecap:"stroke-linecap",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",textAnchor:"text-anchor",viewBox:"viewBox"}};e.exports=a},{11:11}],102:[function(t,e,n){"use strict";function r(t){if("selectionStart"in t&&s.hasSelectionCapabilities(t))return{start:t.selectionStart,end:t.selectionEnd};if(window.getSelection){var e=window.getSelection();return{anchorNode:e.anchorNode,anchorOffset:e.anchorOffset,focusNode:e.focusNode,focusOffset:e.focusOffset}}if(document.selection){var n=document.selection.createRange();return{parentElement:n.parentElement(),text:n.text,top:n.boundingTop,left:n.boundingLeft}}}function o(t){if(y||null==m||m!==l())return null;var e=r(m);if(!v||!d(v,e)){v=e;var n=c.getPooled(f.select,g,t);return n.type="select",n.target=m,i.accumulateTwoPhaseDispatches(n),n}}var a=t(16),i=t(21),s=t(71),c=t(108),l=t(136),u=t(153),p=t(157),d=t(166),h=a.topLevelTypes,f={select:{phasedRegistrationNames:{bubbled:p({onSelect:null}),captured:p({onSelectCapture:null})},dependencies:[h.topBlur,h.topContextMenu,h.topFocus,h.topKeyDown,h.topMouseDown,h.topMouseUp,h.topSelectionChange]}},m=null,g=null,v=null,y=!1,_={eventTypes:f,extractEvents:function(t,e,n,r){switch(t){case h.topFocus:(u(e)||"true"===e.contentEditable)&&(m=e,g=n,v=null);break;case h.topBlur:m=null,g=null,v=null;break;case h.topMouseDown:y=!0;break;case h.topContextMenu:case h.topMouseUp:return y=!1,o(r);case h.topSelectionChange:case h.topKeyDown:case h.topKeyUp:return o(r)}}};e.exports=_},{108:108,136:136,153:153,157:157,16:16,166:166,21:21,71:71}],103:[function(t,e,n){"use strict";var r=Math.pow(2,53),o={createReactRootIndex:function(){return Math.ceil(Math.random()*r)}};e.exports=o},{}],104:[function(t,e,n){"use strict";var r=t(16),o=t(20),a=t(21),i=t(105),s=t(108),c=t(109),l=t(111),u=t(112),p=t(107),d=t(113),h=t(114),f=t(115),m=t(137),g=t(150),v=t(157),y=t(171),_=r.topLevelTypes,w={blur:{phasedRegistrationNames:{bubbled:v({onBlur:!0}),captured:v({onBlurCapture:!0})}},click:{phasedRegistrationNames:{bubbled:v({onClick:!0}),captured:v({onClickCapture:!0})}},contextMenu:{phasedRegistrationNames:{bubbled:v({onContextMenu:!0}),captured:v({onContextMenuCapture:!0})}},copy:{phasedRegistrationNames:{bubbled:v({onCopy:!0}),captured:v({onCopyCapture:!0})}},cut:{phasedRegistrationNames:{bubbled:v({onCut:!0}),captured:v({onCutCapture:!0})}},doubleClick:{phasedRegistrationNames:{bubbled:v({onDoubleClick:!0}),captured:v({onDoubleClickCapture:!0})}},drag:{phasedRegistrationNames:{bubbled:v({onDrag:!0}),captured:v({onDragCapture:!0})}},dragEnd:{phasedRegistrationNames:{bubbled:v({onDragEnd:!0}),captured:v({onDragEndCapture:!0})}},dragEnter:{phasedRegistrationNames:{bubbled:v({onDragEnter:!0}),captured:v({onDragEnterCapture:!0})}},dragExit:{phasedRegistrationNames:{bubbled:v({onDragExit:!0}),captured:v({onDragExitCapture:!0})}},dragLeave:{phasedRegistrationNames:{bubbled:v({onDragLeave:!0}),captured:v({onDragLeaveCapture:!0})}},dragOver:{phasedRegistrationNames:{bubbled:v({onDragOver:!0}),captured:v({onDragOverCapture:!0})}},dragStart:{phasedRegistrationNames:{bubbled:v({onDragStart:!0}),captured:v({onDragStartCapture:!0})}},drop:{phasedRegistrationNames:{bubbled:v({onDrop:!0}),captured:v({onDropCapture:!0})}},focus:{phasedRegistrationNames:{bubbled:v({onFocus:!0}),captured:v({onFocusCapture:!0})}},input:{phasedRegistrationNames:{bubbled:v({onInput:!0}),captured:v({onInputCapture:!0})}},keyDown:{phasedRegistrationNames:{bubbled:v({onKeyDown:!0}),captured:v({onKeyDownCapture:!0})}},keyPress:{phasedRegistrationNames:{bubbled:v({onKeyPress:!0}),captured:v({onKeyPressCapture:!0})}},keyUp:{phasedRegistrationNames:{bubbled:v({onKeyUp:!0}),captured:v({onKeyUpCapture:!0})}},load:{phasedRegistrationNames:{bubbled:v({onLoad:!0}),captured:v({onLoadCapture:!0})}},error:{phasedRegistrationNames:{bubbled:v({onError:!0}),captured:v({onErrorCapture:!0})}},mouseDown:{phasedRegistrationNames:{bubbled:v({onMouseDown:!0}),captured:v({onMouseDownCapture:!0})}},mouseMove:{phasedRegistrationNames:{bubbled:v({onMouseMove:!0}),captured:v({onMouseMoveCapture:!0})}},mouseOut:{phasedRegistrationNames:{bubbled:v({onMouseOut:!0}),captured:v({onMouseOutCapture:!0})}},mouseOver:{phasedRegistrationNames:{bubbled:v({onMouseOver:!0}),captured:v({onMouseOverCapture:!0})}},mouseUp:{phasedRegistrationNames:{bubbled:v({onMouseUp:!0}),captured:v({onMouseUpCapture:!0})}},paste:{phasedRegistrationNames:{bubbled:v({onPaste:!0}),captured:v({onPasteCapture:!0})}},reset:{phasedRegistrationNames:{bubbled:v({onReset:!0}),captured:v({onResetCapture:!0})}},scroll:{phasedRegistrationNames:{bubbled:v({onScroll:!0}),captured:v({onScrollCapture:!0})}},submit:{phasedRegistrationNames:{bubbled:v({onSubmit:!0}),captured:v({onSubmitCapture:!0})}},touchCancel:{phasedRegistrationNames:{bubbled:v({onTouchCancel:!0}),captured:v({onTouchCancelCapture:!0})}},touchEnd:{phasedRegistrationNames:{bubbled:v({onTouchEnd:!0}),captured:v({onTouchEndCapture:!0})}},touchMove:{phasedRegistrationNames:{bubbled:v({onTouchMove:!0}),captured:v({onTouchMoveCapture:!0})}},touchStart:{phasedRegistrationNames:{bubbled:v({onTouchStart:!0}),captured:v({onTouchStartCapture:!0})}},wheel:{phasedRegistrationNames:{bubbled:v({onWheel:!0}),captured:v({onWheelCapture:!0})}}},b={topBlur:w.blur,topClick:w.click,topContextMenu:w.contextMenu,topCopy:w.copy,topCut:w.cut,topDoubleClick:w.doubleClick,topDrag:w.drag,topDragEnd:w.dragEnd,topDragEnter:w.dragEnter,topDragExit:w.dragExit,topDragLeave:w.dragLeave,topDragOver:w.dragOver,topDragStart:w.dragStart,topDrop:w.drop,topError:w.error,topFocus:w.focus,topInput:w.input,topKeyDown:w.keyDown,topKeyPress:w.keyPress,topKeyUp:w.keyUp,topLoad:w.load,topMouseDown:w.mouseDown,topMouseMove:w.mouseMove,topMouseOut:w.mouseOut,topMouseOver:w.mouseOver,topMouseUp:w.mouseUp,topPaste:w.paste,topReset:w.reset,topScroll:w.scroll,topSubmit:w.submit,topTouchCancel:w.touchCancel,topTouchEnd:w.touchEnd,topTouchMove:w.touchMove,topTouchStart:w.touchStart,topWheel:w.wheel};for(var C in b)b[C].dependencies=[C];var E={eventTypes:w,executeDispatch:function(t,e,n){var r=o.executeDispatch(t,e,n);y("boolean"!=typeof r,"Returning `false` from an event handler is deprecated and will be ignored in a future release. Instead, manually call e.stopPropagation() or e.preventDefault(), as appropriate."),r===!1&&(t.stopPropagation(),t.preventDefault())},extractEvents:function(t,e,n,r){var o=b[t];if(!o)return null;var v;switch(t){case _.topInput:case _.topLoad:case _.topError:case _.topReset:case _.topSubmit:v=s;break;case _.topKeyPress:if(0===m(r))return null;case _.topKeyDown:case _.topKeyUp:v=l;break;case _.topBlur:case _.topFocus:v=c;break;case _.topClick:if(2===r.button)return null;case _.topContextMenu:case _.topDoubleClick:case _.topMouseDown:case _.topMouseMove:case _.topMouseOut:case _.topMouseOver:case _.topMouseUp:v=u;break;case _.topDrag:case _.topDragEnd:case _.topDragEnter:case _.topDragExit:case _.topDragLeave:case _.topDragOver:case _.topDragStart:case _.topDrop:v=p;break;case _.topTouchCancel:case _.topTouchEnd:case _.topTouchMove:case _.topTouchStart:v=d;break;case _.topScroll:v=h;break;case _.topWheel:v=f;break;case _.topCopy:case _.topCut:case _.topPaste:v=i}g(v,"SimpleEventPlugin: Unhandled event type, `%s`.",t);var y=v.getPooled(o,n,r);return a.accumulateTwoPhaseDispatches(y),y}};e.exports=E},{105:105,107:107,108:108,109:109,111:111,112:112,113:113,114:114,115:115,137:137,150:150,157:157,16:16,171:171,20:20,21:21}],105:[function(t,e,n){"use strict";function r(t,e,n){o.call(this,t,e,n)}var o=t(108),a={clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}};o.augmentClass(r,a),e.exports=r},{108:108}],106:[function(t,e,n){"use strict";function r(t,e,n){o.call(this,t,e,n)}var o=t(108),a={data:null};o.augmentClass(r,a),e.exports=r},{108:108}],107:[function(t,e,n){"use strict";function r(t,e,n){o.call(this,t,e,n)}var o=t(112),a={dataTransfer:null};o.augmentClass(r,a),e.exports=r},{112:112}],108:[function(t,e,n){"use strict";function r(t,e,n){this.dispatchConfig=t,this.dispatchMarker=e,this.nativeEvent=n;var r=this.constructor.Interface;for(var o in r)if(r.hasOwnProperty(o)){var a=r[o];a?this[o]=a(n):this[o]=n[o]}var s=null!=n.defaultPrevented?n.defaultPrevented:n.returnValue===!1;s?this.isDefaultPrevented=i.thatReturnsTrue:this.isDefaultPrevented=i.thatReturnsFalse,this.isPropagationStopped=i.thatReturnsFalse}var o=t(30),a=t(29),i=t(129),s=t(140),c={type:null,target:s,currentTarget:i.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};a(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t.preventDefault?t.preventDefault():t.returnValue=!1,this.isDefaultPrevented=i.thatReturnsTrue},stopPropagation:function(){var t=this.nativeEvent;t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,this.isPropagationStopped=i.thatReturnsTrue},persist:function(){this.isPersistent=i.thatReturnsTrue},isPersistent:i.thatReturnsFalse,destructor:function(){var t=this.constructor.Interface;for(var e in t)this[e]=null;this.dispatchConfig=null,this.dispatchMarker=null,this.nativeEvent=null}}),r.Interface=c,r.augmentClass=function(t,e){var n=this,r=Object.create(n.prototype);a(r,t.prototype),t.prototype=r,t.prototype.constructor=t,t.Interface=a({},n.Interface,e),t.augmentClass=n.augmentClass,o.addPoolingTo(t,o.threeArgumentPooler)},o.addPoolingTo(r,o.threeArgumentPooler),e.exports=r},{129:129,140:140,29:29,30:30}],109:[function(t,e,n){"use strict";function r(t,e,n){o.call(this,t,e,n)}var o=t(114),a={relatedTarget:null};o.augmentClass(r,a),e.exports=r},{114:114}],110:[function(t,e,n){"use strict";function r(t,e,n){o.call(this,t,e,n)}var o=t(108),a={data:null};o.augmentClass(r,a),e.exports=r},{108:108}],111:[function(t,e,n){"use strict";function r(t,e,n){o.call(this,t,e,n)}var o=t(114),a=t(137),i=t(138),s=t(139),c={key:i,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:s,charCode:function(t){return"keypress"===t.type?a(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?a(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}};o.augmentClass(r,c),e.exports=r},{114:114,137:137,138:138,139:139}],112:[function(t,e,n){"use strict";function r(t,e,n){o.call(this,t,e,n)}var o=t(114),a=t(117),i=t(139),s={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:i,button:function(t){var e=t.button;return"which"in t?e:2===e?2:4===e?1:0},buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)},pageX:function(t){return"pageX"in t?t.pageX:t.clientX+a.currentScrollLeft},pageY:function(t){return"pageY"in t?t.pageY:t.clientY+a.currentScrollTop}};o.augmentClass(r,s),e.exports=r},{114:114,117:117,139:139}],113:[function(t,e,n){"use strict";function r(t,e,n){o.call(this,t,e,n)}var o=t(114),a=t(139),i={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:a};o.augmentClass(r,i),e.exports=r},{114:114,139:139}],114:[function(t,e,n){"use strict";function r(t,e,n){o.call(this,t,e,n)}var o=t(108),a=t(140),i={view:function(t){if(t.view)return t.view;var e=a(t);if(null!=e&&e.window===e)return e;var n=e.ownerDocument;return n?n.defaultView||n.parentWindow:window},detail:function(t){return t.detail||0}};o.augmentClass(r,i),e.exports=r},{108:108,140:140}],115:[function(t,e,n){"use strict";function r(t,e,n){o.call(this,t,e,n)}var o=t(112),a={deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null};o.augmentClass(r,a),e.exports=r},{112:112}],116:[function(t,e,n){"use strict";var r=t(150),o={reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(t,e,n,o,a,i,s,c){r(!this.isInTransaction(),"Transaction.perform(...): Cannot initialize a transaction when there is already an outstanding transaction.");var l,u;try{this._isInTransaction=!0,l=!0,this.initializeAll(0),u=t.call(e,n,o,a,i,s,c),l=!1}finally{try{if(l)try{this.closeAll(0)}catch(p){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return u},initializeAll:function(t){for(var e=this.transactionWrappers,n=t;n<e.length;n++){var r=e[n];try{this.wrapperInitData[n]=a.OBSERVED_ERROR,this.wrapperInitData[n]=r.initialize?r.initialize.call(this):null}finally{if(this.wrapperInitData[n]===a.OBSERVED_ERROR)try{this.initializeAll(n+1)}catch(o){}}}},closeAll:function(t){r(this.isInTransaction(),"Transaction.closeAll(): Cannot close transaction when none are open.");for(var e=this.transactionWrappers,n=t;n<e.length;n++){var o,i=e[n],s=this.wrapperInitData[n];try{o=!0,s!==a.OBSERVED_ERROR&&i.close&&i.close.call(this,s),o=!1}finally{if(o)try{this.closeAll(n+1)}catch(c){}}}this.wrapperInitData.length=0}},a={Mixin:o,OBSERVED_ERROR:{}};e.exports=a},{150:150}],117:[function(t,e,n){"use strict";var r={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(t){r.currentScrollLeft=t.x,r.currentScrollTop=t.y}};e.exports=r},{}],118:[function(t,e,n){"use strict";function r(t,e){if(o(null!=e,"accumulateInto(...): Accumulated items must not be null or undefined."),null==t)return e;var n=Array.isArray(t),r=Array.isArray(e);return n&&r?(t.push.apply(t,e),t):n?(t.push(e),t):r?[t].concat(e):[t,e]}var o=t(150);e.exports=r},{150:150}],119:[function(t,e,n){"use strict";function r(t){for(var e=1,n=0,r=0;r<t.length;r++)e=(e+t.charCodeAt(r))%o,n=(n+e)%o;return e|n<<16}var o=65521;e.exports=r},{}],120:[function(t,e,n){function r(t){return t.replace(o,function(t,e){return e.toUpperCase()})}var o=/-(.)/g;e.exports=r},{}],121:[function(t,e,n){"use strict";function r(t){return o(t.replace(a,"ms-"))}var o=t(120),a=/^-ms-/;e.exports=r},{120:120}],122:[function(t,e,n){"use strict";function r(t,e){s(!t.ref,"You are calling cloneWithProps() on a child with a ref. This is dangerous because you're creating a new child which will not be added as a ref to its parent.");var n=a.mergeProps(e,t.props);return!n.hasOwnProperty(c)&&t.props.hasOwnProperty(c)&&(n.children=t.props.children),o.createElement(t.type,n)}var o=t(63),a=t(83),i=t(157),s=t(171),c=i({children:null});e.exports=r},{157:157,171:171,63:63,83:83}],123:[function(t,e,n){function r(t,e){return t&&e?t===e?!0:o(t)?!1:o(e)?r(t,e.parentNode):t.contains?t.contains(e):t.compareDocumentPosition?!!(16&t.compareDocumentPosition(e)):!1:!1}var o=t(154);e.exports=r},{154:154}],124:[function(t,e,n){function r(t){return!!t&&("object"==typeof t||"function"==typeof t)&&"length"in t&&!("setInterval"in t)&&"number"!=typeof t.nodeType&&(Array.isArray(t)||"callee"in t||"item"in t)}function o(t){return r(t)?Array.isArray(t)?t.slice():a(t):[t]}var a=t(168);e.exports=o},{168:168}],125:[function(t,e,n){"use strict";function r(t){var e=a.createFactory(t),n=o.createClass({tagName:t.toUpperCase(),displayName:"ReactFullPageComponent"+t,componentWillUnmount:function(){i(!1,"%s tried to unmount. Because of cross-browser quirks it is impossible to unmount some top-level components (eg <html>, <head>, and <body>) reliably and efficiently. To fix this, have a single top-level component that never unmounts render these elements.",this.constructor.displayName)},render:function(){return e(this.props)}});return n}var o=t(38),a=t(63),i=t(150);e.exports=r},{150:150,38:38,63:63}],126:[function(t,e,n){function r(t){var e=t.match(u);return e&&e[1].toLowerCase()}function o(t,e){var n=l;c(!!l,"createNodesFromMarkup dummy not initialized");var o=r(t),a=o&&s(o);if(a){n.innerHTML=a[1]+t+a[2];for(var u=a[0];u--;)n=n.lastChild}else n.innerHTML=t;var p=n.getElementsByTagName("script");p.length&&(c(e,"createNodesFromMarkup(...): Unexpected <script> element rendered."),i(p).forEach(e));for(var d=i(n.childNodes);n.lastChild;)n.removeChild(n.lastChild);return d}var a=t(22),i=t(124),s=t(142),c=t(150),l=a.canUseDOM?document.createElement("div"):null,u=/^\s*<(\w+)/;e.exports=o},{124:124,142:142,150:150,22:22}],127:[function(t,e,n){"use strict";function r(t){return o(a,"React.addons.classSet will be deprecated in a future version. See http://fb.me/react-addons-classset"),a=!0,"object"==typeof t?Object.keys(t).filter(function(e){return t[e]}).join(" "):Array.prototype.join.call(arguments," ")}var o=t(171),a=!1;e.exports=r},{171:171}],128:[function(t,e,n){"use strict";function r(t,e){var n=null==e||"boolean"==typeof e||""===e;if(n)return"";var r=isNaN(e);return r||0===e||a.hasOwnProperty(t)&&a[t]?""+e:("string"==typeof e&&(e=e.trim()),e+"px")}var o=t(5),a=o.isUnitlessNumber;e.exports=r},{5:5}],129:[function(t,e,n){function r(t){return function(){return t}}function o(){}o.thatReturns=r,o.thatReturnsFalse=r(!1),o.thatReturnsTrue=r(!0),o.thatReturnsNull=r(null),o.thatReturnsThis=function(){return this},o.thatReturnsArgument=function(t){return t},e.exports=o},{}],130:[function(t,e,n){"use strict";var r={};Object.freeze(r),e.exports=r},{}],131:[function(t,e,n){"use strict";function r(t){return a[t]}function o(t){return(""+t).replace(i,r)}var a={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},i=/[&><"']/g;e.exports=o},{}],132:[function(t,e,n){"use strict";function r(t){var e=o.current;return null!==e&&(l(e._warnedAboutRefsInRender,"%s is accessing getDOMNode or findDOMNode inside its render(). render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",e.getName()||"A component"),e._warnedAboutRefsInRender=!0),null==t?null:c(t)?t:a.has(t)?i.getNodeFromInstance(t):(s(null==t.render||"function"!=typeof t.render,"Component (with keys: %s) contains `render` method but is not mounted in the DOM",Object.keys(t)),void s(!1,"Element appears to be neither ReactComponent nor DOMNode (keys: %s)",Object.keys(t)))}var o=t(45),a=t(73),i=t(77),s=t(150),c=t(152),l=t(171);e.exports=r},{150:150,152:152,171:171,45:45,73:73,77:77}],133:[function(t,e,n){"use strict";function r(t,e,n){var r=t,o=!r.hasOwnProperty(n);i(o,"flattenChildren(...): Encountered two children with the same key, `%s`. Child keys must be unique; when two children share a key, only the first child will be used.",n),o&&null!=e&&(r[n]=e)}function o(t){if(null==t)return t;var e={};return a(t,r,e),e}var a=t(169),i=t(171);e.exports=o},{169:169,171:171}],134:[function(t,e,n){"use strict";function r(t){try{t.focus()}catch(e){}}e.exports=r},{}],135:[function(t,e,n){"use strict";var r=function(t,e,n){Array.isArray(t)?t.forEach(e,n):t&&e.call(n,t)};e.exports=r},{}],136:[function(t,e,n){function r(){try{return document.activeElement||document.body}catch(t){return document.body}}e.exports=r},{}],137:[function(t,e,n){"use strict";function r(t){var e,n=t.keyCode;return"charCode"in t?(e=t.charCode,0===e&&13===n&&(e=13)):e=n,e>=32||13===e?e:0}e.exports=r},{}],138:[function(t,e,n){"use strict";function r(t){if(t.key){var e=a[t.key]||t.key;if("Unidentified"!==e)return e}if("keypress"===t.type){var n=o(t);return 13===n?"Enter":String.fromCharCode(n)}return"keydown"===t.type||"keyup"===t.type?i[t.keyCode]||"Unidentified":""}var o=t(137),a={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},i={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};e.exports=r},{137:137}],139:[function(t,e,n){"use strict";function r(t){var e=this,n=e.nativeEvent;if(n.getModifierState)return n.getModifierState(t);var r=a[t];return r?!!n[r]:!1}function o(t){return r}var a={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};e.exports=o},{}],140:[function(t,e,n){"use strict";function r(t){var e=t.target||t.srcElement||window;return 3===e.nodeType?e.parentNode:e}e.exports=r},{}],141:[function(t,e,n){"use strict";function r(t){var e=t&&(o&&t[o]||t[a]);return"function"==typeof e?e:void 0}var o="function"==typeof Symbol&&Symbol.iterator,a="@@iterator";e.exports=r},{}],142:[function(t,e,n){function r(t){return a(!!i,"Markup wrapping node not initialized"),d.hasOwnProperty(t)||(t="*"),s.hasOwnProperty(t)||("*"===t?i.innerHTML="<link />":i.innerHTML="<"+t+"></"+t+">",s[t]=!i.firstChild),s[t]?d[t]:null}var o=t(22),a=t(150),i=o.canUseDOM?document.createElement("div"):null,s={circle:!0,clipPath:!0,defs:!0,ellipse:!0,g:!0,line:!0,linearGradient:!0,path:!0,polygon:!0,polyline:!0,radialGradient:!0,rect:!0,stop:!0,text:!0},c=[1,'<select multiple="true">',"</select>"],l=[1,"<table>","</table>"],u=[3,"<table><tbody><tr>","</tr></tbody></table>"],p=[1,"<svg>","</svg>"],d={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:c,option:c,caption:l,colgroup:l,tbody:l,tfoot:l,thead:l,td:u,th:u,circle:p,clipPath:p,defs:p,ellipse:p,g:p,line:p,linearGradient:p,path:p,polygon:p,polyline:p,radialGradient:p,rect:p,stop:p,text:p};e.exports=r},{150:150,22:22}],143:[function(t,e,n){"use strict";function r(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function o(t){for(;t;){if(t.nextSibling)return t.nextSibling;t=t.parentNode}}function a(t,e){for(var n=r(t),a=0,i=0;n;){if(3===n.nodeType){if(i=a+n.textContent.length,e>=a&&i>=e)return{node:n,offset:e-a};a=i}n=r(o(n))}}e.exports=a},{}],144:[function(t,e,n){"use strict";function r(t){return t?t.nodeType===o?t.documentElement:t.firstChild:null}var o=9;e.exports=r},{}],145:[function(t,e,n){"use strict";function r(){return!a&&o.canUseDOM&&(a="textContent"in document.documentElement?"textContent":"innerText"),a}var o=t(22),a=null;e.exports=r},{22:22}],146:[function(t,e,n){"use strict";function r(t){return t===window?{x:window.pageXOffset||document.documentElement.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop}:{x:t.scrollLeft,y:t.scrollTop}}e.exports=r},{}],147:[function(t,e,n){function r(t){return t.replace(o,"-$1").toLowerCase()}var o=/([A-Z])/g;e.exports=r},{}],148:[function(t,e,n){"use strict";function r(t){return o(t).replace(a,"-ms-")}var o=t(147),a=/^ms-/;e.exports=r},{147:147}],149:[function(t,e,n){"use strict";function r(t){return"function"==typeof t&&"undefined"!=typeof t.prototype&&"function"==typeof t.prototype.mountComponent&&"function"==typeof t.prototype.receiveComponent}function o(t,e){var n;if((null===t||t===!1)&&(t=i.emptyElement),"object"==typeof t){var o=t;u(o&&("function"==typeof o.type||"string"==typeof o.type),"Only functions or strings can be mounted as React components."),n=e===o.type&&"string"==typeof o.type?s.createInternalComponent(o):r(o.type)?new o.type(o):new p}else"string"==typeof t||"number"==typeof t?n=s.createInstanceForText(t):l(!1,"Encountered invalid React node of type %s",typeof t);return u("function"==typeof n.construct&&"function"==typeof n.mountComponent&&"function"==typeof n.receiveComponent&&"function"==typeof n.unmountComponent,"Only React Components can be mounted."),n.construct(t),n._mountIndex=0,n._mountImage=null,n._isOwnerNecessary=!1,n._warnedAboutRefsInRender=!1,Object.preventExtensions&&Object.preventExtensions(n),n}var a=t(43),i=t(65),s=t(80),c=t(29),l=t(150),u=t(171),p=function(){};c(p.prototype,a.Mixin,{_instantiateReactComponent:o}),e.exports=o},{150:150,171:171,29:29,43:43,65:65,80:80}],150:[function(t,e,n){"use strict";var r=function(t,e,n,r,o,a,i,s){if(void 0===e)throw new Error("invariant requires an error message argument");if(!t){var c;if(void 0===e)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,o,a,i,s],u=0;c=new Error("Invariant Violation: "+e.replace(/%s/g,function(){return l[u++]}))}throw c.framesToPop=1,c}};e.exports=r},{}],151:[function(t,e,n){"use strict";function r(t,e){if(!a.canUseDOM||e&&!("addEventListener"in document))return!1;var n="on"+t,r=n in document;if(!r){var i=document.createElement("div");i.setAttribute(n,"return;"),r="function"==typeof i[n]}return!r&&o&&"wheel"===t&&(r=document.implementation.hasFeature("Events.wheel","3.0")),
r}var o,a=t(22);a.canUseDOM&&(o=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0),e.exports=r},{22:22}],152:[function(t,e,n){function r(t){return!(!t||!("function"==typeof Node?t instanceof Node:"object"==typeof t&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName))}e.exports=r},{}],153:[function(t,e,n){"use strict";function r(t){return t&&("INPUT"===t.nodeName&&o[t.type]||"TEXTAREA"===t.nodeName)}var o={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};e.exports=r},{}],154:[function(t,e,n){function r(t){return o(t)&&3==t.nodeType}var o=t(152);e.exports=r},{152:152}],155:[function(t,e,n){"use strict";function r(t){t||(t="");var e,n=arguments.length;if(n>1)for(var r=1;n>r;r++)e=arguments[r],e&&(t=(t?t+" ":"")+e);return t}e.exports=r},{}],156:[function(t,e,n){"use strict";var r=t(150),o=function(t){var e,n={};r(t instanceof Object&&!Array.isArray(t),"keyMirror(...): Argument must be an object.");for(e in t)t.hasOwnProperty(e)&&(n[e]=e);return n};e.exports=o},{150:150}],157:[function(t,e,n){var r=function(t){var e;for(e in t)if(t.hasOwnProperty(e))return e;return null};e.exports=r},{}],158:[function(t,e,n){"use strict";function r(t,e,n){if(!t)return null;var r={};for(var a in t)o.call(t,a)&&(r[a]=e.call(n,t[a],a,t));return r}var o=Object.prototype.hasOwnProperty;e.exports=r},{}],159:[function(t,e,n){"use strict";function r(t){var e={};return function(n){return e.hasOwnProperty(n)||(e[n]=t.call(this,n)),e[n]}}e.exports=r},{}],160:[function(t,e,n){"use strict";function r(t){return a(o.isValidElement(t),"onlyChild must be passed a children with exactly one child."),t}var o=t(63),a=t(150);e.exports=r},{150:150,63:63}],161:[function(t,e,n){"use strict";var r,o=t(22);o.canUseDOM&&(r=window.performance||window.msPerformance||window.webkitPerformance),e.exports=r||{}},{22:22}],162:[function(t,e,n){var r=t(161);r&&r.now||(r=Date);var o=r.now.bind(r);e.exports=o},{161:161}],163:[function(t,e,n){"use strict";function r(t){return'"'+o(t)+'"'}var o=t(131);e.exports=r},{131:131}],164:[function(t,e,n){"use strict";var r=t(22),o=/^[ \r\n\t\f]/,a=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,i=function(t,e){t.innerHTML=e};if("undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction&&(i=function(t,e){MSApp.execUnsafeLocalFunction(function(){t.innerHTML=e})}),r.canUseDOM){var s=document.createElement("div");s.innerHTML=" ",""===s.innerHTML&&(i=function(t,e){if(t.parentNode&&t.parentNode.replaceChild(t,t),o.test(e)||"<"===e[0]&&a.test(e)){t.innerHTML="\ufeff"+e;var n=t.firstChild;1===n.data.length?t.removeChild(n):n.deleteData(0,1)}else t.innerHTML=e})}e.exports=i},{22:22}],165:[function(t,e,n){"use strict";var r=t(22),o=t(131),a=t(164),i=function(t,e){t.textContent=e};r.canUseDOM&&("textContent"in document.documentElement||(i=function(t,e){a(t,o(e))})),e.exports=i},{131:131,164:164,22:22}],166:[function(t,e,n){"use strict";function r(t,e){if(t===e)return!0;var n;for(n in t)if(t.hasOwnProperty(n)&&(!e.hasOwnProperty(n)||t[n]!==e[n]))return!1;for(n in e)if(e.hasOwnProperty(n)&&!t.hasOwnProperty(n))return!1;return!0}e.exports=r},{}],167:[function(t,e,n){"use strict";function r(t,e){if(null!=t&&null!=e){var n=typeof t,r=typeof e;if("string"===n||"number"===n)return"string"===r||"number"===r;if("object"===r&&t.type===e.type&&t.key===e.key){var a=t._owner===e._owner,i=null,s=null,c=null;return a||(null!=t._owner&&null!=t._owner.getPublicInstance()&&null!=t._owner.getPublicInstance().constructor&&(i=t._owner.getPublicInstance().constructor.displayName),null!=e._owner&&null!=e._owner.getPublicInstance()&&null!=e._owner.getPublicInstance().constructor&&(s=e._owner.getPublicInstance().constructor.displayName),null!=e.type&&null!=e.type.displayName&&(c=e.type.displayName),null!=e.type&&"string"==typeof e.type&&(c=e.type),("string"!=typeof e.type||"input"===e.type||"textarea"===e.type)&&(null!=t._owner&&t._owner._isOwnerNecessary===!1||null!=e._owner&&e._owner._isOwnerNecessary===!1)&&(null!=t._owner&&(t._owner._isOwnerNecessary=!0),null!=e._owner&&(e._owner._isOwnerNecessary=!0),o(!1,"<%s /> is being rendered by both %s and %s using the same key (%s) in the same place. Currently, this means that they don't preserve state. This behavior should be very rare so we're considering deprecating it. Please contact the React team and explain your use case so that we can take that into consideration.",c||"Unknown Component",i||"[Unknown]",s||"[Unknown]",t.key))),a}}return!1}var o=t(171);e.exports=r},{171:171}],168:[function(t,e,n){function r(t){var e=t.length;if(o(!Array.isArray(t)&&("object"==typeof t||"function"==typeof t),"toArray: Array-like object expected"),o("number"==typeof e,"toArray: Object needs a length property"),o(0===e||e-1 in t,"toArray: Object should have keys for indices"),t.hasOwnProperty)try{return Array.prototype.slice.call(t)}catch(n){}for(var r=Array(e),a=0;e>a;a++)r[a]=t[a];return r}var o=t(150);e.exports=r},{150:150}],169:[function(t,e,n){"use strict";function r(t){return v[t]}function o(t,e){return t&&null!=t.key?i(t.key):e.toString(36)}function a(t){return(""+t).replace(y,r)}function i(t){return"$"+a(t)}function s(t,e,n,r,a){var c=typeof t;if(("undefined"===c||"boolean"===c)&&(t=null),null===t||"string"===c||"number"===c||l.isValidElement(t))return r(a,t,""===e?m+o(t,0):e,n),1;var p,v,y,w=0;if(Array.isArray(t))for(var b=0;b<t.length;b++)p=t[b],v=(""!==e?e+g:m)+o(p,b),y=n+w,w+=s(p,v,y,r,a);else{var C=d(t);if(C){var E,x=C.call(t);if(C!==t.entries)for(var R=0;!(E=x.next()).done;)p=E.value,v=(""!==e?e+g:m)+o(p,R++),y=n+w,w+=s(p,v,y,r,a);else for(f(_,"Using Maps as children is not yet fully supported. It is an experimental feature that might be removed. Convert it to a sequence / iterable of keyed ReactElements instead."),_=!0;!(E=x.next()).done;){var A=E.value;A&&(p=A[1],v=(""!==e?e+g:m)+i(A[0])+g+o(p,0),y=n+w,w+=s(p,v,y,r,a))}}else if("object"===c){h(1!==t.nodeType,"traverseAllChildren(...): Encountered an invalid child; DOM elements are not valid children of React components.");var T=u.extract(t);for(var P in T)T.hasOwnProperty(P)&&(p=T[P],v=(""!==e?e+g:m)+i(P)+g+o(p,0),y=n+w,w+=s(p,v,y,r,a))}}return w}function c(t,e,n){return null==t?0:s(t,"",0,e,n)}var l=t(63),u=t(69),p=t(72),d=t(141),h=t(150),f=t(171),m=p.SEPARATOR,g=":",v={"=":"=0",".":"=1",":":"=2"},y=/[=.:]/g,_=!1;e.exports=c},{141:141,150:150,171:171,63:63,69:69,72:72}],170:[function(t,e,n){"use strict";function r(t){return Array.isArray(t)?t.concat():t&&"object"==typeof t?i(new t.constructor,t):t}function o(t,e,n){c(Array.isArray(t),"update(): expected target of %s to be an array; got %s.",n,t);var r=e[n];c(Array.isArray(r),"update(): expected spec of %s to be an array; got %s. Did you forget to wrap your parameter in an array?",n,r)}function a(t,e){if(c("object"==typeof e,"update(): You provided a key path to update() that did not contain one of %s. Did you forget to include {%s: ...}?",g.join(", "),h),l.call(e,h))return c(1===Object.keys(e).length,"Cannot have more than one key in an object with %s",h),e[h];var n=r(t);if(l.call(e,f)){var s=e[f];c(s&&"object"==typeof s,"update(): %s expects a spec of type 'object'; got %s",f,s),c(n&&"object"==typeof n,"update(): %s expects a target of type 'object'; got %s",f,n),i(n,e[f])}l.call(e,u)&&(o(t,e,u),e[u].forEach(function(t){n.push(t)})),l.call(e,p)&&(o(t,e,p),e[p].forEach(function(t){n.unshift(t)})),l.call(e,d)&&(c(Array.isArray(t),"Expected %s target to be an array; got %s",d,t),c(Array.isArray(e[d]),"update(): expected spec of %s to be an array of arrays; got %s. Did you forget to wrap your parameters in an array?",d,e[d]),e[d].forEach(function(t){c(Array.isArray(t),"update(): expected spec of %s to be an array of arrays; got %s. Did you forget to wrap your parameters in an array?",d,e[d]),n.splice.apply(n,t)})),l.call(e,m)&&(c("function"==typeof e[m],"update(): expected spec of %s to be a function; got %s.",m,e[m]),n=e[m](n));for(var y in e)v.hasOwnProperty(y)&&v[y]||(n[y]=a(t[y],e[y]));return n}var i=t(29),s=t(157),c=t(150),l={}.hasOwnProperty,u=s({$push:null}),p=s({$unshift:null}),d=s({$splice:null}),h=s({$set:null}),f=s({$merge:null}),m=s({$apply:null}),g=[u,p,d,h,f,m],v={};g.forEach(function(t){v[t]=!0}),e.exports=a},{150:150,157:157,29:29}],171:[function(t,e,n){"use strict";var r=t(129),o=r;o=function(t,e){for(var n=[],r=2,o=arguments.length;o>r;r++)n.push(arguments[r]);if(void 0===e)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(e.length<10||/^[s\W]*$/.test(e))throw new Error("The warning format should be able to uniquely identify this warning. Please, use a more descriptive format than: "+e);if(0!==e.indexOf("Failed Composite propType: ")&&!t){var a=0,i="Warning: "+e.replace(/%s/g,function(){return n[a++]});console.warn(i);try{throw new Error(i)}catch(s){}}},e.exports=o},{129:129}]},{},[1])(1)});var POSITIONS={above:"above",inside:"inside",below:"below"},Waypoint=React.createClass({displayName:"Waypoint",propTypes:{onEnter:React.PropTypes.func,onLeave:React.PropTypes.func,threshold:React.PropTypes.number},getDefaultProps:function(){return{threshold:0,onEnter:function(){},onLeave:function(){}}},componentDidMount:function(){this.scrollableAncestor=this._findScrollableAncestor(),this.scrollableAncestor.addEventListener("scroll",this._handleScroll),window.addEventListener("resize",this._handleScroll),this._handleScroll()},componentDidUpdate:function(){this._handleScroll()},componentWillUnmount:function(){this.scrollableAncestor&&this.scrollableAncestor.removeEventListener("scroll",this._handleScroll),window.removeEventListener("resize",this._handleScroll)},_findScrollableAncestor:function(){for(var t=React.findDOMNode(this);t.parentNode;)if(t=t.parentNode,t!==document){var e=window.getComputedStyle(t),n=e.getPropertyValue("overflow-y")||e.getPropertyValue("overflow");if("auto"===n||"scroll"===n)return t}return window},_handleScroll:function(t){var e=this._currentPosition();if(this._previousPosition!==e){e===POSITIONS.inside?this.props.onEnter.call(this,t):this._previousPosition===POSITIONS.inside&&this.props.onLeave.call(this,{event:t,position:e});var n=this._previousPosition===POSITIONS.below&&e===POSITIONS.above,r=this._previousPosition===POSITIONS.above&&e===POSITIONS.below;(n||r)&&(this.props.onEnter.call(this,t),this.props.onLeave.call(this,{event:t,position:e})),this._previousPosition=e}},_distanceToTopOfScrollableAncestor:function(t){return this.scrollableAncestor!==window&&!t.offsetParent,t.offsetParent!==this.scrollableAncestor&&t.offsetParent?t.offsetTop+this._distanceToTopOfScrollableAncestor(t.offsetParent):t.offsetTop},_currentPosition:function(){var t,e,n=this._distanceToTopOfScrollableAncestor(React.findDOMNode(this));this.scrollableAncestor===window?(t=window.innerHeight,e=window.pageYOffset):(t=this.scrollableAncestor.offsetHeight,e=this.scrollableAncestor.scrollTop);var r=t*this.props.threshold,o=n+r>=e;if(!o)return POSITIONS.above;var a=e+t,i=a>=n-r;return i?POSITIONS.inside:POSITIONS.below},render:function(){return React.createElement("span",{style:{fontSize:0}})}}),Pdf=React.createClass({displayName:"React-PDF",propTypes:{file:React.PropTypes.string,content:React.PropTypes.string,page:React.PropTypes.number,scale:React.PropTypes.number,onDocumentComplete:React.PropTypes.func,onPageComplete:React.PropTypes.func},getInitialState:function(){return{message:""}},loadFile:function(){var t=this.props.pdfPage.get("content");"-1"!==t&&t?"-"!==t?(debug("react.pdf.js loadFile: getDocument content called"),this.setState({message:"",content:t}),PDFJS.getDocument(t).then(this._onDocumentComplete)):this.setState({page:"",message:"",content:""}):this.setState({page:"",content:"",message:React.createElement("div",{className:"no-contract-error"},lang.sorry_loading,"  ",React.createElement("a",{href:"mailto: +{email} "},email)," ",lang.to_let_us_know)})},componentDidMount:function(){var t=this;this.props.pdfPage.on("change:content",function(){debug("react.pdf.js pdfPage change:content called"),t.loadFile()}),this.props.contractApp.on("change:pdfscale",function(){debug("react.pdf.js pdfPage change:pdfscale called"),t.forceUpdate()})},render:function(){var t=this;if(this.removeAnnotations(),this.state.page)return setTimeout(function(){if(t.isMounted()){var e=t.refs.pdfCanvas.getDOMNode(),n=e.getContext("2d"),r=t.props.scale,o=t.state.page.getViewport(1);o.width>600&&1===r?r=595/o.width:o.width>600&&(r=595*r/o.width),o=t.state.page.getViewport(r),e.width=o.width,e.height=o.height;var a={canvasContext:n,viewport:o},i=t.state.page.render(a),s=i._internalRenderTask.callback;i._internalRenderTask.callback=function(e){debug("react.pdf pageRendering callback",e),s.call(this,e),t.props.onPageRendered&&"function"==typeof t.props.onPageRendered&&t.state.content&&t.props.onPageRendered()}}}),React.createElement("canvas",{ref:"pdfCanvas"});if(this.state.message)return debug("react.pdf  showing generic message",this.state.message),React.createElement("div",null,this.state.message);var e=this.props.contractApp.getCurrentPage();return debug("react.pdf showing page loader",e),this.props.loading||React.createElement("div",{className:"pdf-loading"},lang.loading_page+e)},removeAnnotations:function(){$(".annotator-viewer").addClass("annotator-hide"),$(".annotator-pdf-hl").remove()},_onDocumentComplete:function(t){this.props.onDocumentComplete&&"function"==typeof this.props.onDocumentComplete&&this.props.onDocumentComplete(t.numPages),t.getPage(parseInt(this.props.page)).then(this._onPageComplete)},_onPageComplete:function(t){this.setState({page:t}),this.props.onPageComplete&&"function"==typeof this.props.onPageComplete&&this.props.onPageComplete(t.pageIndex+1)}}),PdfPaginationView=React.createClass({displayName:"PdfPaginationView",getInitialState:function(){return{visiblePage:1,totalPages:0}},changePage:function(t){this.refs.userInput.getDOMNode().value=t,this.setState({visiblePage:t}),this.props.contractApp.setCurrentPage(t),$(".pdf-viewer").animate({scrollTop:0},200)},clickPrevious:function(t){t.preventDefault(),this.state.visiblePage>1&&(this.changePage(this.state.visiblePage-1),this.props.contractApp.setPrevClick(!0))},clickNext:function(t){t.preventDefault(),this.state.visiblePage<this.state.totalPages&&this.changePage(this.state.visiblePage+1)},handleKeyDown:function(t){if(13==t.keyCode){var e=parseInt(this.refs.userInput.getDOMNode().value);e>0&&e<=this.state.totalPages?this.changePage(e):this.changePage(this.state.visiblePage)}},componentWillMount:function(){this.setState({visiblePage:this.props.contractApp.getCurrentPage()})},componentDidMount:function(){var t=this;t.setState({totalPages:t.props.contractApp.getTotalPages()}),this.props.contractApp.on("update-pdf-pagination-page",function(e){t.refs.userInput.getDOMNode().value=e,t.setState({visiblePage:e})}),this.refs.userInput.getDOMNode().value=this.state.visiblePage},render:function(){return React.createElement("div",{className:"pdf-pagination pagination",style:this.props.style},React.createElement("a",{href:"#",className:"previous",onClick:this.clickPrevious},lang.previous),React.createElement("input",{type:"text",className:"goto",ref:"userInput",onKeyDown:this.handleKeyDown}),React.createElement("a",{href:"#",className:"next",onClick:this.clickNext},lang.next)," ",lang.of," ",this.state.totalPages)}}),PdfZoom=React.createClass({displayName:"PdfZoom",getInitialState:function(){return{scale:1}},handleClick:function(t,e){t.preventDefault();var n=t.target.getAttribute("data-ref"),r=this.state.scale;2>r&&"increase"==n&&(r+=.25),r>.5&&"decrease"==n&&(r-=.25),this.setState({scale:r}),this.props.contractApp.setPdfScale(r)},render:function(){var t="scale-"+this.state.scale;$(".pdf-zoom-options span").removeClass("scale-selected"),$(".pdf-zoom-options ."+t).addClass("scale-selected");var e=100*this.state.scale;return React.createElement("div",null,React.createElement("div",{className:"pdf-zoom-options",style:this.props.style},React.createElement("span",null,lang.zoom),React.createElement("a",{className:"btn btn-default","data-ref":"decrease",href:"#",onClick:this.handleClick},"-"),React.createElement("p",null,e,"%"),React.createElement("a",{className:"btn btn-default","data-ref":"increase",href:"#",onClick:this.handleClick},"+")))}}),PdfViewer=React.createClass({displayName:"PdfViewer",getInitialState:function(){return{loadAnnotations:!1}},componentDidMount:function(){this.loadAnnotationsFlag=!1;var t=this;this.props.pagesCollection.on("reset",function(){debug("pdf.view.js pagesCollection reset called: triggering change:page_no"),t.props.contractApp.trigger("change:page_no")}),this.props.contractApp.on("change:pdfscale",function(){t.loadAnnotationsFlag=!0,t.forceUpdate()}),this.props.pdfPage.on("change:content",function(){t.loadAnnotationsFlag=!0})},render:function(){this.props.contractApp.getCurrentPage(),this.props.contractApp.getPdfUrl();return this.props.contractApp.setPdfLoaded(!1),React.createElement("div",{className:"pdf-viewer pdf-annotator",id:"pdfview",style:this.props.style},React.createElement(Pdf,{contractApp:this.props.contractApp,pdfPage:this.props.pdfPage,page:1,content:this.props.pdfPage.get("content"),scale:parseFloat(this.props.contractApp.getPdfScale())||1,onPageRendered:this._onPageRendered,renderReady:this.state.renderReady}))},loadAnnotations:function(){this.annotator||(this.annotator=new PdfAnnotatorjsView({el:".pdf-annotator",api:this.props.contractApp.getLoadAnnotationsUrl(),enablePdfAnnotation:!0,contractApp:this.props.contractApp}),this.props.contractApp.setAnnotatorInstance(this.annotator))},_onPageRendered:function(){"pdf"===this.props.contractApp.getView()&&this.loadAnnotationsFlag&&(this.annotator?(this.annotator.pageUpdated(),this.loadAnnotationsFlag=!1):$(".pdf-viewer").is(":visible")&&(this.loadAnnotations(),this.loadAnnotationsFlag=!1)),this.props.contractApp.setPdfLoaded(!0)}}),MetadataToggleButton=React.createClass({displayName:"MetadataToggleButton",getInitialState:function(){return{showMeta:!0}},handleClick:function(){this.state.showMeta?(this.setState({showMeta:!1}),$(".right-column-view").hide(),$(".metadata-toggle-button").removeClass("metadata-shown"),$(".pdf-viewer").css("width","70%"),$(".text-panel").css("width","70%")):(this.setState({showMeta:!0}),$(".metadata-toggle-button").addClass("metadata-shown"),$(".right-column-view").show(),$(".pdf-viewer").css("width","50%"),$(".text-panel").css("width","50%"))},render:function(){return React.createElement("div",{className:"metadata-toggle-button pull-right metadata-shown"},React.createElement("span",{onClick:this.handleClick},"Meta"))}}),MetadataView=React.createClass({displayName:"MetadataView",getInitialState:function(){return{showMoreMetadata:!1,showMoreText:!1}},componentDidMount:function(){var t=this;this.props.metadata.on("sync",function(){t.forceUpdate()})},clickShowMoreMetadata:function(t){t.preventDefault(),this.setState({showMoreMetadata:!this.state.showMoreMetadata}),this.state.showMoreMetadata?$(".metadata-view .show-more-meta").hide(500):$(".metadata-view .show-more-meta").show(500)},handleMoreText:function(t){t.preventDefault(),this.setState({showMoreText:!this.state.showMoreText})},render:function(){var t=lang.show_more;if(this.state.showMoreMetadata&&(t=lang.show_less),this.props.metadata.get("country")){var e=this.props.metadata.get("country").code.toLowerCase(),n=app_url+"/countries/"+e,r=this.props.metadata.get("year_signed"),o=app_url+"/contracts?year="+r,a=this.props.metadata.get("contract_type"),i=a.map(function(t,e){return e!=a.length-1?React.createElement("a",{href:app_url+"/search?q=&contract_type%5B%5D="+t,key:e},t+" | "):React.createElement("a",{href:app_url+"/search?q=&contract_type%5B%5D="+t,key:e},t)});"object"==typeof a&&(i=a.map(function(t,e){return e!=a.length-1?React.createElement("a",{href:app_url+"/search?q=&contract_type%5B%5D="+t,key:e},t+" | "):React.createElement("a",{href:app_url+"/search?q=&contract_type%5B%5D="+t,key:e},t)}));var s=(new RegExp(" ","g"),app_url+"/resources/",this.props.metadata.get("resource").length),c=this.props.metadata.get("resource").map(function(t,e){return e!=s-1?React.createElement("a",{href:app_url+"/resource/"+t,key:e},t+" | "):React.createElement("a",{href:app_url+"/resource/"+t,key:e},t)}),l=this.props.metadata.get("note");if(""!=l){var u="<span class='metadata-note'>"+lang.note+"</span>";if(this.state.showMoreText)h=React.createElement("a",{className:"ellipsis",href:"#",onClick:this.handleMoreText},{__html:lang.note_less});else{var p=20,d=l.split(" "),h="";d.length>p&&(l=d.slice(0,p).join(" ")+"... ",h=React.createElement("a",{className:"ellipsis",href:"#",onClick:this.handleMoreText},{__html:lang.note_more}))}u+='<span class="note">'+l+"</span>",u=React.createElement("span",{className:"note-inner-wrapper",dangerouslySetInnerHTML:{__html:u}})}var f="";return this.props.metadata.get("is_annexes_missing")&&(f+='<div class="metadata-ocid"><span>'+lang.annexes_missing+"</span><span>"+lang.yes+"</span></div>"),this.props.metadata.get("is_pages_missing")&&(f+='<div class="metadata-ocid"><span>'+lang.pages_missing+"</span><span>"+lang.yes+"</span></div>"),f={__html:f},React.createElement("div",{id:"metadata"},React.createElement("div",{className:"note-wrapper"},u,h),React.createElement("div",{className:"metadata-view"},React.createElement("div",null,lang.metadata,React.createElement("div",{className:"metadata-view-footer pull-right"},React.createElement("a",{href:this.props.contractApp.getMetadataSummaryLink()},lang.see_summary))),React.createElement("div",{className:"metadata-country"},React.createElement("span",null,lang.country),React.createElement("span",null,React.createElement("a",{href:n},this.props.metadata.get("country").name))),React.createElement("div",{className:"metadata-signature-year"},React.createElement("span",null,lang.signature_year),React.createElement("span",null,React.createElement("a",{href:o},this.props.metadata.get("year_signed")||"-"))),React.createElement("div",{className:"metadata-resource"},React.createElement("span",null,lang.resource),React.createElement("span",null,c)),React.createElement("div",{className:"metadata-type-contract"},React.createElement("span",null,lang.type_contract),React.createElement("span",null,i)),React.createElement("div",{className:"metadata-ocid"},React.createElement("span",null,lang.open_contracting_id),React.createElement("span",null,this.props.metadata.get("open_contracting_id"))),React.createElement("div",{className:"metadata-ocid"},React.createElement("span",null,lang.disclosure_mode),React.createElement("span",null,this.props.metadata.get("publisher_type")||"-")),React.createElement("div",{dangerouslySetInnerHTML:f}),React.createElement(LandMatrixView,{metadata:this.props.metadata})))}return React.createElement("div",{className:"metadata-view"},React.createElement("div",null,lang.metadata),React.createElement("span",null,lang.loading),React.createElement("div",{className:"metadata-view-footer"},React.createElement("a",{href:this.props.contractApp.getMetadataSummaryLink()},lang.see_summary)))}}),LandMatrixView=React.createClass({displayName:"LandMatrixView",componentDidMount:function(){var t=this;this.props.metadata.on("sync",function(){t.forceUpdate()})},render:function(){var t="-";return this.props.metadata.get("deal_number")&&(t="#"+this.props.metadata.get("deal_number")),"Openland"===category?React.createElement("div",{className:"metadata-ocid"},React.createElement("span",null,"Land Matrix ID: "),React.createElement("a",{target:"_blank",href:this.props.metadata.get("matrix_page")},t)):React.createElement("div",null)}}),RelatedDocumentsView=React.createClass({displayName:"RelatedDocumentsView",componentDidMount:function(){var t=this;this.props.metadata.on("sync",function(){t.forceUpdate()})},render:function(){function t(t){var e=(t+"").split(" "),n="";return e.length>10&&(n=" ..."),e=e.splice(0,10),e.join(" ")+n}var e="",n=[],r="";if(this.props.metadata.get("parent")){e=this.props.metadata.get("parent").map(function(t){var e=app_url+"/contract/"+t.open_contracting_id;return t.is_published?React.createElement("span",{className:"parent-contract"},React.createElement("a",{href:e},t.name)):void 0});for(var o=3,a=this.props.metadata.get("associated").length<o?this.props.metadata.get("associated").length:o,i=0;a>i;i++){var s=this.props.metadata.get("associated")[i];if(s.is_published){var c=app_url+"/contract/"+s.open_contracting_id;n.push(React.createElement("span",{id:i,className:"child-contract"},React.createElement("a",{href:c},t(s.name))))}}return this.props.metadata.get("associated").length>o&&n.push(React.createElement("span",null,React.createElement("a",{href:this.props.contractApp.getMetadataSummaryLink()+"#associatedcontracts"},"More..."))),e.length||n.length?React.createElement("div",{className:"relateddocument-view"},React.createElement("div",null,lang.related_docs),React.createElement("span",null,e),n,r):React.createElement("div",null)}return React.createElement("div",{className:"relateddocument-view"},React.createElement("div",null,lang.related_docs),lang.loading)}}),RelatedDocumentsMoreView=React.createClass({displayName:"RelatedDocumentsMoreView",componentDidMount:function(){var t=this;this.props.metadata.on("sync",function(){t.forceUpdate()})},render:function(){if(this.props.metadata.get("country")){var t=this.props.metadata.get("country").code.toLowerCase(),e=app_url+"/countries/"+t,n=React.createElement("a",{href:e},this.props.metadata.get("country").name),r=(app_url+"/resources/",this.props.metadata.get("resource").map(function(t,e){return React.createElement("a",{href:app_url+"/resource/"+t,key:e},t)}));return React.createElement("div",{className:"relateddocument-more-view"},React.createElement("div",null,"More"),React.createElement("div",null,React.createElement("div",null,"From ",n),React.createElement("div",null,"For ",r)))}return React.createElement("div",{className:"relateddocument-more-view"},React.createElement("div",null,"More"),React.createElement("span",null,"Loading..."))}}),OtherSourcesView=React.createClass({displayName:"OtherSourcesView",componentDidMount:function(){var t=this;this.props.metadata.on("sync",function(){t.forceUpdate()})},render:function(){if(this.props.metadata.get("company")){var t=this.props.metadata.get("url").amla,e=React.createElement("span",null,React.createElement("a",{href:t},this.props.metadata.get("country").name),"Legislation");return t?React.createElement("div",{className:"other-sources-view"},React.createElement("div",null,lang.other_sources),React.createElement("div",null,React.createElement("div",null,e))):React.createElement("div",null)}return React.createElement("div",{className:"other-sources-view"},React.createElement("div",null,lang.other_sources),React.createElement("span",null,lang.loading))}}),RightColumnView=React.createClass({displayName:"RightColumnView",render:function(){return React.createElement("div",{className:"right-column-view"},React.createElement(MetadataView,{contractApp:this.props.contractApp,metadata:this.props.metadata}),React.createElement(RelatedDocumentsView,{metadata:this.props.metadata,contractApp:this.props.contractApp}))}}),NavigationView=React.createClass({displayName:"NavigationView",render:function(){var t=null,e=null,n=null,r=null;return"pdf"===this.props.contractApp.getView()&&(e="active"),"text"===this.props.contractApp.getView()&&(t="active"),"annotation"===this.props.contractApp.getView()&&(n="active"),"metadata"===this.props.contractApp.getView()&&(r="active"),React.createElement("div",{className:"navigation"},React.createElement("a",{href:"#/text",className:t},lang.text),React.createElement("a",{href:"#/pdf",className:e},lang.pdf),React.createElement("a",{href:"#/annotation",className:n},"Annotation"),React.createElement("a",{href:"#/metadata",className:r},"Metadata"))}}),TextPaginationView=React.createClass({displayName:"TextPaginationView",getInitialState:function(){return{visiblePage:1,totalPages:0}},changePage:function(t){this.refs.userInputText.getDOMNode().value=t,this.props.contractApp.setCurrentPage(t),this.setState({visiblePage:t}),this.props.contractApp.triggerScrollToTextPage()},clickPrevious:function(t){t.preventDefault(),this.state.visiblePage>1&&(this.changePage(this.state.visiblePage-1),"pdf"==this.props.contractApp.getView()?this.props.contractApp.setPrevClick(!1):this.props.contractApp.setPrevClick(!0))},clickNext:function(t){t.preventDefault(),this.state.visiblePage<this.state.totalPages&&this.changePage(this.state.visiblePage+1)},handleKeyDown:function(t){if(13==t.keyCode){var e=parseInt(this.refs.userInputText.getDOMNode().value);e>0&&e<=this.state.totalPages?this.changePage(e):this.changePage(this.state.visiblePage)}},componentDidMount:function(){var t=$(".title-wrap").height();$(window).scroll(function(){$(window).scrollTop()>t?$(".title-head-wrap").addClass("fixed"):$(".title-head-wrap").removeClass("fixed")});var e=this;e.setState({totalPages:e.props.contractApp.getTotalPages()}),this.props.contractApp.on("update-text-pagination-page",function(t){e.refs.userInputText.getDOMNode().value=t,e.setState({visiblePage:t}),e.props.contractApp.setCurrentPage(t),e.setState({visiblePage:t})}),this.refs.userInputText.getDOMNode().value=this.state.visiblePage},render:function(){return React.createElement("div",{className:"text-pagination pagination",style:this.props.style},React.createElement("a",{href:"#",className:"previous",onClick:this.clickPrevious},lang.previous),React.createElement("input",{type:"text",className:"goto",ref:"userInputText",onKeyDown:this.handleKeyDown}),React.createElement("a",{href:"#",className:"next",onClick:this.clickNext},lang.next),lang.of," ",this.state.totalPages)}}),TextPageView=React.createClass({displayName:"TextPageView",getInitialState:function(){return{originalHtml:"",searchresultsHtml:""}},_onEnter:function(t,e){this.props.contractApp.isPrevClick()||this.props.contractApp.triggerUpdateTextPaginationPage(this.props.page.get("page_no")),this.props.contractApp.setPrevClick(!1)},_onLeave:function(t){},sanitizeTxt:function(t){return t=t.replace(/(<)(\/?)(?=span|div|br|p)([^>]*)(>)/g,"----lt----$2$3----gt----"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),t=t.replace(/----lt----/g,"<"),t=t.replace(/----gt----/g,">")},highlightSearchQuery:function(t,e){e=decodeURI(e);var n=new RegExp("("+e+")","gi");return t.replace(n,"<span class='search-highlight-word'>$1</span>")},componentDidMount:function(){var t=this;this.props.contractApp.on("searchresults:close",function(){t.setState({searchresultsHtml:""})}),this.props.contractApp.on("searchresults:ready",function(){if(t.props.contractApp.getSearchQuery()){var e=t.sanitizeTxt(t.props.page.get("text")),n=t.highlightSearchQuery(e,t.props.contractApp.getSearchQuery());t.state.originalHtml?t.setState({searchresultsHtml:n}):t.setState({originalHtml:e,searchresultsHtml:n})}})},render:function(){var t="";t=this.state.originalHtml?this.state.searchresultsHtml?this.state.searchresultsHtml:this.state.originalHtml:this.sanitizeTxt(this.props.page.get("text"));var e=this.props.page.get("page_no"),n=1==e?0:-.4;return React.createElement("span",{className:e},React.createElement("span",null,e),React.createElement("span",{ref:"text_content",dangerouslySetInnerHTML:{__html:t}}),React.createElement(Waypoint,{onEnter:this._onEnter.bind(this,"enter"+e),onLeave:this._onLeave,threshold:n}))}}),TextViewer=React.createClass({displayName:"TextViewer",getInitialState:function(){return{}},handleClickWarning:function(t){t.preventDefault(),$(t.target).parent().hide(500)},loadAnnotations:function(){this.annotator||(this.annotator=new AnnotatorjsView({el:".text-annotator",api:this.props.contractApp.getLoadAnnotationsUrl(),availableTags:["Country","Local-Company-Name"],annotationCategories:["General information","Country","Local company name"],enablePdfAnnotation:!1,
contractApp:this.props.contractApp}),this.props.contractApp.setAnnotatorInstance(this.annotator))},scrollToPage:function(t){if($("."+t).offset()){var e=$("."+t).offset().top,n=$(".text-annotator ").scrollTop(),r=$(".text-annotator").offset().top;$(".text-annotator").animate({scrollTop:n-r+e},100)}},componentDidMount:function(){var t=this;this.props.contractApp.on("searchresults:ready",function(){t.annotator&&setTimeout(t.annotator.reload(),1e3)}),this.props.contractApp.on("searchresults:close",function(){t.annotator&&setTimeout(t.annotator.reload(),1e3)}),this.props.pagesCollection.on("reset",function(){t.message="",0===t.props.pagesCollection.models.length&&(t.message=React.createElement("div",{"class":"no-contract-error"},lang.sorry_loading)),t.forceUpdate(),t.loadAnnotations(),t.props.contractApp.triggerScrollToTextPage()}),this.props.contractApp.on("scroll-to-text-page",function(){t.scrollToPage(t.props.contractApp.getCurrentPage())})},render:function(){var t=this,e=this.props.metadata.get("is_ocr_reviewed"),n=this.message?"":React.createElement("div",{className:"text-viewer-warning"},React.createElement("span",{className:"pull-right link close",onClick:this.handleClickWarning},"x"),lang.text_created_automatically,React.createElement("a",{target:"_blank",href:learn_more_url},lang.learn_more)),r=this.message?this.message:lang.wait_while_loading;if(this.props.pagesCollection.models.length>0){r=[];for(var o=0;o<this.props.pagesCollection.models.length;o++){var a=this.props.pagesCollection.models[o];r.push(React.createElement(TextPageView,{key:o,contractApp:t.props.contractApp,page:a}))}}return"undefined"==typeof e&&(n=""),0===this.props.pagesCollection.models.length&&(n=React.createElement("div",{className:"text-viewer-warning"},not_published_message),r=""),0==e&&(n=React.createElement("div",{className:"text-viewer-warning"},processing_pdf_file_message),r=""),React.createElement("div",{className:"text-panel",id:"textview",style:this.props.style},n,React.createElement("div",{className:"text-annotator"},React.createElement("div",null),React.createElement("div",{className:"text-viewer"},r)))}}),TextSearchForm=React.createClass({displayName:"TextSearchForm",handleSubmit:function(t){t.preventDefault();var e=React.findDOMNode(this.refs.searchInput).value.trim();e&&(document.location.hash="#/search/"+encodeURI(e))},componentDidMount:function(){React.findDOMNode(this.refs.searchInput).value=this.props.contractApp.getSearchQuery()},render:function(){return React.createElement("div",{className:"text-search-container"},React.createElement("a",{className:"back",href:back_url},"Back"),React.createElement("div",{className:"text-search"},React.createElement("form",{onSubmit:this.handleSubmit},React.createElement("input",{type:"text",className:"",ref:"searchInput",placeholder:lang.search_in_this_document}))))}}),TextSearchResultRow=React.createClass({displayName:"TextSearchResultRow",handleClick:function(){if("text"==this.props.resultRow.get("type"))location.hash="#/text",this.props.contractApp.setIsSearch(!0),this.props.contractApp.setCurrentPage(this.props.resultRow.get("page_no")),this.props.contractApp.triggerScrollToTextPage();else switch(location.hash="#/"+this.props.resultRow.get("annotation_type")+"/page/"+this.props.resultRow.get("page_no")+"/annotation/"+this.props.resultRow.get("annotation_id"),this.props.resultRow.get("annotation_type")){case"pdf":self=this,this.props.contractApp.setView("pdf"),this.props.contractApp.setIsSearch(!0),this.props.contractApp.setSelectedAnnotation(self.props.resultRow.get("annotation_id")),this.props.contractApp.trigger("annotations:highlight",{id:self.props.resultRow.get("annotation_id")}),this.props.contractApp.setCurrentPage(self.props.resultRow.get("page_no")),this.props.contractApp.triggerUpdatePdfPaginationPage(self.props.resultRow.get("page_no"));break;case"text":self=this,this.props.contractApp.setView("text"),this.props.contractApp.setIsSearch(!0),this.props.contractApp.trigger("annotations:highlight",{id:self.props.resultRow.get("annotation_id")}),this.props.contractApp.setCurrentPage(self.props.resultRow.get("page_no")),this.props.contractApp.showTextAnnotationPopup(self.props.resultRow.get("annotation_id"))}},highlightSearchQuery:function(t,e){e=decodeURI(e);var n=new RegExp(e,"gi");return t.replace(n,"<span class='search-highlight-word'>"+e+"</span>")},render:function(){var t=this.highlightSearchQuery(this.props.resultRow.get("text"),this.props.contractApp.getSearchQuery()),e="<a class='text' title='Text'>Text</a>";return"annotation"==this.props.resultRow.get("type")&&(e="<a class='annotations' title='Annotation'>Annotation</a>"),t="<span>Pg "+this.props.resultRow.get("page_no")+"&nbsp;"+t+"</span>"+e,React.createElement("div",{className:"search-result-row link",onClick:this.handleClick},React.createElement("span",{dangerouslySetInnerHTML:{__html:t}}))}}),TextSearchResultsList=React.createClass({displayName:"TextSearchResultsList",componentDidMount:function(){var t=this;this.props.searchResultsCollection.on("reset",function(){t.forceUpdate(),t.props.contractApp.trigger("searchresults:ready")})},handleCloseSearchResults:function(){this.props.contractApp.trigger("searchresults:close"),document.location.hash="#/text",this.props.contractApp.setView("text")},render:function(){var t=this,e=lang.searching;return this.props.searchResultsCollection.models.length>0?e=this.props.searchResultsCollection.models.map(function(e,n){return React.createElement(TextSearchResultRow,{key:n,contractApp:t.props.contractApp,resultRow:e})}):this.props.searchResultsCollection.searchCompleted===!0&&0==this.props.searchResultsCollection.length&&(e=lang.no_results_found),this.props.searchResultsCollection.models.length>0?React.createElement("div",{style:this.props.style,className:"search-results-list"},React.createElement("div",{className:"search-result-title"},"Search result for ",decodeURI(this.props.contractApp.getSearchQuery())),React.createElement("span",{className:"pull-right link close",onClick:this.handleCloseSearchResults},"x"),e):React.createElement("div",{style:this.props.style,className:"search-results-list"},React.createElement("span",{className:"pull-right link close",onClick:this.handleCloseSearchResults},"x"),e)}}),AnnotationsViewer=React.createClass({displayName:"AnnotationsViewer",getInitialState:function(){return{scrollBtnStyle:"display:none"}},componentDidMount:function(){var t=150,e=200;$("#annotations-box").scroll(function(){$(this).scrollTop()>t?$(".back-to-top").fadeIn(e):$(".back-to-top").fadeOut(e)}),$(".back-to-top").click(function(t){return t.preventDefault(),$(".annotation-inner-viewer").animate({scrollTop:0},e),!1})},render:function(){return React.createElement("div",{id:"annotations",className:"annotations-viewer",style:this.props.style},React.createElement("div",{className:"annotation-inner-viewer",id:"annotations-box"},React.createElement(AnnotationHeader,{contractApp:this.props.contractApp,annotationsCollection:this.props.annotationsCollection}),React.createElement(AnnotationsSort,{contractApp:this.props.contractApp,annotationsCollection:this.props.annotationsCollection}),React.createElement(AnnotationsList,{contractApp:this.props.contractApp,annotationsCollection:this.props.annotationsCollection})),React.createElement("a",{href:"#",className:"back-to-top btn btn-primary"},React.createElement("i",{className:"fa fa-arrow-up"})))}}),AnnotationHeader=React.createClass({displayName:"AnnotationHeader",componentDidMount:function(){var t=this;this.props.annotationsCollection.on("reset",function(){t.forceUpdate()})},render:function(){var t=this.props.annotationsCollection.totalAnnotations();return React.createElement("div",{className:"annotation-title"},t," ",lang.annotations)}}),AnnotationsSort=React.createClass({displayName:"AnnotationsSort",getInitialState:function(){return{show:!1,sortBy:"cluster"}},componentDidMount:function(){var t=this;this.props.annotationsCollection.on("reset",function(){t.props.annotationsCollection.models.length>0&&t.setState({show:!0})}),this.setState({sortBy:"cluster"})},onClickPage:function(t){t.preventDefault(),this.props.annotationsCollection.setSortByKey("page_no"),this.props.contractApp.resetSelectedAnnotation(),this.props.contractApp.trigger("annotations:render"),this.setState({sortBy:"page_no"})},onClickTopic:function(t){t.preventDefault(),this.props.annotationsCollection.setSortByKey("category"),this.props.contractApp.resetSelectedAnnotation(),this.props.contractApp.trigger("annotations:render"),this.setState({sortBy:"cluster"})},render:function(){var t="",e="active",n="";"cluster"==this.state.sortBy&&(e="",n="active",t=React.createElement(AnnotationTopicList,{contractApp:this.props.contractApp}));this.state.sortBy;return this.state.show?React.createElement("div",{className:"annotation-sort"},React.createElement("span",{className:e,onClick:this.onClickPage},lang.by_page),React.createElement("span",{className:n,onClick:this.onClickTopic},lang.by_topic),t):React.createElement("div",null)}}),AnnotationTopicList=React.createClass({displayName:"AnnotationTopicList",getInitialState:function(){return{show:!1}},handleClick:function(t,e){e.preventDefault();var n=t;"All"==n?$(".annotation-item").show():($(".annotation-item").hide(),$("."+n).show()),$(".annotations-topic-list > span").removeClass("selected-topic"),$(e.target).addClass("selected-topic")},render:function(){return React.createElement("div",{className:"annotations-topic-list"},React.createElement("span",{className:"selected-topic",onClick:this.handleClick.bind(this,"All")},lang.all),React.createElement("span",{onClick:this.handleClick.bind(this,"General")},lang.general),React.createElement("span",{onClick:this.handleClick.bind(this,"Environment")},lang.environment),React.createElement("span",{onClick:this.handleClick.bind(this,"Fiscal")},lang.fiscal),React.createElement("span",{onClick:this.handleClick.bind(this,"Operations")},lang.operations),React.createElement("span",{onClick:this.handleClick.bind(this,"Social")},lang.social),React.createElement("span",{onClick:this.handleClick.bind(this,"Other")},lang.other))}}),AnnotationsList=React.createClass({displayName:"AnnotationsList",getInitialState:function(){return{message:lang.loading_annotations}},componentDidMount:function(){var t=this;this.props.annotationsCollection.on("reset",function(){t.props.annotationsCollection.totalAnnotations()>0?t.setState({message:""}):t.setState({message:lang.no_annotation}),t.props.contractApp.getSelectedAnnotation()&&t.props.contractApp.trigger("annotations:scroll-to-selected-annotation")}),this.props.contractApp.on("annotations:render",function(e){t.forceUpdate()}),this.props.contractApp.on("annotations:highlight",function(e){var n=t,r=t.props.annotationsCollection.get(e.id);setTimeout(function(){n.scrollToAnnotation(r.get("id"))},100)}),this.props.contractApp.on("annotations:scroll-to-selected-annotation",function(){var e=t.props.annotationsCollection.get(t.props.contractApp.getSelectedAnnotation());e&&t.scrollToAnnotation(e.get("id"))}),this.props.contractApp.on("annotations:scroll-to-top",function(){t.scrollToTop()}),this.props.contractApp.on("annotations:scroll-to-cluster",function(e){t.scrollToCluster(e)})},scrollToCluster:function(t){if($("#"+t).offset()){var e=$("#"+t).offset().top,n=$(".annotation-inner-viewer").scrollTop(),r=$(".annotation-inner-viewer").offset().top;$(".annotation-inner-viewer").animate({scrollTop:n-r+e},200)}},scrollToAnnotation:function(t){if(t){var e=$(".p-"+t).offset().top,n=$(".annotation-inner-viewer").scrollTop(),r=$(".annotation-inner-viewer").offset().top,o=n-r+e-5;$(".annotation-inner-viewer").animate({scrollTop:o},200),this.props.contractApp.resetSelectedAnnotation()}},scrollToTop:function(t){t.preventDefault(),$(".annotations-viewer").animate({scrollTop:0},500)},getAnnotationItemsComponent:function(t,e){var n=[];if(_.size(t)>0)for(var r in t)n.push(React.createElement(AnnotationItem,{showClusterAnyway:e,key:r,contractApp:this.props.contractApp,annotationsCollection:this.props.annotationsCollection,annotation:t[r]}));return n},getAnnotationItemsComponentByPage:function(t,e){var n=[];if(_.size(t)>0)for(var r in t)for(var o in t[r])console.log(t[r][o]),n.push(React.createElement(AnnotationItem,{showClusterAnyway:e,key:r+"-"+o,contractApp:this.props.contractApp,annotationsCollection:this.props.annotationsCollection,annotation:[t[r][o]]}));return n},sortByPage:function(){return this.props.annotationsCollection.models.length>0?(this.props.annotationsCollection.sort(),React.createElement("div",{className:"annotations-list",id:"id-annotations-list"},this.getAnnotationItemsComponentByPage(this.props.annotationsCollection.groupByPage(),!0))):[]},sortByCategory:function(){return this.props.annotationsCollection.models.length>0?(this.props.annotationsCollection.sort(),React.createElement("div",{className:"annotations-list",id:"id-annotations-list"},this.getAnnotationItemsComponent(this.props.annotationsCollection.groupByCategory(),!0))):void 0},render:function(){return this.props.annotationsCollection.models.length>0?"category"===this.props.annotationsCollection.sort_key?this.sortByCategory():this.sortByPage():React.createElement("div",{className:"annotations-list",id:"id-annotations-list"},React.createElement("p",{className:"annotation-loading"},this.state.message))}}),PageLink=React.createClass({displayName:"PageLink",getInitialState:function(){return{id:"",pageNo:"",annotationType:""}},componentDidMount:function(){var t=this;this.setPageState(),this.props.contractApp.on("annotations:highlight",function(e){e.id===t.state.id&&("pdf"===t.state.annotationType?location.hash="#/pdf/page/"+t.state.pageNo+"/annotation/"+t.state.id:location.hash="#/text/page/"+t.state.pageNo+"/annotation/"+t.state.id)}),this.props.contractApp.on("change:selected_annotation_id-1",function(){t.props.contractApp.getSelectedAnnotation()===t.state.id&&(location.hash="#/pdf/page/"+t.state.pageNo+"/annotation/"+t.state.id)})},setPageState:function(){var t=this.props.annotation.get("id"),e=this.props.annotation.get("page_no"),n="text";this.props.annotation.get("shapes")&&(n="pdf"),this.setState({id:t,pageNo:e,annotationType:n})},handleAnnotationClick:function(t){var e=this;switch(t.preventDefault(),this.state.annotationType){case"pdf":if(this.props.contractApp.trigger("annotations:highlight",{id:e.state.id}),this.props.contractApp.setView("pdf"),this.props.contractApp.setSelectedAnnotation(e.state.id),e.props.contractApp.getCurrentPage()==e.state.pageNo){var e=this;setTimeout(function(){e.props.contractApp.showPdfAnnotationPopup(e.state.id)},300)}this.props.contractApp.setCurrentPage(e.state.pageNo),this.props.contractApp.triggerUpdatePdfPaginationPage(e.state.pageNo);break;case"text":this.props.contractApp.trigger("annotations:highlight",{id:e.state.id});var e=this;setTimeout(function(){e.props.contractApp.showTextAnnotationPopup(e.state.id)},300),this.props.contractApp.setView("text"),this.props.contractApp.setCurrentPage(e.state.pageNo)}},render:function(){return""!=this.props.article_reference?React.createElement("span",{className:"page-gap"},React.createElement("a",{href:"#",onClick:this.handleAnnotationClick},this.props.article_reference),this.props.last?", ":""):React.createElement("span",{className:"page-gap"},React.createElement("a",{href:"#",onClick:this.handleAnnotationClick},this.props.page),this.props.last?", ":"")}}),AnnotationItem=React.createClass({displayName:"AnnotationItem",getInitialState:function(){return{maxWords:10,id:"",annotation_id:"",text:"",shortText:"",showEllipse:"",showMoreFlag:"",highlight:!1,annotationList:[]}},getCategory:function(){return this.state.annotationList[0].get("category")},shallShowEllipse:function(t){var e=(t+"").split(" ");return e.length>=this.state.maxWords?!0:!1},truncate:function(t){var e=(t+"").split(" ");return e=e.splice(0,this.state.maxWords),e.join(" ")},setAnnotationState:function(){var t=this.state.annotationList[0],e=t.get("text")?t.get("text").trim():"",n=t.get("id"),r=t.get("annotation_id"),o=this.shallShowEllipse(e),a="";o&&(a=this.truncate(e));var i=this.props.annotationsCollection.get(this.props.contractApp.getSelectedAnnotation()),s=i&&i.get("annotation_id")===r?!0:!1;this.setState({id:n,text:e,annotation_id:r,shortText:a.trim(),showEllipse:o,showMoreFlag:s,highlight:s})},getPages:function(){var t=this;this.props.annotation.sort(function(t,e){return t.get("page_no")-e.get("page_no")});var e=_.groupBy(this.props.annotation,function(t){return t.get("page_no")});e=_.toArray(e);var n=e.length;return e.map(function(e,r){var o=e[0].get("page_no"),a=!1;n-1>r&&(a=!0);var i=e.length,s=e.map(function(e,n){var r=!1;i-1>n&&(r=!0);var a=""!=e.get("article_reference")?e.get("article_reference"):"";return React.createElement(PageLink,{contractApp:t.props.contractApp,annotation:e,last:r,page:o,article_reference:a})});return React.createElement("span",null,lang.page," ",o," (",s,")",a?", ":"")})},componentWillMount:function(){this.setState({annotationList:this.props.annotation})},componentDidMount:function(){this.setAnnotationState();var t=this;this.props.contractApp.on("annotations:highlight",function(e){var n=e.id,r=!1;t.state.annotationList.map(function(t,e){n==t.get("id")&&(r=!0)}),r?t.setState({showMoreFlag:!0,highlight:!0}):t.setState({showMoreFlag:!1,highlight:!1})}),this.props.contractApp.on("change:selected_annotation_id-1",function(){var e=t.props.annotationsCollection.get(t.props.contractApp.getSelectedAnnotation());e.get("annotation_id")===t.state.annotation_id?t.setState({showMoreFlag:!0,highlight:!0}):t.setState({showMoreFlag:!1,highlight:!1})})},handleEllipsis:function(t){t.preventDefault(),this.setState({showMoreFlag:!this.state.showMoreFlag})},getShowText:function(){var t="",e=this.props.annotation[0],n=e.get("text")?e.get("text").trim():"";return this.state.showEllipse&&(n=this.state.text+" ",t=lang.less,this.state.showMoreFlag||(t=lang.more,n=this.state.shortText+"... ")),n=""!=this.state.text?React.createElement("span",{className:"annotation-item-content"},React.createElement("span",{dangerouslySetInnerHTML:{__html:nl2br(n)}}),React.createElement("nobr",null,React.createElement("a",{className:"annotation-item-ellipsis",href:"#",onClick:this.handleEllipsis,dangerouslySetInnerHTML:{__html:t}}))):""},getPageClasses:function(){var t="";return this.props.annotation.map(function(e,n){t+=" p-"+e.get("id")}),t},getCluster:function(){return this.state.annotationList[0].get("cluster")},render:function(){var t=this.state.highlight?"annotation-item selected-annotation":"annotation-item",e=this.getCategory();return React.createElement("div",{className:t+" "+this.getCluster()+this.getPageClasses(),id:this.state.annotation_id},React.createElement("p",{className:"category"},e),React.createElement("p",{className:"annotated-text"},this.getShowText()),React.createElement("div",{className:"annotation-page"},this.getPages()))}}),contractApp=new ContractApp({contract_id:contract.metadata.id,guid:contract.metadata.open_contracting_id,total_pages:contract.metadata.number_of_pages,esapi:esapi});debug("initializing contract ",contractTitle,contractApp.get("contract_id"));var pagesCollection=new ViewerPageCollection;pagesCollection.url=contractApp.getAllPageUrl(),pagesCollection.fetch({reset:!0}),pagesCollection.on("reset",function(){debug("view.blade pageCollection reset, trigger change:page_no"),contractApp.trigger("change:page_no")});var annotationsCollection=new AnnotationsCollection;annotationsCollection.url=contractApp.getAllAnnotationsUrl(),annotationsCollection.fetch({reset:!0});var searchResultsCollection=new SearchResultsCollection;searchResultsCollection.url=contractApp.getSearchUrl();var pdfPage=new PdfPage({contractApp:contractApp}),DownloadUrl=React.createClass({displayName:"DownloadUrl",getInitialState:function(){return{dropdown:!1}},toggleDropdown:function(){this.setState({dropdown:!this.state.dropdown})},render:function(){var t={display:"block"},e={display:"none"},n=this.state.dropdown?t:e,r=encodeURIComponent(window.location.href);return this.props.annotations_url||this.props.text_url?this.props.text_url?this.props.annotations_url?React.createElement("div",null,React.createElement("div",{className:"download-dropdown"},React.createElement("a",{href:"#",onClick:this.toggleDropdown},React.createElement("span",null,lang.download)),React.createElement("ul",{style:n},React.createElement("li",null,React.createElement("a",{href:this.props.pdf_url},lang.pdf)),React.createElement("li",null,React.createElement("a",{href:this.props.text_url},lang.word_file)),React.createElement("li",null,React.createElement("a",{href:this.props.annotations_url},lang.annotations)))),React.createElement("ul",{className:"social-share"},React.createElement("li",{className:"facebook"},React.createElement("a",{href:facebook_share+r,target:"_blank"},"FB")),React.createElement("li",{className:"google-plus"},React.createElement("a",{href:google_share+r,target:"_blank"},"G+")),React.createElement("li",{className:"twitter"},React.createElement("a",{href:twitter_share,target:"_blank"},"T")))):React.createElement("div",null,React.createElement("div",{className:"download-dropdown"},React.createElement("a",{href:"#",onClick:this.toggleDropdown},React.createElement("span",null,lang.download)),React.createElement("ul",{style:n},React.createElement("li",null,React.createElement("a",{href:this.props.pdf_url},lang.pdf)),React.createElement("li",null,React.createElement("a",{href:this.props.text_url},lang.word_file)))),React.createElement("ul",{className:"social-share"},React.createElement("li",{className:"facebook"},React.createElement("a",{href:facebook_share+r,target:"_blank"},"FB")),React.createElement("li",{className:"google-plus"},React.createElement("a",{href:google_share+r,target:"_blank"},"G+")),React.createElement("li",{className:"twitter"},React.createElement("a",{href:twitter_share,target:"_blank"},"T")))):React.createElement("div",null,React.createElement("div",{className:"download-dropdown"},React.createElement("a",{href:"#",onClick:this.toggleDropdown},React.createElement("span",null,lang.download)),React.createElement("ul",{style:n},React.createElement("li",null,React.createElement("a",{href:this.props.pdf_url},lang.pdf)),React.createElement("li",null,React.createElement("a",{href:this.props.annotations_url},lang.annotations)))),React.createElement("ul",{className:"social-share"},React.createElement("li",{className:"facebook"},React.createElement("a",{href:facebook_share+r,target:"_blank"},"FB")),React.createElement("li",{className:"google-plus"},React.createElement("a",{href:google_share+r,target:"_blank"},"G+")),React.createElement("li",{className:"twitter"},React.createElement("a",{href:twitter_share,target:"_blank"},"T")))):React.createElement("div",null,React.createElement("div",{className:"download-dropdown"},React.createElement("a",{href:"#",onClick:this.toggleDropdown},React.createElement("span",null,lang.download)),React.createElement("ul",{style:n},React.createElement("li",null,React.createElement("a",{href:this.props.pdf_url},lang.pdf)))),React.createElement("ul",{className:"social-share"},React.createElement("li",{className:"facebook"},React.createElement("a",{href:facebook_share+r,target:"_blank"},"FB")),React.createElement("li",{className:"google-plus"},React.createElement("a",{href:google_share+r,target:"_blank"},"G+")),React.createElement("li",{className:"twitter"},React.createElement("a",{href:twitter_share,target:"_blank"},"T"))))}}),SelectLanguage=React.createClass({displayName:"SelectLanguage",handleChange:function(t){console.log("hello",t)},render:function(){var t=[];t=JSON.parse(languages);var e=[],n={width:"16px",height:"16px","margin-right":"6px"},r={"min-width":"110px"};return _.each(t,function(t,r){var o=currentUrl+"?lang="+r,a="https://raw.githubusercontent.com/younginnovations/country-flags/master/png250px/"+t.country_code+".png";r!=currentLanguage&&e.push(React.createElement("li",null,React.createElement("a",{href:o},React.createElement("img",{style:n,src:a}),t.name)))}),localisationState?React.createElement("div",{className:"dropdown language-selector"},React.createElement("button",{className:"btn  dropdown-toggle","data-toggle":"dropdown"},React.createElement("img",{style:n,src:languageImage}),selectedLang,React.createElement("span",{className:"caret"})),React.createElement("ul",{className:"dropdown-menu",style:r},e)):React.createElement("div",null)}}),MainApp=React.createClass({displayName:"MainApp",getInitialState:function(){return{currentView:"pdf"}},text:function(t,e){debug("view.blade.php: setting text view"),contractApp.setView("text"),contractApp.setCurrentPage(contractApp.getCurrentPage()),contractApp.resetSelectedAnnotation(),t&&contractApp.setCurrentPage(t),e&&contractApp.setSelectedAnnotation(e),contractApp.trigger("update-text-pagination-page",contractApp.getCurrentPage()),this.forceUpdate(),contractApp.trigger("scroll-to-text-page")},pdf:function(t,e){debug("view.blade.php: setting pdf view"),contractApp.setView("pdf"),t&&contractApp.setCurrentPage(t),e?contractApp.setSelectedAnnotation(e):contractApp.resetSelectedAnnotation(),contractApp.trigger("change:page_no"),contractApp.trigger("update-pdf-pagination-page",contractApp.getCurrentPage()),this.forceUpdate()},search:function(t){contractApp.setView("search");contractApp.metadata.get("is_ocr_reviewed");contractApp.setSearchQuery(t),searchResultsCollection.fetch({searchTerm:t,reset:!0}),this.forceUpdate()},meta:function(t){},metadata:function(){contractApp.setView("metadata"),this.scrollTo("#metadata"),this.forceUpdate()},annotation:function(){contractApp.setView("annotation"),this.scrollTo("#annotations"),this.forceUpdate()},scrollTo:function(t){$("html,body").animate({scrollTop:$(t).offset().top-150},"slow")},componentDidUpdate:function(){contractApp.setIsSearch(!1)},componentWillMount:function(){var t=Router({"/text":this.text,"/text/page/:page_no":this.text,"/text/page/:page_no/annotation/:annotation_id":this.text,"/pdf":this.pdf,"/metadata":this.metadata,"/annotation":this.annotation,"/pdf/page/:page_no":this.pdf,"/pdf/page/:page_no/annotation/:annotation_id":this.pdf,"/search/:query":this.search,"/meta/:action":this.meta});t.init()},getStyle:function(t){var e={display:"none"};return t&&(e.display="block"),e},render:function(){return React.createElement("div",{className:"main-app"},React.createElement("div",{className:"title-head-wrap"},React.createElement("div",{className:"title-wrap"},React.createElement("div",{className:"navbar-header"},React.createElement("a",{className:"navbar-brand",href:app_url},category,React.createElement("span",{className:"beta"},"Beta"),React.createElement("span",null,"Contracts"))),React.createElement("span",null,htmlDecode(contractTitle)),React.createElement(SelectLanguage,null)),React.createElement("div",{className:"head-wrap clearfix"},React.createElement(TextSearchForm,{style:this.getStyle(contractApp.isViewVisible("TextSearchForm")),contractApp:contractApp}),React.createElement(NavigationView,{contractApp:contractApp}),React.createElement(TextPaginationView,{style:this.getStyle(contractApp.isViewVisible("TextPaginationView")),contractApp:contractApp,pagesCollection:pagesCollection}),React.createElement(PdfPaginationView,{style:this.getStyle(contractApp.isViewVisible("PdfPaginationView")),contractApp:contractApp}),React.createElement(PdfZoom,{style:this.getStyle(contractApp.isViewVisible("PdfZoom")),contractApp:contractApp}),React.createElement(DownloadUrl,{pdf_url:pdf_download_url,text_url:text_download_url,annotations_url:annotations_download_url}),React.createElement(MetadataToggleButton,{style:this.getStyle(contractApp.getShowMeta()),contractApp:contractApp}))),React.createElement("div",{className:"document-wrap"},React.createElement(AnnotationsViewer,{style:this.getStyle(contractApp.isViewVisible("AnnotationsViewer")),contractApp:contractApp,annotationsCollection:annotationsCollection}),React.createElement(TextSearchResultsList,{style:this.getStyle(contractApp.isViewVisible("TextSearchResultsList")),contractApp:contractApp,searchResultsCollection:searchResultsCollection}),React.createElement("div",{className:"title-pdf-wrapper"},React.createElement(TextViewer,{style:this.getStyle(contractApp.isViewVisible("TextViewer")),contractApp:contractApp,pagesCollection:pagesCollection,metadata:contractApp.metadata}),React.createElement(PdfViewer,{pdfPage:pdfPage,style:this.getStyle(contractApp.isViewVisible("PdfViewer")),contractApp:contractApp,pagesCollection:pagesCollection})),React.createElement(RightColumnView,{metadata:contractApp.metadata,contractApp:contractApp})))}});React.render(React.createElement(MainApp,null),document.getElementById("content"));